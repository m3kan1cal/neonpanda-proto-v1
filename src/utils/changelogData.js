/**
 * Changelog Data - Centralized version history for NeonPanda platform
 *
 * This file contains all release version information used across the application.
 * Import this to display changelog information consistently.
 *
 * Usage:
 * import { changelogEntries, getLatestVersions, getTotalChanges } from '../utils/changelogData';
 */

export const changelogEntries = [
  {
    version: "Release v1.0.20251222-beta",
    date: "2025-12-22",
    changes: {
      added: [
        "Semantic badge color system for discipline-specific workout sections with 3-tier hierarchy (Pink=Main Work, Cyan=Accessory, Purple=Warmup/Technique)",
        "Badge color legend component (BadgeLegend.jsx) displaying semantic meaning at bottom of each discipline section for user reference",
        "Conditional badge coloring logic in all 8 discipline components based on set_type, movement_category, lift_category, movement_pattern, skill_category, and effort_level",
        "Text-based success indicators replacing emoji checkboxes in Olympic Weightlifting and Calisthenics sections (Success/Missed instead of ✅/❌)",
        "Default collapsed state for physical-notes subsection in Subjective Feedback section for cleaner initial view",
        "Default collapsed state for the-breakdown subsection in Personal Insights section",
        "Default collapsed state for quality-metrics and extraction-tips subsections in Extraction Notes section",
        "Centralized icon imports in WorkoutViewerV2 from SynthwaveComponents (MetricsIcon, NotesIcon, AIIcon, TrophyIcon, SummaryIcon, CyclesIcon, FeedbackIcon, ProcessingIcon, DatabaseIcon)",
      ],
      changed: [
        "Workout name display format updated to show 'workout name (discipline)' instead of 'workout: workout name' matching ManageWorkouts page pattern",
        "Section header dots changed from neon cyan to neon pink across WorkoutViewerV2 and all 8 discipline-specific components for stronger visual hierarchy",
        "Section header dot vertical alignment standardized to items-start with mt-2 (matching TrainingGrounds and ProgramDashboard) instead of items-center with mt-0.5",
        "Badge colors in discipline sections now use semantic system: amrap badges are neon pink (main work), working sets are neon pink, warmup/technique are purple, accessories are cyan",
        "Olympic Weightlifting exercise names in section headers changed from neon cyan to neon pink as they are main lifts",
        "Calisthenics badge names cleaned to remove underscores (skill practice instead of skill_practice)",
        "Calisthenics Success text styled as muted gray italic instead of neon cyan for subtler indication",
        "Vertical spacing reduced between sets/exercises in discipline sections (space-y-4 to space-y-2 in containers) for more compact, scannable layout",
        "Exercise and set metadata text size increased from text-xs to text-sm in discipline sections for improved readability",
        "Skeleton loading structure for WorkoutDetailsV2 updated to match new V2 two-column layout with distinct left/right sections",
        "Skeleton loading structure for ProgramDashboard updated to reflect two-column 60/40 layout with section headers and grid-based content",
        "Skeleton loading header dots updated to match normal dots (w-3 h-3 with flex-shrink-0 mt-0.5) in WorkoutDetailsV2, ProgramDashboard, ManageWorkouts, and ManageMemories",
        "Skeleton loading header dots changed to neon pink/30 (faded) in WorkoutDetailsV2, ManageWorkouts, and ManageMemories for consistency with live pages",
        "Skeleton workout card height in ManageWorkouts reduced from h-80 to h-64 for more compact grid layout",
        "Icon definitions moved from WorkoutViewerV2 inline declarations (lines 8-183) to centralized SynthwaveComponents for reusability",
      ],
      fixed: [
        "Inconsistent badge coloring across discipline sections with no clear semantic meaning (mixed pink/cyan/gray usage)",
        "Olympic Weightlifting and Calisthenics using emoji indicators (✅/❌) causing accessibility and clarity issues",
        "Section header dots in WorkoutViewerV2 vertically centered (items-center) instead of top-aligned (items-start) like other pages",
        "Section header dot margin inconsistency (mt-0.5 in WorkoutViewerV2 vs mt-2 in TrainingGrounds/ProgramDashboard)",
        "Skeleton loading dots smaller than normal dots due to missing flex-shrink-0 mt-0.5 classes",
        "Skeleton loading structure for WorkoutDetailsV2 showing old V1 stacked layout instead of new V2 two-column layout",
        "ProgramDashboard skeleton structure showing generic sections instead of matching actual two-column layout",
        "Exercise metadata text too small (text-xs) for comfortable reading in discipline sections",
        "Excessive vertical spacing in discipline sections making them feel sparse and requiring excessive scrolling",
        "Badge legend tooltip in discipline sections requiring hover/click interaction, reducing discoverability",
        "Calisthenics section showing underscored badge names (skill_practice) instead of human-readable format",
        "Success indicators in Olympic Weightlifting showing neon cyan instead of muted styling",
        "Workout name format inconsistent with ManageWorkouts cards showing different pattern",
      ],
      removed: [
        "Tooltip-based badge legend with info icon from discipline section headers (replaced with static legend at section bottom)",
        "Emoji checkboxes (✅/❌) from Olympic Weightlifting and Calisthenics sections",
        "Inline icon definitions (175 lines) from WorkoutViewerV2 (consolidated to SynthwaveComponents)",
        "Horizontal line separator above badge legend in discipline sections for cleaner visual flow",
      ],
    },
  },
  {
    version: "Release v1.0.20251219-beta",
    date: "2025-12-19",
    changes: {
      added: [
        "ProgramDesignerAgent agentic AI system for tool-driven training program generation with intelligent orchestration and parallel phase generation",
        "Seven specialized tools for ProgramDesignerAgent: load_program_requirements, generate_program_structure, generate_phase_workouts, validate_program, normalize_program, generate_program_summary, save_program_to_database",
        "build-program-v2 Lambda function implementing agent-driven program design flow as swappable alternative to original build-program handler",
        "Agent retry logic with shouldRetryWithStrongerPrompt() detecting incomplete AI responses and buildRetryPrompt() for recovery attempts",
        "Defense-in-depth validation in ProgramDesignerAgent using enforceValidationBlocking() preventing tools from executing when validation fails",
        "Integration test suite for build-program-v2 with 13 test scenarios (8 success cases covering diverse programs from 4-week beginner to 12-week body recomposition, 5 error handling cases)",
        "AI-powered test payload generation via --generate flag creating 5 additional diverse program design scenarios dynamically for comprehensive testing",
        "Test result JSON export via --output=FILE option for programmatic analysis and CI/CD integration matching build-workout-v2 test patterns",
        "Unique Map storage keys for generate_phase_workouts results (e.g., 'generate_phase_workouts:phaseId') preventing data loss when generating multiple phases in parallel",
        "Named constants for Pinecone compression magic numbers: DEFAULT_TARGET_SIZE_RATIO (0.8), COMPRESSION_SAFETY_MARGIN (0.9), TRUNCATION_SAFETY_MARGIN (0.95), EMERGENCY_FALLBACK_RATIO (0.8)",
        "Pre-validation logic in build-program-v2 handler for incomplete program requirements preventing unnecessary agent invocations",
        "Blocking flags in ProgramDesignResult interface tracking validation failures and providing detailed error context to callers",
      ],
      changed: [
        "Agent naming standardized to ProgramDesigner (not ProgramBuilder) for consistency with conversation mode naming patterns (WorkoutLogger for workout_log, ProgramDesigner for program_design)",
        "ProgramDesignerContext refactored to extend AgentContext and BuildProgramEvent directly eliminating redundant property definitions and simplifying context construction",
        "ProgramDesignerAgent tool result types moved from public types.ts to internal tools.ts for better encapsulation and cleaner API surface",
        "storeGenerationDebugData() in program-designer/helpers.ts signature aligned with workout-logger pattern (context, debugData, error parameters) for consistency",
        "System prompt structure in program-designer/prompts.ts refactored to match workout-logger template including detailed CONTEXT section, COMMON SCENARIOS, and standardized section separators",
        "build-program-v2 Lambda memory increased from 3008 MB to 3072 MB (valid AWS increment) providing headroom for parallel phase generation",
        "Compression fallback logic in pinecone-compression.ts now uses actualTotalSize for calculations ensuring accurate compression when initial size estimates are underestimated",
        "Truncation math in compressContent() uses Math.min(1, targetSize / currentSize) ratio clamping preventing expansion when targetSize exceeds currentSize",
        "extractProgramName() in ProgramDesignerAgent converts programDuration from days to weeks (Math.round(durationDays / 7)) before appending '-Week' suffix for consistent unit handling",
        "S3 storage condition in saveProgramToDatabaseTool simplified from 'if (!s3Key || workoutTemplates)' to 'if (!s3Key)' preventing duplicate storage attempts",
        "pineconeRecordId in saveProgramToDatabaseTool returns 'async-pending' instead of null when storage attempted, accurately representing fire-and-forget Pinecone operations",
        "isInitialMessage check in program-creator/question-generator.ts filters out isPreSessionContext messages before checking conversationHistory.length ensuring initial greeting triggers correctly",
        "Integration test comments clarified that build-program-v2 agent is non-interactive receiving complete todoList (unlike conversational program-designer-session flow)",
      ],
      fixed: [
        "Critical data loss bug where generate_phase_workouts results overwrote each other in Map using same key ('generate_phase_workouts') instead of unique keys per phase",
        "False positive success reporting in buildResultFromToolData when program ID regex matched input context text instead of actual save_program_to_database success",
        "Program name displaying incorrect duration units (e.g., '56-Week' instead of '8-Week') due to mixing days value with weeks label without unit conversion",
        "S3 storage unnecessarily triggering on every save_program_to_database call regardless of s3Key existence due to always-truthy workoutTemplates array check",
        "pineconeStored field always returning false in agent results despite Pinecone storage actually being attempted asynchronously in fire-and-forget pattern",
        "Compression fallback ineffective when Pinecone size estimate underestimated due to truncateAt calculation producing values larger than content.length when targetSize > currentSize",
        "Uncaught exceptions in storeWithAutoCompression when compression retry failed with same size error because fallback truncation returned unchanged content",
        "Initial message greeting not triggering in program design mode when pre-session context messages existed in conversationHistory causing isInitialMessage check to fail",
        "Critical bug in build-program-v2 handler where early return statement inside Pinecone storage try-block (line 221) exited entire Lambda without returning success response when programId was missing",
        "TypeScript errors in program-designer/prompts.ts passing entire context to buildCoachPersonalityPrompt instead of context.coachConfig",
        "TypeScript errors in program-designer/tools.ts calling generatePhaseWorkouts (incorrect name) instead of generateSinglePhaseWorkouts and missing allPhases argument",
        "TypeScript errors in program-designer/tools.ts accessing result.phaseWithWorkouts.phaseName (should be .name) and .workoutTemplates (should be .workouts)",
        "TypeScript errors in test-build-program-v2.ts due to untyped validations array, resolved by adding ValidationResult and TestResult interfaces",
      ],
      removed: [
        "buildProgramDebugData() helper function in program-designer/helpers.ts as debug data now built inline within storeGenerationDebugData for consistency",
        "Regex-based programIdMatch fallback in buildResultFromToolData preventing false success reports when program_ pattern appears in AI response text",
        "Magic numbers throughout pinecone-compression.ts replaced with self-documenting named constants improving code maintainability and configuration discoverability",
      ],
    },
  },
  {
    version: "Release v1.0.20251218-beta",
    date: "2025-12-18",
    changes: {
      added: [
        "Explicit line break formatting instructions in training program workout template descriptions with CRITICAL FORMATTING guidance for AI",
        "Three comprehensive examples showing proper workout formatting: single exercise, multi-exercise rounds with bullets, and complex multi-section workouts",
        "Detailed formatting rules for exercise separation, blank lines between sections, and readability improvements in workout prescriptions",
        "Extended thinking support (Claude Sonnet 4.5) for program and workout summary generation improving quality of AI-generated summaries for Pinecone semantic search",
        "S3 content validation in build-program-v2 integration tests checking Phase-Workout Alignment (all workouts have valid phaseId references preventing orphaned templates)",
        "S3 content validation in build-program-v2 integration tests checking Workout-Day Range Validation (workouts assigned to days within their phase boundaries)",
        "Two new integration test scenarios for build-program-v2: Hyrox competition prep (10-week, 5 days/week with running + station work) and body recomposition (12-week, 4 days/week physique focus)",
        "Comprehensive blocking categories (5 types) in workout logger retry logic: past workouts, future/planning, not completed, questions/advice, general discussion",
        "Defense-in-depth architecture for workout logging with three validation tiers: stream-coach-conversation initial detection, agent AI blocking, and retry logic protection",
        "Detailed logging when blocking retry showing which category matched (isPastWorkout, isPlanning, etc.) with reason preview for debugging and monitoring",
      ],
      changed: [
        "Workout template description prompt in phase-generator.ts enhanced with mandatory line break requirements between exercises",
        "Example workout prescriptions updated from single-line format to multi-line format with proper exercise separation",
        "Workout formatting guidance now includes specific instructions for warmup, main work, accessory circuits, and finisher sections",
        "generateProgramSummary() and generateWorkoutSummary() functions now accept optional enableThinking parameter (default: false) for flexible extended thinking control",
        "generate_program_summary tool in program-designer agent now uses extended thinking (enableThinking: true) for comprehensive multi-phase program synthesis",
        "generate_workout_summary tool in workout-logger agent now uses extended thinking (enableThinking: true) for nuanced performance context and achievement capture",
        "Workout logger retry logic enhanced from 3 blocking patterns to 5 comprehensive categories preventing aggressive retry override of correct AI blocking decisions",
        "Integration test suite for build-program-v2 expanded to 13 total tests: 8 diverse success scenarios (simple 4-week, complex 8-week, beginner hypertrophy, powerlifting prep, short deload, functional fitness, Hyrox prep, body recomposition) + 5 error handling cases",
        "S3 validation in integration tests now performs 7 checks per test (file retrieval, array presence, template count, required fields, training day distribution, phase alignment, day range validation)",
      ],
      fixed: [
        "Critical readability issue where workout template descriptions displayed all exercises on single line without line breaks (e.g., 'Bench Press: 2x2 @ 90-93% Overhead Press: 3x3 @ 87-90% Weighted Dip: 3x6-8')",
        "Giant set workouts displaying exercises in continuous run-on sentences instead of bulleted lists for each movement",
        "Multi-phase workouts (warmup, strength, conditioning) lacking visual section separation making prescriptions difficult to follow",
        "Critical workout logger bug where retry logic aggressively overrode AI's correct detection of past workout reflections (e.g., 'Yesterday's workout was brutal' being logged despite AI recognizing retrospective content)",
        "Missing extended thinking in program and workout summary generation tools despite thinking already enabled in phase structure and workout generation for inconsistent AI quality",
        "Retry logic only checking for 'planning' and 'future workout' patterns missing other non-workout content types like past reflections, advice seeking, and general discussion",
        "Integration test failure for past-workout-reflection scenario where retry prompt forced extraction despite AI initially correctly blocking retrospective content",
      ],
      removed: [],
    },
  },
  {
    version: "Release v1.0.20251217-beta",
    date: "2025-12-17",
    changes: {
      added: [
        "Hard delete functionality for training programs supporting complete removal from DynamoDB, S3, and Pinecone when explicitly requested via hardDelete query parameter",
        "Hard delete functionality for program designer sessions supporting complete removal from DynamoDB, S3, and Pinecone when explicitly requested via hardDelete query parameter",
        "deleteProgramDesignerSessionSummaryFromPinecone() function in program-designer/pinecone.ts following consistent naming patterns across codebase for Pinecone deletion operations",
        "deleteObjects() batch deletion utility in s3-utils.ts for efficient multi-file S3 deletion supporting up to 1000 keys per request with comprehensive error tracking",
        "Batch S3 deletion with detailed result reporting showing deletedCount and per-key error information for robust cleanup operations",
        "Query parameter support for hardDelete flag (defaults to false) on both delete-program and delete-program-designer-session endpoints maintaining soft delete as default behavior",
      ],
      changed: [
        "delete-program handler enhanced to support both soft delete (status: archived, default) and hard delete (complete removal from all storage layers) via hardDelete query parameter",
        "delete-program-designer-session handler updated to properly implement soft delete by default (isDeleted: true) with optional hard delete via hardDelete query parameter",
        "Program deletion flow now uses batch S3 deletion (deleteObjects) for program designer session images instead of individual delete calls for improved efficiency",
        "Hard delete operations now remove data from all three storage layers: DynamoDB (deleteProgram/deleteProgramDesignerSession), Pinecone (delete summaries), and S3 (delete details/images)",
        "Soft delete behavior maintained as default for audit trail and potential restore capabilities across both program and session deletion flows",
        "Delete operation error handling enhanced with graceful degradation where Pinecone or S3 failures are logged as warnings but don't block DynamoDB deletion",
      ],
      fixed: [
        "delete-program-designer-session handler incorrectly performing hard deletes when soft delete was intended default behavior for audit trail preservation",
      ],
      removed: [],
    },
  },
  {
    version: "Release v1.0.20251216-beta",
    date: "2025-12-16",
    changes: {
      added: [
        "Dedicated Program Designer page (ProgramDesigner.jsx) with chat-based interface for multi-turn program design conversations, mirroring CoachCreator flow with session-based architecture",
        "ProgramDesignerAgent for frontend state management with session lifecycle handling, progress tracking, streaming message processing, and completion detection",
        "stream-program-designer-session Lambda with streaming SSE architecture for real-time program design conversations using awslambda.streamifyResponse pattern",
        "create-program-designer-session Lambda for creating new program design sessions with rich metadata including progress details, estimated duration, and coach information",
        "get-program-designer-session Lambda for fetching single session data with authentication middleware",
        "get-program-designer-sessions Lambda for retrieving all sessions for a user with filtering by completion status",
        "delete-program-designer-session Lambda for removing program design sessions with proper cleanup",
        "In-Progress Program Design Sessions section on ManagePrograms page displaying active sessions with progress bars, coach attribution, and continue/delete actions",
        "Progress indicator in ChatInput showing items completed, total items, and percentage with animated progress bar for both Program Designer and Coach Creator flows",
        "Completion banner on ProgramDesigner page indicating session completion and program generation status, persisting across page refreshes",
        "Completion modal on ProgramDesigner page with purple-themed styling, status information (building program, 2-3 min duration, monitor on Programs page), and navigation options",
        "Delete functionality for program designer sessions including confirmation modal, loading states, and automatic redirection after deletion",
        "coachName field to ProgramDesignerSession interface for proper coach attribution in session cards",
        "Spinner to Design New Program card on ManagePrograms showing Creating Session... text during API call for visual feedback",
        "Tool choice enforcement in Bedrock API calls via toolChoice parameter forcing Claude to use specified tools and strictly adhere to input schemas",
        "Data normalization logic in program-designer/todo-extraction.ts handling both raw string and structured object formats from AI extraction",
        "handleCompletion method in ProgramDesignerAgent triggering onNavigation callback on session completion for coordinated UI updates",
        "Metadata event yielding mode and progress before streaming chunks in program designer flow ensuring frontend receives styling information upfront",
        "Progress persistence in programSession.progressDetails updated after each turn for accurate progress tracking across page refreshes",
        "Empty state tips on ProgramDesigner page aligned with NeonPanda brand voice emphasizing trust the process and conversational approach",
      ],
      changed: [
        "Migrated all programCreator terminology to programDesigner across entire stack (frontend components, backend Lambdas, API routes, type definitions, variable names)",
        "Consolidated message types to use CoachMessage everywhere, removing ConversationMessage type for consistency across Coach Creator, Program Designer, and Coach Conversations",
        "Updated ProgramDesignerSession to store conversation history directly in conversationHistory property as CoachMessage array, eliminating dependency on CoachConversation entities",
        "Refactored stream-program-designer-session Lambda to use consistent streaming architecture with internalStreamingHandler, authenticatedStreamingHandler, and awslambda.streamifyResponse wrapper",
        "Renamed streamingHandler to internalStreamingHandler across all streaming Lambdas (stream-coach-conversation, stream-coach-creator-session, stream-program-designer-session) for naming consistency",
        "Updated ChatInput to normalize progress data accepting both questionsCompleted/estimatedTotal and itemsCompleted/totalItems property names for cross-flow compatibility",
        "Changed program designer to use build-program-v2 flow instead of build-program with updated environment variables and Lambda invoke permissions",
        "Made conversationId optional in BuildProgramEvent and Program interfaces as program designer sessions are not tied to conversations",
        "Enhanced CoachMessage metadata to include isQuestion and progress fields for richer message context in todo-list collection flows",
        "Added coach_creator to ConversationMode type union for proper mode tracking in coach creator sessions",
        "Updated In-Progress Program Designs descriptive text to Pick up exactly where you left off and let's finish building something great together for brand alignment",
        "Updated skeleton loading structure for in-progress cards on ManagePrograms to exactly match Coaches page (header width, Design New Program skeleton, reduced card count, simplified structure)",
        "Changed Delete conversation text to Delete session in ChatInput when context is program-design or creation for accurate terminology",
        "Updated ChatInput submit/record icon behavior to always show button (disabled when empty, enabled when input/AI responding) matching CoachConversations pattern",
        "Changed ProgramDesigner enableRecording prop from false to true ensuring microphone button displays when input empty",
        "Modified session completion logic to require both all required fields AND additionalConsiderations collected before marking complete, preventing premature completion",
        "Updated handleProgramDesignerFlow to check persisted programSession.isComplete flag instead of calculated isComplete to prevent race conditions",
        "Updated ProgramDesignerAgent.loadSession to restore isComplete state from session.isComplete or session.programGeneration.status for banner persistence",
        "Modified buildToolConfig in api-helpers.ts to accept enforceToolUse parameter adding toolChoice: { tool: { name } } to Bedrock calls for strict schema adherence",
        "Updated all four Bedrock API calls (callBedrockApi, callBedrockApiStream, callBedrockApiMultimodal, callBedrockApiMultimodalStream) to pass enforceToolUse: true",
      ],
      fixed: [
        "Smart Router program design detection sensitivity causing unexpected mode switches in general coaching conversations about workout planning",
        "Program design suggestion banner appearing briefly then disappearing due to streaming message cleanup race condition",
        "TypeScript errors in create-program-designer-session handler related to statusCode parameter type (string vs number)",
        "Route mismatch for program-designer-sessions causing 404 and CORS errors due to missing API Gateway routes and Lambda registrations",
        "Session ID pattern incorrectly including conversationId prefix when program designer sessions are standalone entities",
        "ProgramDesignerAgent validation failures due to missing sessionId property and incorrect conversationId checks",
        "Progress indicator flicker in ChatInput resetting to 0% after user message due to stale progressDetails in database",
        "Session completion logic prematurely marking complete when required fields collected but before additionalConsiderations gathered",
        "build-program-v2 handler failing with Missing required fields error due to conversationId validation when sessions don't have conversations",
        "Completion banner disappearing on page refresh due to agent not restoring isComplete state from database",
        "Progress indicator stuck at 0/5 caused by AI returning raw strings instead of expected object format with value and confidence properties",
        "AI response chunks streaming in white text (chat mode) instead of purple (program design mode) due to mode metadata sent after chunks",
        "Record button clickable when AI responding, now properly disabled with opacity and cursor-not-allowed styling",
        "Coach name showing as Unknown for in-progress sessions due to missing coachName field in ProgramDesignerSession",
        "Program build not triggering after additional considerations answer due to isComplete flag set prematurely on previous turn",
        "TypeError Cannot set properties of null in ProgramDesignerAgent when attempting to set mode on non-existent conversation object",
        "Submit button in ChatInput not showing when input empty and recording disabled, now always shows disabled button for consistent UX",
        "Submit button not disabled when isUploading is true, now properly includes isUploading in disabled prop and spinner condition",
        "coachId undefined error in stream-program-designer-session for older sessions, added explicit validation throwing helpful error message",
        "Completion modal missing from ProgramDesigner unlike CoachCreator, now shows after 3-second delay with purple-themed styling",
        "onNavigation callback not triggered on session completion, now calls handleCompletion method to notify navigation handler",
      ],
      removed: [
        "FloatingMenuManager and FloatingMenu components identified as dead code and removed from codebase",
        "All conversationId requirements and dependencies from program designer sessions, making them fully standalone entities",
        "ConversationMessage type deprecated and removed, consolidated to CoachMessage for unified message structure",
        "conversationId from ProgramDesignerSession interface and session ID pattern (was program_designer_{userId}_{conversationId}_{timestamp}, now program_designer_{userId}_{timestamp})",
        "conversationId from ValidationParams and BusinessLogicParams interfaces in business-types.ts",
        "existingConversation from ConversationData interface in business-types.ts",
        "CoachConversation creation and management logic from stream-program-designer-session handler",
        "getProgramDesignerSessionByCoach function and consolidated to single getProgramDesignerSession in dynamodb/operations.ts",
        "Redundant program_designer_${userId}_ prefix from getProgramDesignerSession query logic",
        "conversationId from initial logging, validation checks, error logging, and error response payloads in build-program-v2 handler",
        "conversationId requirement from ProgramDesignerContext and storeGenerationDebugData context parameters",
        "Premature progress metadata event from createProgramDesignerEventStream causing stale 0/0 data",
        "Incorrect createOptimizedChunkStream wrapper from stream-program-designer-session as events were already formatted SSE",
      ],
    },
  },
  {
    version: "Release v1.0.20251215-beta",
    date: "2025-12-15",
    changes: {
      added: [
        "ToolConfig schema-based memory detection using detect_memory_request, analyze_memory_needs, and detect_memory_characteristics tools with structured JSON schemas for guaranteed response validation",
        "MEMORY_REQUEST_DETECTION_SCHEMA enforcing exact response structure for memory request detection preventing AI from adding unexpected fields",
        "CONSOLIDATED_MEMORY_ANALYSIS_SCHEMA for comprehensive memory analysis combining retrieval needs and memory characteristics in single validated response",
        "MEMORY_CHARACTERISTICS_SCHEMA for structured memory classification with validated type, importance, scope, and tagging",
        "Platform Features section in coach conversation system prompt informing AI about Program Designer page as optional alternative while emphasizing it can help with program design directly in conversations",
      ],
      changed: [
        "Program design redirect behavior from hard blocking to informational only - AI can now help with program design in coach conversations while optionally mentioning Program Designer as alternative",
        "Program design detection confidence threshold raised from 0.7 to 0.9 reducing false positives and only redirecting on very explicit multi-week program requests",
        "Program design detection prompt made more conservative requiring explicit use of word 'program' or multi-week/multi-month timeframes to avoid treating normal coaching conversations as program design",
        "User message creation moved to before redirect checks in stream-coach-conversation handler ensuring user messages always saved regardless of flow path",
        "detectMemoryRequest() converted from text-based JSON with parseJsonWithFallbacks workarounds to tool use with schema enforcement eliminating all JSON parsing logic",
        "analyzeMemoryNeeds() converted to tool use with CONSOLIDATED_MEMORY_ANALYSIS_SCHEMA providing type-safe validated responses for comprehensive memory analysis",
        "detectMemoryCharacteristics() converted to tool use with MEMORY_CHARACTERISTICS_SCHEMA ensuring structured memory classification without manual validation",
      ],
      fixed: [
        "Critical bug in program design redirect logic where user messages were never saved to conversation history causing conversation record to only contain AI redirect messages without user's original question",
        "Program design redirect handlers exiting early before user message creation at line 940 breaking conversation history tracking and causing duplicate AI responses",
        "JSON parsing errors in memory detection where AI was adding unexpected fields like isWorkoutLog from other detection schemas causing 'Unexpected non-whitespace character after JSON' errors",
        "Malformed JSON responses from memory detection AI mixing response schemas and adding extra closing braces that manual JSON fixing could not repair",
        "Memory detection AI confusion from extensive workout logging exclusion instructions causing it to include workout-related fields in memory detection responses",
        "Conversation metadata (lastActivity, totalMessages) not being updated in redirect flows causing stale metadata in DynamoDB records",
      ],
      removed: [
        "Program design slash command redirect logic (/design-program, /program) that was blocking users from getting help - AI now handles naturally without forced redirects",
        "Natural language program design redirect logic that was too aggressive and blocked normal coaching conversations about workout planning and exercise selection",
        "JSON_FORMATTING_INSTRUCTIONS_STANDARD from memory detection prompts as schema enforcement via toolConfig makes explicit formatting instructions unnecessary",
        "parseJsonWithFallbacks() calls from all three memory detection functions (detectMemoryRequest, analyzeMemoryNeeds, detectMemoryCharacteristics) replaced with direct tool use responses",
        "Manual JSON structure validation logic in memory detection functions replaced with Bedrock API-level schema validation",
      ],
    },
  },
  {
    version: "Release v1.0.20251213-beta",
    date: "2025-12-13",
    changes: {
      added: [
        "Dual-format conversation summary generation producing both full summary (DynamoDB storage) and compact summary (Pinecone semantic search) in single AI call, eliminating second AI compression pass and preventing token throttling cascades",
        "ToolConfig schema-based conversation summary generation using generate_conversation_summary tool with CONVERSATION_SUMMARY_SCHEMA for guaranteed structure validation and no JSON parsing errors",
        "Deterministic compression algorithm for conversation summaries intelligently truncating arrays to top 2-3 items and capping narratives at 500 characters without AI overhead, handling 90%+ of size limit cases instantly",
        "Three-tier Pinecone storage strategy: (1) use AI-generated compact summary, (2) apply deterministic compression if needed, (3) fall back to AI compression only as last resort",
        "Aggressive exponential backoff for Bedrock throttling with 30s/90s/180s/300s retry delays (10 minutes total) allowing token bucket to refill after massive summary generation calls",
        "Enhanced token usage tracking and cost estimation logging for conversation summary generation showing estimated input tokens, processing duration, and approach used (dual-format vs legacy vs AI compression)",
      ],
      changed: [
        "Conversation summary Lambda timeout increased from 300s (5 minutes) to 720s (12 minutes) accommodating large summary generation (~3 min) plus retry delays (up to 10 min)",
        "Conversation summary message interval increased from every 6 messages to every 10 messages, reducing summary generation frequency by 40% to account for higher token consumption with dual-format approach",
        "Conversation summary message threshold converted from magic number (6) to named constant CONVERSATION_SUMMARY_MESSAGE_INTERVAL (10) for improved code maintainability and documentation",
        "Conversation summary prompt simplified and restructured to leverage toolConfig schema, removing verbose JSON examples and focusing on coaching insights and methodology capture",
        "Pinecone compression retry delays increased from 2s/5s/10s (17s total) to 30s/90s/180s/300s (600s total) for better handling of token bucket throttling after large AI operations",
        "parseCoachConversationSummary() now accepts either tool result data object (preferred) or JSON string (legacy) for backward compatibility during transition",
        "Conversation summary generation now produces Pinecone-optimized content upfront rather than generating large summary then compressing, reducing AI calls by 50% and eliminating throttling cascade",
        "CONVERSATION_SUMMARY_TOOL schema enforces maxItems constraints on compact_summary arrays (2-3 items per field) ensuring size targets are met by AI generation, not post-processing",
      ],
      fixed: [
        "Critical production timeout in build-conversation-summary Lambda where sequential AI calls (summary generation ~140K tokens + compression ~54K tokens) exhausted token bucket causing ThrottlingException, then insufficient retry delays (2s/5s) prevented recovery, leading to Lambda timeout at 300s limit",
        "Two-pass AI approach inefficiency where full summary generation consumed massive tokens then immediate compression attempt was throttled, wasting the first AI call and requiring fallback truncation that degraded search quality",
        "Pinecone storage failures for large conversations (300+ messages) where AI compression was needed but throttling errors after summary generation prevented compression from succeeding within Lambda timeout window",
        "Conversation summary JSON parsing errors and inconsistent formatting issues eliminated by switching from string-based JSON with parseJsonWithFallbacks workarounds to toolConfig schema with guaranteed structure",
      ],
      removed: [
        "Two-pass AI compression approach for conversation summaries (generate large summary → compress) replaced with single-pass dual-format generation producing both full and compact versions simultaneously",
        "JSON formatting instructions and structure examples from conversation summary prompt removed as schema now enforces structure automatically via toolConfig",
      ],
    },
  },
  {
    version: "Release v1.0.20251212-beta",
    date: "2025-12-12",
    changes: {
      added: [
        "AI-powered compression system for Pinecone metadata using Claude Sonnet 4.5 to intelligently compress oversized content while preserving semantic meaning and searchability",
        "storeWithAutoCompression() wrapper function providing automatic retry logic: attempts original content first, then uses AI compression if size limit exceeded, with emergency truncation as last resort",
        "compressContent() function using Claude Sonnet 4.5 to semantically compress content to target size while preserving keywords, concepts, entities, and searchable terms",
        "calculateMetadataSize() utility for accurate byte-size estimation of Pinecone content and metadata before storage attempts",
        "Intelligent compression targeting 80% of Pinecone's 40KB limit by default, leaving safety margin for metadata overhead and encoding variations",
        "Comprehensive logging for compression operations showing original size, compressed size, compression ratio achieved, and whether result is within target limits",
        "Three-tier fallback strategy: original content → AI compression → emergency truncation, ensuring storage always succeeds even if AI fails",
        "Fire-and-forget Pinecone storage in agent tools (workout logger, program designer) eliminating user-facing latency from background storage operations",
        "ProgramExtractionResult interface in todo-extraction.ts defining structured return type with todoList, userWantsToFinish, and userChangedTopic fields",
        "Pre-session conversation history inclusion in program design mode providing AI with full context from messages before the session started",
        "User context integration (recent workouts, Pinecone memories, user profile, active program) in program design question generation for smarter, more personalized questions",
      ],
      changed: [
        "All Pinecone storage operations (conversations, programs, workouts, coach creator, user memory) now use AI compression instead of pre-truncation for size management",
        "Conversation summary storage now includes ALL structured data (goals, progress, insights, preferences) without artificial truncation limits, relying on AI compression only when needed",
        "Program summary storage now includes complete phase names, focus areas, goals, and equipment constraints without pre-truncation",
        "Workout summary storage now includes all PR achievements without arbitrary limits, compressing only when total size exceeds 40KB",
        "Coach creator summary storage now includes full reasoning fields, specializations, and considerations without character limits",
        "User memory storage now includes all tags and full content without pre-truncation, preserving complete semantic context",
        "Workout logger agent tool now uses fire-and-forget Pinecone storage (non-blocking) preventing AI compression latency from affecting user response times",
        "Program designer agent tool now uses fire-and-forget Pinecone storage (non-blocking) ensuring immediate response to users regardless of compression needs",
        "Agent tool return values now indicate Pinecone storage status as 'pending' rather than blocking on completion for improved performance",
        "Program design mode intent detection made more explicit requiring keywords like 'program', 'routine', 'plan', or 'workout program/plan' to prevent accidental triggering on general exercise questions",
        "extractAndUpdateTodoList function now returns structured ProgramExtractionResult object instead of raw todoList for proper intent signal propagation",
        "Program design conversation handler now includes all messages from before session start (pre-session context) in conversationHistory for complete AI context",
        "Program design question generator now includes userContext (recent workouts, memories, profile, active program) in prompts to avoid re-asking known information",
      ],
      fixed: [
        "Production error where conversation summaries exceeding 45KB failed Pinecone storage with 'Metadata size exceeds the limit of 40960 bytes' error",
        "Potential data loss from blind truncation of structured data arrays (goals, insights, progress items) when approaching size limits",
        "Search quality degradation from arbitrary truncation cutting off important keywords and concepts mid-content",
        "Agent conversation latency spikes (2-5+ seconds) when Pinecone storage with compression blocked user responses in workout logging and program design flows",
        "Missing semantic context in Pinecone searches due to pre-emptive truncation removing searchable terms before actual size limits reached",
        "Critical bug where program design mode was triggered too easily by general exercise questions due to overly permissive intent detection patterns",
        "Critical bug preventing cancellation of program design sessions where userChangedTopic flag was not properly returned from todo-extraction.ts to conversation-handler.ts",
        "Memory amnesia in program design mode where AI couldn't access conversation history from before the session started, causing repeated questions about already-discussed topics",
        "Program design questions lacking context about user's recent workouts, saved memories, and active programs causing redundant information gathering",
      ],
      removed: [
        "All pre-emptive truncation logic from Pinecone storage modules (truncateArray, truncateText functions) replaced with intelligent AI compression",
        "Hard-coded truncation limits (e.g., 2000 chars for narratives, 10 items for arrays) replaced with dynamic AI-driven compression based on actual content size",
      ],
    },
  },
  {
    version: "Release v1.0.20251207-beta",
    date: "2025-12-07",
    changes: {
      added: [
        "AI agent architecture for workout logging with intelligent tool orchestration (extract → validate → normalize → save) achieving 95%+ accuracy on complex multi-phase workouts",
        "WorkoutLoggerAgent system using Bedrock tool-use capabilities for structured data extraction with automatic validation and quality assessment",
        "Five-tool agent workflow for workout processing: extract_workout_data, validate_workout_completeness, normalize_workout_data, generate_workout_summary, save_workout_to_database",
        "Hybrid exercise validation combining fast property checks (powerlifting/CrossFit/running) with AI semantic validation for qualitative disciplines (yoga/martial arts/climbing)",
        "Code-level blocking enforcement preventing agent from overriding validation decisions (shouldSave: false) with defense-in-depth approach",
        "Automatic normalization skipping for very high confidence extractions (≥95%) improving performance by 40-50 seconds per workout",
        "Two-tier model selection for normalization using Claude Haiku 4.5 for simple fixes and Claude Sonnet 4.5 for complex structural issues",
        "Comprehensive workout completeness scoring with confidence thresholds triggering normalization only when needed (confidence < 0.95 for complex workouts)",
        "Enhanced prompt caching for agent workflows reducing token costs by 90% on repeated extractions",
      ],
      changed: [
        "Workout logging backend completely rebuilt with agentic AI architecture replacing monolithic extraction function for improved reliability and maintainability",
        "Exercise structure validation upgraded from simple property checks to hybrid approach using AI when structure is ambiguous or qualitative",
        "Workout normalization now intelligently skipped for high-confidence extractions (≥95%) and complex workouts, reducing processing time from 53s to <10s",
        "Validation decisions now treated as authoritative and final - agent cannot override blocking flags once set by validation tool",
        "Agent system prompt enhanced with explicit blocking rules and workflow scenarios preventing normalization or saving of blocked workouts",
        "Lambda timeout increased from 5 minutes to 7 minutes to accommodate complex workout processing with normalization",
        "Normalization prompt optimized from ~56KB to ~35-40KB by removing verbose formatting and consolidating instructions",
        "NEW badge now displays on workouts with future dates (scheduled/upcoming workouts) in addition to workouts completed within the last 24 hours",
        "ManageWorkouts page workout card badge logic updated to highlight both recent and future-dated workouts for better visibility of scheduled sessions",
        "TrainingGrounds recent workouts section badge logic updated to highlight both recent and future-dated workouts in workout list",
        "Backend infrastructure fully migrated from v1 to v2 agent-based Lambda functions with all environment variables, invoke permissions, and shared policies updated to reference v2 functions only",
        "Magic numbers in build-program-v2 handler extracted to named constants (DEFAULT_DURATION_FALLBACK_MS, WORKOUT_COUNT_MIN_THRESHOLD, DAY_COVERAGE_MIN_THRESHOLD, DAY_COVERAGE_FLOOR_PERCENT) for maintainability",
        "Program designer session creation now dynamically calculates totalItems and requiredQuestions from ProgramDesignerTodoList structure and REQUIRED_PROGRAM_FIELDS constant instead of hardcoded values",
        "Single-phase program generation now uses same storage pattern as multi-phase programs, ensuring phase_workouts:${phaseId} prefix is applied in both sequential and parallel execution paths",
      ],
      fixed: [
        "Critical bug where agent ignored shouldSave: false from validation tool and proceeded to normalize/save blocked workouts (planning questions, reflections)",
        "Running workouts and other qualitative disciplines incorrectly blocked due to exercise validation only checking powerlifting/CrossFit structures",
        "Gold-standard comprehensive workouts timing out at 5-minute Lambda limit due to forced normalization on already-perfect extractions",
        "Workout extraction confidence calculation too conservative causing unnecessary normalization on straightforward powerlifting workouts",
        "Performance metrics (intensity/RPE) not defaulting to 5/10 when unspecified despite explicit AI prompt instructions",
        "Scheduled/future workouts not receiving NEW badge visual indicator despite being highly relevant to users planning upcoming training sessions",
        "Quick stats total workout count on ManageWorkouts page not updating after workout deletion until page refresh",
        "Program generation duration calculation always returning 600 seconds (10 minutes) regardless of actual execution time due to hardcoded fallback being used instead of session startedAt timestamp",
        "Single-phase training programs showing empty workout results (totalWorkoutTemplates: 0, uniqueTrainingDays: 0) due to sequential execution path not storing phase_workouts with correct prefix for retrieval",
        "Program designer session turn count being double what it should be due to duplicate increment in stream handler (line 242) and flow handler (line 356)",
        "Hardcoded question counts in create-program-designer-session (totalItems: 19, requiredQuestions: 5) not matching actual ProgramDesignerTodoList structure (20 fields, 6 required fields)",
      ],
      removed: [
        "build-workout v1 Lambda function (handler.ts, resource.ts) - fully replaced by build-workout-v2 agent-based architecture",
        "build-program v1 Lambda function (handler.ts, resource.ts) - fully replaced by build-program-v2 agent-based architecture",
      ],
    },
  },
  {
    version: "Release v1.0.20251206-beta",
    date: "2025-12-06",
    changes: {
      added: [],
      changed: [
        "Training program generation Pinecone query now explicitly includes methodology documents with includeMethodology: true flag for comprehensive training methodology context",
        "Program generation topK increased from 5 to 8 results providing more comprehensive context including methodologies, workouts, coach creator sessions, and conversation summaries",
        "Program generation Pinecone query now includes minScore: 0.7 parameter for consistent relevance filtering across all context types",
        "Pinecone query comment in program-generator.ts clarified to 'Query Pinecone for relevant user context (including methodologies)' for better code documentation",
      ],
      fixed: [
        "Training program generation potentially missing relevant methodology documents due to low topK (5) and implicit reliance on default includeMethodology flag",
      ],
      removed: [],
    },
  },
  {
    version: "Release v1.0.20251205-beta",
    date: "2025-12-05",
    changes: {
      added: [
        "Rest day preferences feature for training program generation allowing users to specify days to avoid workouts (e.g., 'no workouts on Sunday')",
        "parseRestDayPreferences() helper function in phase-generator.ts converting day names to ISO day-of-week indices with support for 'weekends' and 'flexible' keywords",
        "validateRestDayCompliance() validation function checking generated workouts against rest day constraints with detailed violation reporting",
        "AI prompt integration for rest day constraints in phase workout generation with explicit scheduling instructions and example valid schedules",
        "Post-generation rest day validation logging warnings when AI generates workouts on restricted days for compliance monitoring",
        "Collapsible Timeline section in ProgramOverview component with expand/collapse animations matching Training Focus section design",
        "Collapsible phase cards in PhaseTimeline component with expand/collapse functionality for cleaner default view",
        "Collapsible Phase Strategy section in PhaseBreakdown component matching other collapsible section patterns",
      ],
      changed: [
        "ProgramOverview Dates section renamed to Timeline with cleaner text-based styling instead of badge pills",
        "Timeline dates now display in clean vertical list format using font-rajdhani text-sm matching phase metadata style",
        "Timeline date values (Created, Started, Completed) now show cyan color for actual dates and muted color for status text (Not Started, In Progress)",
        "Timeline layout changed to horizontal row format with Created and Started on first row, Completed on second row",
        "Timeline date columns set to 50% width each for balanced layout",
        "Expected completion date removed from Timeline section as unnecessary metadata",
        "Phase cards in PhaseTimeline now collapsed by default showing only name, duration, and status badges",
        "Phase descriptions and focus areas in PhaseTimeline now hidden until user expands individual phase cards",
        "Phase Strategy section in PhaseBreakdown now collapsed by default for cleaner initial view",
        "Rest day preferences from ProgramDesignerTodoList now actively used during phase workout generation instead of being collected but ignored",
      ],
      fixed: [],
      removed: [],
    },
  },
  {
    version: "Release v1.0.20251204-beta",
    date: "2025-12-04",
    changes: {
      added: [
        "Two-tier model selection for training program normalization using Claude Haiku 4.5 (high confidence ≥0.8) and Claude Sonnet 4.5 (low confidence <0.8) for cost-optimized validation",
        "S3 detail key preservation logic in build-program handler ensuring s3DetailKey survives normalization process and is correctly stored in DynamoDB",
        "Smart model routing for program designer conversations using Claude Haiku 4.5 for Q&A (3x cost savings) and Claude Sonnet 4.5 for completion messages (quality)",
        "Comprehensive logging throughout program generation flow tracking normalization model selection, S3 key preservation, and query methods",
        "In-memory coach filtering in get-programs handler supporting optional coachId filtering after GSI-based query",
        "Coach ownership verification in getProgram and updateProgram operations for multi-coach security",
        "Collapsible Training Focus sections in ProgramOverview and PhaseBreakdown components with expand/collapse animations",
        "AI prompt instructions for generating sentence-case, concise focus areas (2-4 words each) in phase generation",
        "Z-index layering for New Badge component ensuring it always appears above actions menu on program cards",
      ],
      changed: [
        "Program validation logic in normalization.ts updated to match actual Program interface (equipmentConstraints not equipmentRequired, no totalWeeks field)",
        "Workout template validation now recognizes assembled programs with s3DetailKey as valid, skipping phase.workoutTemplates check for S3-backed programs",
        "get-programs Lambda handler refactored to always use queryPrograms (GSI-based) instead of queryProgramsByCoach (composite PK)",
        "getProgram, updateProgram, and deleteProgram functions updated to use correct user-scoped partition key (user#userId) instead of composite key (user#userId#coach#coachId)",
        "Training Focus display changed from badge-style chips to bulleted list in styled subcontainer matching 'The Game Plan' section design",
        "Phase Focus display changed from badge-style chips to bulleted list in styled subcontainer for visual consistency",
        "Program designer question generation contextual update removed to eliminate repetitive 'Perfect! I've got everything I need' text duplication",
        "Duplicate question detection enhanced with explicit AI instructions to check conversation history before asking questions",
        "Program normalization refactored following workout normalization pattern with dual-schema approach (full schema in toolConfig, condensed in prompt)",
      ],
      fixed: [
        "Critical bug where training programs weren't returned by get-programs API due to partition key mismatch between save (user#userId) and query (user#userId#coach#coachId)",
        "Critical bug where s3DetailKey was lost during normalization causing 'Program details not found in S3' errors when accessing workout templates",
        "Critical bug where getProgram returned 404 errors due to using wrong partition key format for DynamoDB queries",
        "Validation errors showing 'Missing required root properties' and 'Phase missing workoutTemplates array' for valid assembled programs",
        "New Badge being partially covered by actions menu hover state due to incorrect z-index stacking",
        "Program designer timeline question being asked twice during conversation flow",
        "Noticeable delay before AI response streaming started after collecting all required information",
        "Training program normalization incorrectly checking for equipmentRequired instead of equipmentConstraints field",
        "Validation logic failing for programs with workouts stored in S3 instead of embedded in phase objects",
      ],
      removed: [
        "Hardcoded contextual update 'Perfect! I've got everything I need. Let me put together your program summary...' from question generator",
        "Conditional thinking optimization for Phase 2 & 3 (removed due to parallel execution architecture not supporting sequential learning)",
        "queryProgramsByCoach function deprecated with warnings (replaced with queryPrograms GSI-based approach)",
      ],
    },
  },
  {
    version: "Release v1.0.20251129-beta",
    date: "2025-11-29",
    changes: {
      added: [
        "Automated email notification system for inactive users using Amazon EventBridge and SES",
        "EventBridge scheduled rule triggering inactive user check every 14 days with Lambda execution",
        "notify-inactive-users Lambda function with batch processing (50 users/batch) for scalable user engagement",
        "Comprehensive email notification preferences system with 5 notification types (coachCheckIns, weeklyReports, monthlyReports, programUpdates, featureAnnouncements)",
        "Frontend Settings page UI for managing email notification preferences with toggle switches",
        "Public unsubscribe endpoint (/unsubscribe) with no authentication required for legal compliance and UX",
        "unsubscribe-email Lambda function handling opt-out requests with branded HTML responses",
        "Email tracking system with preferences.lastSent timestamps for each notification type preventing spam",
        "Centralized email utilities (sendEmail, buildEmailFooterHtml, buildEmailFooterText) in libs/email-utils.ts for consistent email composition",
        "Centralized HTML response utilities (createHtmlResponse, createErrorHtmlResponse, createNotFoundHtmlResponse) in libs/html-utils.ts for branded web pages",
        "Centralized domain utilities (getAppUrl, getApiUrl, getAppDomain, getApiDomain) in libs/domain-utils.ts for branch-aware URL generation",
        "Branch-aware URL system dynamically generating correct URLs based on BRANCH_NAME environment variable (sandbox, dev, prod)",
        "Settings link in email footer with userId parameter for direct navigation to user preferences",
        "Unsubscribe page with empathetic coach-like tone and brand-aligned styling matching beta update emails",
        "28-day minimum between coach check-in reminders (once per month max) to respect user inbox",
        "14-day inactivity detection period before sending first reminder email",
        "withHeartbeat wrapper integration in notify-inactive-users handler for progress logging in CloudWatch",
        "Batch processing with pagination support in notify-inactive-users using queryAllUsers with lastEvaluatedKey",
        "Comprehensive statistics tracking (totalUsers, activeUsers, inactiveUsers, emailsSent, emailsSkipped) in notification runs",
        "Email notification metadata structure tracking last sent timestamps per notification type",
      ],
      changed: [
        "User profile preferences structure redesigned: emailNotificationMetadata moved to preferences.lastSent with matching property names",
        "User profile preferences.lastSent now uses same keys as emailNotifications (coachCheckIns, weeklyReports, etc.) for symmetry",
        "Coach check-in email content written with empathetic, understanding coach tone aligned with NeonPanda brand strategy",
        "Email HTML styling aligned with public/updates/beta-update-nov-27-2025.html using Inter font, neon colors, and logo header",
        "Email footer simplified to concise tagline + Visit NeonPanda + Update Preferences + Unsubscribe links",
        "Text email footer horizontal line (---) removed to prevent Gmail auto-collapse signature detection",
        "Signature line integrated naturally into final paragraph to bypass Gmail signature detection heuristics",
        "Email text color standardized to #333 (matching beta updates) for consistent readability",
        "Email font size standardized to 16px for body text and paragraphs for optimal readability",
        "Email subject line format: 'NeonPanda - {firstName}, we miss you!' with personalized first name",
        "Email H1 color changed to neon pink (#ff6ec7) for brand consistency",
        "Feature box styling changed to pink background (#fff5f8) with pink left border (#FF10F0) matching beta update callouts",
        "notify-inactive-users refactored to use centralized DynamoDB operations (queryAllUsers, queryWorkoutsCount, updateUserProfile)",
        "Settings page email notifications section styled consistently with timezone section header design",
        "Settings page checkbox descriptions enhanced with clear explanations for each notification type",
        "update-user-profile handler validation updated to accept new email notification preference keys",
        "Email reminder cadence optimized: EventBridge runs every 14 days, but users max 1 email per 28 days",
        "Unsubscribe page messaging made more empathetic and coach-like with understanding tone about inbox management",
        "Email footer 'Update Preferences' link now includes userId query parameter for direct settings access",
        "SES email sending centralized to email-utils.ts sendEmail() function for DRY code and consistent error handling",
        "All email HTML templates now use buildEmailFooterHtml() for consistent footer structure across notification types",
      ],
      fixed: [
        "Gmail auto-collapsing email content after signature line by removing signature detection patterns",
        "EventBridge schedule syntax error (missing Duration import) causing deployment failure",
        "Text color inconsistency in emails with some paragraphs gray (#666) and others black (#333)",
        "Email footer styling misalignment with beta update footer structure and content",
        "Incorrect app URL (https://app.neonpanda.ai) corrected to https://neonpanda.ai throughout codebase",
        "Static hardcoded URLs replaced with dynamic branch-aware URLs using domain-utils.ts functions",
        "HTML signature block triggering Gmail collapse by integrating team name into final paragraph",
        "Email notification metadata stored at wrong path (emailNotificationMetadata vs preferences.lastSent)",
        "Missing BRANCH_NAME environment variable handling in Lambda functions for URL generation",
        "Unsubscribe page styling inconsistent with email styling and beta update page design",
        "Paragraph font sizes inconsistent on unsubscribe page (some 16px, some 14px) causing poor UX",
        "Email text body 'Visit NeonPanda' link displaying before footer separator causing layout issues",
        "Missing SES send email permissions on notify-inactive-users Lambda causing send failures",
        "Missing DynamoDB read/write permissions on unsubscribe-email Lambda for profile updates",
      ],
      removed: [
        "inactivityReminders preference key (replaced with more general coachCheckIns key)",
        "Legacy emailNotificationMetadata property from user profile (consolidated to preferences.lastSent)",
        "Horizontal line separator (---) from text email footer to prevent Gmail signature collapse",
      ],
    },
  },
  {
    version: "Release v1.0.20251128-beta",
    date: "2025-11-28",
    changes: {
      added: [
        "Flexible completion check (hasSubstantialProgress) allowing workout session completion with 5/6 required fields (83%+) OR 4/6 required + all high-priority fields",
        "Three-tier completion messaging system (all required, substantial progress, minimal progress) for contextual user feedback during workout logging",
        "Enhanced userWantsToFinish detection in extraction prompts sensitive to acknowledgments ('thanks', 'okay', 'sounds good') when substantial progress collected",
        "Metadata SSE event sent early in streaming pipeline to enable workout_log badge display during AI response streaming, not just after completion",
        "Full conversation history support in workout creator question generation ensuring AI sees all previous Q&A exchanges to prevent repetition",
        "Graceful handling in Bedrock API when model returns text instead of using tool (acknowledgments like 'Thanks') with automatic JSON parsing fallback",
      ],
      changed: [
        "Workout creator session completion logic refactored to respect userWantsToFinish regardless of required field completion percentage for better UX",
        "Question generation conversation context expanded from last 4 messages to full session history matching extraction function context availability",
        "Extraction prompts enhanced with context-aware userWantsToFinish detection based on collected data progress (5/6 or 4/6+high-priority triggers higher sensitivity)",
        "Question generator prompts strengthened with critical rule preventing AI from saying 'logged' or 'complete' phrases during data collection phase",
        "Mode determination logic updated to check for active workoutCreatorSession.isComplete state instead of scanning previous message metadata",
        "Bedrock API functions (callBedrockApi, callBedrockApiMultimodal) enhanced to check stopReason before extracting tool use, parsing text as JSON fallback",
        "Auto-scroll behavior optimized during streaming: instant scroll (no animation) while streaming active, smooth scroll when complete for performance",
        "Auto-scroll triggers moved to immediate execution during streaming with requestAnimationFrame for reliable DOM update synchronization",
        "Message scrolling effects split into separate concerns: new message detection vs streaming update detection for more reliable scroll behavior",
        "CoachConversation type interface simplified to use WorkoutCreatorSession type reference instead of inline object definition",
      ],
      fixed: [
        "Critical bug where AI repeated questions about information already provided due to question generator only seeing last 2 exchanges (4 messages) instead of full conversation",
        "Workout not logging when AI said 'You're all logged!' because userWantsToFinish required both flag AND atRecommendedPhase conditions",
        "Mode stuck in workout_log after session completion due to checking most recent assistant message mode instead of active session state",
        "Bedrock API errors when model correctly returns text for acknowledgments ('Thanks') instead of tool use, causing 'Model did not use tool' exceptions",
        "Auto-scroll not working after message submission requiring manual scrolling every time due to missing cleanup function in streaming effect",
        "AI streaming content briefly going behind ChatInput container during long responses due to smooth scroll animation lag with rapid content updates",
        "TypeScript error in stream-coach-conversation handler (line 800) with 'Object is possibly undefined' when accessing messages[i].metadata.mode",
        "TypeScript errors in api-helpers.ts due to missing parseJsonWithFallbacks import and incorrect nullish coalescing operator usage",
        "Metadata event not being sent for natural language workout sessions because handler returned early when workoutCreatorSession initiated/continued",
      ],
      removed: [],
    },
  },
  {
    version: "Release v1.0.20251127-beta",
    date: "2025-11-27",
    changes: {
      added: [
        "Multi-turn conversational workout logging with AI-activated session flow - log workouts through natural back-and-forth conversation instead of one massive message",
        "Intelligent AI-powered intent detection automatically activating Workout Log mode when users want to log a workout conversationally",
        "Auto-cancel on topic change detection - AI recognizes when user changes subject and gracefully exits workout logging session",
        "In-session editing and correction capability - users can fix or update workout information during multi-turn conversation flow",
        "Smart question batching allowing AI to ask up to 2 related questions at a time (sets + reps, date + duration) for 40% faster data collection",
        "Workout Creator badge displayed above AI messages during multi-turn sessions using cyan theme and 'Workout Creator' text",
        "Two-tier normalization system using Claude Haiku 4 for high-confidence extractions (≥80%, ~8-10s) and Claude Sonnet 4 for low-confidence (<80%, ~44s) with automatic escalation fallback",
        "Universal getCondensedSchema utility for reducing prompt sizes by 70-80% by stripping verbose schema fields (descriptions, patterns, examples, defaults)",
        "Topic change detection field (userChangedTopic) in workout extraction schema triggering session cancellation when user shifts conversation away from logging",
        "Workout logging progress tracking with turn count, field completion percentage, and required vs optional field indicators",
        "Auto-completion trigger after 7 turns with partial data if user hasn't finished providing required fields",
      ],
      changed: [
        "Workout logging experience transformed from single-message extraction to intelligent multi-turn conversation flow with context retention across messages",
        "Workout extraction now supports both traditional slash command (/log-workout with full details) and new conversational multi-turn approach",
        "Conversation modes renamed to artifact-focused naming: 'chat' → CHAT, 'build' → PROGRAM_DESIGN, 'workout-creator' → WORKOUT_LOG",
        "Mode tracking moved from workoutCreatorSession state to conversation.mode property for consistent mode management across all artifact types",
        "Workout Creator question generation updated to ask 1-2 related questions per turn instead of single questions for faster completion",
        "Maximum turn count increased from 6 to 7 in workout logging sessions to allow users extra turn for required field completion",
        "Mode toggle highlighting logic updated to highlight 'Chat' button when mode is CHAT or WORKOUT_LOG, 'Program' button only for PROGRAM_DESIGN",
        "Message metadata now includes mode property (CHAT, PROGRAM_DESIGN, WORKOUT_LOG) for persistent visual indicators on historical messages",
        "Workout normalization prompt optimized with condensed schema reducing prompt size from ~63KB to ~15KB for 3-4x speed improvement",
        "All schema usages across backend (workout, program, phase generation) now use getCondensedSchema for consistent prompt size optimization",
        "Haiku 4 max tokens increased to match Sonnet 4 (8192 tokens) for complex normalization tasks",
        "Model selection for normalization now based on extraction confidence using MODEL_IDS constants instead of hardcoded model strings",
        "DynamoDB serialization warnings now only log when more than 3 undefined keys detected, reducing noise from optional fields like 'notes'",
        "Workout creator prompts enhanced with efficiency guidance for asking related questions together in natural sequences",
        "Turn count warning threshold adjusted from turn 4/6 to turn 5/7 to match new maximum turn limit",
      ],
      fixed: [
        "Workout Creator badge not appearing during streaming AI responses due to missing mode metadata in chunk events",
        "Mode toggle buttons in ChatInput not highlighting correctly when conversation mode was WORKOUT_LOG",
        "Workout normalization taking 50+ seconds due to oversized prompts including entire verbose schema definitions",
        "TypeScript errors in handler files related to workoutCreatorSession type definitions and mode property assignments",
        "conversationSize property missing from CoachConversationAgent initial state causing TypeScript errors",
        "Streaming mode updates not applying correctly due to spread operator precedence issues in state merging logic",
        "DynamoDB logs flooded with undefined value warnings for every optional field (notes, equipment, etc.) creating noise in CloudWatch",
        "Nested conditional checks in workout session completion logic causing code complexity and readability issues",
        "Mode property defaulting to undefined instead of CHAT when loading existing conversations without explicit mode set",
      ],
      removed: [
        "workoutCreatorSession handling from frontend CoachConversationAgent state management (replaced with conversation.mode tracking)",
        "workoutCreatorSession property from formatCompleteEvent streaming responses (no longer needed on frontend)",
        "Hardcoded model IDs in normalization functions (replaced with MODEL_IDS constants from api-helpers)",
      ],
    },
  },
  {
    version: "Release v1.0.20251122-beta",
    date: "2025-11-22",
    changes: {
      added: [
        "Agentic AI architecture with orchestrator/synthesizer patterns for coach creator and workout extraction flows",
        "Evaluator/optimizer patterns in AI processing for improved data quality and validation accuracy",
        "Tool-based generation using Bedrock tool-use capabilities laying foundation for future MCP server integrations (SugarWOD, Push Press, Apple Health)",
        "Parallel data processing in coach creator and workout flows achieving 2-3x speed improvements for multi-step operations",
        "Multimodal workout logging with full image support - attach whiteboard photos, workout logs, training notes and AI extracts structured performance data",
        "Coach creator question flow redesign based on real user observation - more intuitive, more natural, eliminates repetition, significantly more personal",
        "Agentic memory architecture replacing goldfish memory - coach creator now tracks and remembers everything volunteered across entire conversation",
        "Smart context retention preventing redundant questions when users volunteer information in early responses",
        "Enhanced semantic storage and retrieval during coach creation process for richer context integration",
        "Image processing in build-workout Lambda using callBedrockApiMultimodal for combined text + image content analysis",
        "Schema provisioning in normalization prompts - AI now receives complete schemas as reference documents for validation",
        "Smart defaulting logic in workout and coach config normalization to infer missing fields when AI omits them from tool responses",
        "session_duration field to workout schema tracking total gym time (warm-up + workout + cool-down) separate from pure workout duration",
        "Multi-phase workout duration interpretation with AI guidance for summing component durations (strength + conditioning sessions)",
        "AMRAP duration rules explicitly enforcing duration must equal time_cap for timed AMRAPs",
        "Resilient error handling across both coach creator and workout flows based on production usage patterns",
        "Image S3 key support throughout workout logging pipeline from ChatInput through stream-coach-conversation to build-workout Lambda",
        "buildMultimodalContent helper for loading image bytes from S3 and formatting for Claude multimodal API",
        "Data completeness improvement tip box on WorkoutViewer showing missing fields with natural language examples when completeness < 80%",
        "Conversation title skeleton loading structure matching actual UI layout",
        "Immediate visual feedback for image uploads via instant spinner activation",
      ],
      changed: [
        "Lambda runtime upgraded to Node.js 22 across all cloud functions via centralized NODEJS_RUNTIME constant in libs/configs.ts for consistent runtime management",
        "Coach creator question flow completely redesigned from ground up based on end-user behavior analysis",
        "Coach creator now detects and remembers information volunteered early in conversation, skipping related questions later",
        "Coach creator personality and intelligence significantly enhanced with better context awareness and memory integration",
        "Workout extraction redesigned with orchestrator pattern separating detection, extraction, normalization, and storage concerns",
        "Both coach creator and workout flows now use advanced LLM tool-use APIs instead of text-based JSON parsing",
        "Universal Workout Schema and Coach Config Schema converted from string templates to JSON Schema format for tool-use compatibility",
        "Workout extraction and coach config generation now use Bedrock tools parameter with inputSchema for structured generation",
        "Parallel processing implemented in both flows: router + data loading + config fetching execute concurrently instead of sequentially",
        "build-workout and build-coach-config handlers refactored to orchestrator pattern with clear separation of extraction, validation, storage",
        "Workout normalization tool response handling enhanced with smart defaulting and schema provisioning",
        "buildNormalizationPrompt enhanced with explicit field logic, complete JSON examples, and reference schema inclusion",
        "duration and time_cap field descriptions corrected from 'minutes' to 'seconds' across all workout schemas",
        "Frontend workout duration calculations standardized on seconds storage with /60 conversion for display",
        "detectAndProcessWorkout and workout validation functions extended to handle image-based logging",
        "stream-coach-conversation handler updated to extract and route image data through workout detection pipeline",
        "build-workout handler implements conditional multimodal logic based on image presence with fallback support",
        "Coach creator prompts refined to emphasize natural conversation flow and eliminate robotic question sequences",
        "Both flows now implement resilient retry logic, graceful degradation, and comprehensive error recovery",
        "Data validation logic across both flows strengthened based on production failure patterns",
        "Breadcrumb navigation detection updated for query parameter-based routing",
        "UI components refined with better spacing, loading states, and visual feedback",
      ],
      fixed: [
        "Coach creator asking redundant questions about information users already volunteered in previous responses",
        "Coach creator repeating questions or losing context during multi-turn conversation flows",
        "Workout extraction failing to process complex multi-phase workouts (strength + conditioning combinations)",
        "Critical workout duration display bug showing '1 minute' instead of '30 minutes' due to unit confusion",
        "Duration vs session_duration ambiguity - workouts now properly distinguish work time from total gym time",
        "Normalization isValid bug where AI successfully validated data but reported failure (0 issues but isValid: false)",
        "AI tool responses omitting required fields despite schema marking them as required",
        "Missing schema provisioning in normalization prompts causing validation against invisible standards",
        "Image-based workout logging completely non-functional - build-workout Lambda not calling multimodal API",
        "Bedrock multimodal API not being invoked despite images being detected and passed through pipeline",
        "Sequential processing bottlenecks causing 15+ second delays in coach creator and workout flows",
        "Error recovery gaps in both flows where single failures cascaded into complete request failures",
        "TypeScript scope errors in build-workout handler with variable accessibility in error handling blocks",
        "Breadcrumb navigation showing incorrect paths for query parameter-based routes",
        "InlineEditField label wrapping issues in conversation title editing",
        "Image upload spinner showing delay before activation creating perception of unresponsiveness",
        "Data completeness UI styling issues with excessive padding and bold text",
        "RPE gradient scales showing faint color when empty instead of completely transparent",
      ],
      removed: [
        "[Debug] Reconstruct JSON section from WorkoutDetails page (production debug artifacts cleaned up)",
      ],
    },
  },
  {
    version: "Release v1.0.20251112-beta",
    date: "2025-11-12",
    changes: {
      added: [],
      changed: [
        "Coaches.jsx skeleton loading header title width increased from w-40 to w-48 for better visual balance matching 'Your Coaches' title",
        "Coaches.jsx skeleton loading in-progress coaches header height reduced from h-10 to h-7 for title and h-6 to h-5 for description to match actual header sizes",
        "Coaches.jsx skeleton loading templates section header height reduced from h-8 to h-7 for title and h-6/h-4 to h-5/h-5 for description lines to match actual header sizes",
        "Coaches.jsx skeleton loading in-progress coaches description changed from single row (w-96) to two rows (w-full max-w-2xl, w-full max-w-xl) matching multi-line actual description",
        "Coaches.jsx skeleton loading templates section description rows widened from w-96/w-80 to w-full max-w-2xl/w-full max-w-xl matching actual max-w-2xl constraint",
        "CoachCreator.jsx skeleton loading header refactored to remove extra centered description bones (two horizontal skeleton lines below header)",
        "CoachConversations.jsx conversation title moved vertically closer to page header using -mt-4 negative margin for tighter, more compact layout",
      ],
      fixed: [
        "Coaches.jsx skeleton loading structure showing oversized headers for in-progress coaches and templates sections (h-10/h-8 vs actual text-xl md:text-2xl)",
        "Coaches.jsx skeleton loading showing single-line descriptions when actual descriptions span multiple lines with max-w-2xl constraint",
        "CoachCreator.jsx skeleton loading showing extra horizontal centered description bones below header that don't exist in actual page layout",
      ],
      removed: [],
    },
  },
  {
    version: "Release v1.0.20251109-beta",
    date: "2025-11-09",
    changes: {
      added: [
        "Complete Training Program Dashboard with comprehensive program overview, calendar view, phase timeline, and progress tracking",
        "ProgramDashboard.jsx main container component with dedicated route at /training-grounds/programs/:programId/dashboard",
        "ProgramCalendar.jsx week-by-week grid layout showing all program days with visual status indicators",
        "CalendarDayCell.jsx clickable day cells with color-coded status (done: pink, skipped: cyan, pending: muted gray, rest: dark)",
        "ProgramOverview.jsx section displaying program metadata (name, description, status, coach, type, focus areas, stats)",
        "ProgressOverview.jsx section showing adherence rate, completed/skipped workouts, current phase, and progress metrics",
        "PhaseTimeline.jsx visual progress bar with phase segments, current day indicator, and phase breakdown cards",
        "Training program calendar legend showing status indicators (Done, Partial, Skipped, Pending, Rest) with color-coded dots",
        "Week-by-week calendar navigation with 'Current' and 'All Weeks' filter buttons for focused vs full program view",
        "Current day highlighting in calendar with 'Day X' badge below the timeline progress bar",
        "Clickable day cells navigating to specific day workouts at /training-grounds/programs/workouts?day=X",
        "Calendar day cells showing workout count badges (1, 2, 3+ workouts per day) styled like sidebar count badges",
        "Phase Timeline with proportional visual segments (50% phase 1, 25% phase 2, 25% phase 3) matching actual program structure",
        "Phase breakdown cards with phase name, duration, description, current/completed badges, and focus area tags",
        "Program Intel subcontainer in Program Overview showing status and coach metadata in 2-column layout",
        "Program Stats subcontainer showing total days, workouts/week, created date, and start date in 2-column metadata layout",
        "Program Focus tags displayed as badges (strength, conditioning, mobility, etc.) using consistent badge styling",
        "Metadata display pattern with label (secondary gray) and value (neon cyan) for consistent information presentation",
        "Subcontainer pattern (bg-synthwave-bg-card/30, border-synthwave-neon-cyan/20) for grouped information sections",
        "Three-dot 'More Actions' menu on ManagePrograms program cards with Rename and Delete options",
        "Three-dot 'More Actions' menu on Coaches page coach cards with Rename Coach and Delete Coach options",
        "Inline edit functionality triggered from More Actions menu for renaming programs and coaches",
        "startInEditMode prop for InlineEditField component allowing immediate edit mode without hover interaction",
        "Escape key handler for canceling inline edit across ManagePrograms and Coaches pages",
        "Click-outside detection for closing More Actions dropdown menus with mousedown event listeners",
        "Focus outline removal (focus:outline-none, active:outline-none) on three-dot menu buttons preventing white border flash",
        "Tap highlight prevention (WebKitTapHighlightColor: transparent) on three-dot menu buttons for mobile polish",
        "Active state styling for three-dot menu button (text-synthwave-neon-cyan, bg-synthwave-bg-primary/50) when menu open",
        "Menu item hover effects matching SidebarNav styling (hover:text-synthwave-neon-pink, hover:bg-synthwave-neon-pink/10)",
        "Conditional menu hiding when inline edit is active to prevent visual overlap with cancel button",
        "Delete confirmation modals with backdrop click closing (only when not actively deleting)",
        "Escape key handler priority system: inline edit cancel > close delete modal",
        "Shadow styling on dropdown menus (shadow-[4px_4px_16px_rgba(0,255,255,0.06)]) for depth perception",
        "EditIcon SVG component for consistent rename action icon across management pages",
        "EllipsisVerticalIcon SVG component for three-dot menu button across management pages",
        "Pause/Resume/Complete program actions integrated into ManagePrograms cards",
        "Loading states with spinners for pause/resume/complete actions showing specific action in progress",
        "Disabled state management preventing multiple simultaneous program actions (pause + complete simultaneously)",
        "Program status tracking with real-time updates (active → paused, paused → active, active → completed)",
        "Status badge styling in Program Overview (active: green, paused: purple, completed: cyan) with border and padding",
        "Status badge positioning in top-right of Program Intel subcontainer matching phase timeline badge layout",
        "Today's Workout section on Training Program Dashboard showing current day workouts with full ViewWorkouts integration",
        "Program context display showing phase name, current day, and scheduled workouts for user orientation",
        "Navigation flow from Training Grounds → Manage Programs → Program Dashboard → Day Workouts with seamless routing",
        "Query parameter handling for day selection (?day=X) vs today (?day=undefined) in workout navigation",
        "Current day detection removing ?day parameter when clicking current day in calendar for 'Today's Workout' context",
        "Breadcrumb navigation on Program Dashboard: Home > Training Grounds > Training Programs > Program Dashboard",
        "Breadcrumb navigation on View Workouts: Home > Training Grounds > Training Programs > Workout Details",
        "Responsive calendar layout adapting to mobile, tablet, and desktop screen sizes",
        "Coach compact card integration on Program Dashboard header matching Training Grounds header design",
      ],
      changed: [
        "ManagePrograms program cards refactored to use three-dot menu instead of direct delete button for cleaner action organization",
        "Coaches page coach cards refactored to use three-dot menu instead of direct delete button for consistent UX across pages",
        "InlineEditField component enhanced to support startInEditMode prop, immediately entering edit mode when triggered from menu",
        "InlineEditField hover-based edit icon completely removed from display mode, requiring explicit 'Rename' action from menu",
        "Program name editing now controlled by editingProgramId state instead of hover-based InlineEditField detection",
        "Coach name editing now controlled by editingCoachId state instead of hover-based InlineEditField detection",
        "Delete confirmation flow updated to prevent Escape key closing modal while deletion is in progress",
        "Three-dot menu positioning changed to absolute positioning in top-right corner of program/coach cards",
        "Menu dropdown width standardized to w-44 (176px) with pl-4 pr-3 padding for balanced spacing",
        "Menu item icons sized to w-4 h-4 for consistency with text (font-rajdhani font-medium text-sm)",
        "Program Dashboard route changed from /training-grounds/programs/:programId to /training-grounds/programs/dashboard?programId=X",
        "View Workouts route structure unified: /training-grounds/programs/workouts?programId=X&day=Y",
        "Training program status badge repositioned from header area to Program Overview Intel subcontainer",
        "Program metadata layout changed from simple list to organized subcontainers (Intel, Stats, Description, Focus)",
        "Progress metrics layout changed from simple list to 2-column metadata grid with subcontainer wrapper",
        "Phase timeline visual changed from simple list to proportional progress bar with gradient segments and phase cards below",
        "Calendar day cell status colors updated: done (neon pink), skipped (cyan/40), pending (muted/30), rest (bg-primary/30)",
        "Calendar day cell styling matches weekly heat map design with consistent border-radius and hover effects",
        "Workout count badges in calendar cells styled like sidebar navigation count badges (bg-synthwave-bg-primary/50, border-synthwave-neon-cyan/30)",
        "Phase names displayed above timeline segments using secondary text color (text-synthwave-text-secondary)",
        "Phase duration text displayed as 'Duration: X days' instead of 'X days' with neon cyan value color",
        "Phase focus areas displayed as badges below phase description in phase cards",
        "Current phase badge styling changed to match logged/skipped badges (bg-color/20, text-color, border) with positioning in top-right",
        "Pause button styling now shows spinner with specific action text 'Pausing...' vs 'Pause'",
        "Complete button styling now shows spinner with specific action text 'Completing...' vs 'Complete'",
        "Resume button styling now shows spinner with specific action text 'Resuming...' vs 'Resume Program'",
        "Program Dashboard main container width matches Training Grounds (max-w-7xl mx-auto px-8 py-8)",
        "Program Dashboard header layout matches Training Grounds compact horizontal header design",
        "Adherence rate now displays with neon cyan color matching other key metrics throughout dashboard",
        "Last activity timestamp now displays with neon cyan color for consistency across program cards",
        "Progress percentage now displays with neon cyan color matching metadata value pattern",
        "Section headers on Program Dashboard use branding-aligned text: 'Program Intel', 'The Mission', 'Your Progress', 'Phase Breakdown', 'Program Calendar'",
        "Program description label changed from 'Description' to 'The Mission' for brand alignment",
        "Program stats label changed from 'Statistics' to 'Program Vitals' for brand voice",
        "Phase Timeline header changed from 'Current Phase' to 'Phase Breakdown' for clarity",
        "Calendar section header changed from 'Training Calendar' to 'Program Calendar' for consistency",
        "Escape key handler logic refactored to prioritize inline edit cancellation before modal closing",
        "useEffect dependencies updated to properly track editingProgramId, editingCoachId, showDeleteModal states",
        "Menu open state management now uses openMenuId (programId or coachId) instead of boolean flag",
        "Loading state tracking now includes both programId and action type ({ programId, action: 'pause' | 'resume' | 'complete' })",
        "Status badge top spacing in Program Overview adjusted from pt-3 to pt-2 matching phase timeline badge alignment",
        "Bottom padding reduced on phase name section (mb-3 → mb-2) to tighten spacing between timeline and phase cards",
        "Timeline shadow styling now uses same depth as subcontainers (shadow-lg shadow-synthwave-neon-cyan/20)",
        "Program focus badges moved to bottom of Program Overview instead of inline with description",
        "Coach metadata display changed from badge to label-value pair matching other metadata",
        "Status metadata display changed from badge to conditional badge-style display (green/purple/cyan)",
        "View Workouts page breadcrumb text simplified to 'Workout Details' instead of dynamic 'Today's Workouts' vs 'View Workouts'",
        "uiPatterns.js extended with sectionHeader pattern for consistent dashboard section headers",
        "uiPatterns.js extended with metadataLabel and metadataValue patterns for consistent information display",
        "uiPatterns.js extended with subcontainerBackground pattern for grouped content sections",
      ],
      fixed: [
        "Critical bug where three-dot menu button showed default white focus ring on click despite focus:outline-none class",
        "Three-dot menu button briefly flashing white border on active state before applying custom styling",
        "Three-dot menu losing active background color when menu is open due to conditional class not applied",
        "Delete icon overlapping with inline edit cancel button when renaming program due to menu not hidden during edit",
        "Escape key not canceling inline edit when user clicks outside card and then presses Escape",
        "Inline edit field not immediately entering edit mode when clicking 'Rename' menu item",
        "Hover edit icon appearing on program/coach names even when three-dot menu provided explicit rename action",
        "Delete modal closing on any Escape key press even while deletion was in progress",
        "Multiple useEffect cleanup issues causing menu not to close properly on outside clicks",
        "Menu dropdown positioning causing clipping at card edges due to overflow-hidden on parent",
        "Both pause and complete buttons showing spinner simultaneously when only one action triggered",
        "Program dashboard not loading due to incorrect route structure with :programId path parameter",
        "Calendar day cells not showing workout counts due to missing template aggregation logic",
        "Phase timeline segments not proportional to actual phase duration (all showing equal width)",
        "Phase timeline start segment missing rounded corners on left edge",
        "Current day indicator (Day X) showing incorrect vertical alignment on timeline",
        "Calendar legend dots not matching same size as dots in day cells",
        "Status badge in Program Overview having inconsistent spacing compared to phase timeline badges",
        "Program Intel subcontainer metadata not left-aligning properly in 2-column grid",
        "Current phase label not wrapping correctly when phase name is long",
        "Phase focus badge styling not matching prescribed exercise badge styling",
        "Today's Workout section on dashboard not integrating full ViewWorkouts component properly",
        "Navigation from Training Grounds 'View Workouts' button going to wrong route",
        "Query parameter handling causing 'day=undefined' to appear in URL instead of clean /today route",
        "Breadcrumb navigation showing incorrect text when navigating from calendar day cell",
        "Calendar weeks starting at Week 0 instead of Week 1 due to 0-based indexing",
        "Escape key handler executing multiple times due to duplicate event listener registrations",
        "Three-dot menu not closing when clicking another program card's menu button",
        "Status badge color not updating in real-time when pause/resume/complete actions triggered",
        "Loading state not clearing properly after action completion causing stuck spinner",
        "Program Dashboard header not matching Training Grounds header layout (fonts, spacing, coach card)",
        "Calendar day cell hover effects not consistent with weekly heat map styling",
        "Phase timeline progress indicator line not properly animating/pulsing on current day marker",
      ],
      removed: [
        "Direct delete button from ManagePrograms program cards (replaced with three-dot menu)",
        "Direct delete button from Coaches page coach cards (replaced with three-dot menu)",
        "Hover-based edit icon from InlineEditField component in display mode",
        "Status badge from Program Dashboard page header (moved to Program Overview section)",
        "Horizontal dividers (hr elements) from Program Overview and Progress Overview sections",
        "ProgramCalendar.jsx duplicate component (consolidated to ProgramCalendar.jsx)",
        "ProgramActionsMenu.jsx component (actions moved to ManagePrograms cards)",
      ],
    },
  },
  {
    version: "Release v1.0.20251104-beta",
    date: "2025-11-04",
    changes: {
      added: [
        "Day completion celebration animations with 4 visual styles (Neon Burst, Laser Grid, Lightning Bolts, Starfield Warp) triggering when all workouts for a day are completed",
        "Laser Grid animation as default celebration with animated grid lines, glowing intersections, and flash effects",
        "Separate celebrations.css file for organized animation keyframes (neonBurst, scanLines, laserBeamH, laserBeamV, gridFlash, lightning, electricGlow, warpStar, warpTunnel)",
        "Comprehensive workout template status system with visual indicators: '✓ Logged' badge (cyan), 'Skipped ✕' badge (cyan), and 'Day Complete 🎉' badge (pink)",
        "Continuous polling system for linkedWorkoutId after workout logging with 3-second intervals, 60-poll maximum, and automatic cleanup",
        "Skip workout functionality with full API integration, visual feedback (spinner, badge, dimmed card), and optional skip reason/notes",
        "Unskip workout functionality allowing users to revert skipped workouts back to pending status with single button click",
        "Skipped workouts tracking in training programs with skippedWorkouts field incremented/decremented on skip/unskip actions",
        "Combined workout statistics display on ManagePrograms cards showing completed, skipped, and total workouts on single line with icons (✓ X / ✕ Y of Z workouts)",
        "SkipAction const enum (SKIP, UNSKIP) in skip-workout-template handler for type-safe action handling",
        "View Workout button for completed templates linking directly to logged workout details page with all captured user edits",
        "Processing Workout spinner state with animated loading indicator on Log Workout button during backend processing",
        "Empty state messaging for rest days on specific day view (No workouts scheduled for day X)",
        "Toast notification system for workout actions (success: logging initiated, template skipped, template unskipped; errors: API failures)",
        "Specific day view functionality allowing navigation to any program day via /training-grounds/programs/{programId}/day/{dayNumber} route",
        "Backend Lambda support for ?day=X query parameter in get-workout-templates handler (lines 81-111)",
        "API Gateway route for specific day template retrieval at /users/{userId}/coaches/{coachId}/programs/{programId}/templates?day={dayNumber}",
        "ProgramAgent.loadWorkoutTemplates() { day } option for loading specific day's workout templates",
        "Dynamic breadcrumb text based on route ('Today's Workouts' for /today vs 'View Workouts' for /day/X)",
        "Map-based polling interval management in ProgramAgent with automatic cleanup on component unmount",
        "Exponential backoff retry logic in sync-log-subscriptions handler to prevent CloudWatch API throttling",
        "250ms delays between CloudWatch API calls to stay below 5 requests/second rate limit",
        "Celebration animation state management (showCelebration, celebrationType) in ViewWorkouts component",
      ],
      changed: [
        "ViewWorkouts page refactored to centralize workout actions (log, skip, unskip) in ProgramAgent instead of component-level logic",
        "Workout template cards now display comprehensive status-based UI: pending shows Log/Skip buttons, completed shows View Workout button, skipped shows Unskip Workout button",
        "Workout description textarea now disabled (read-only) for completed and skipped templates preventing accidental edits",
        "Helper text below workout description dynamically updates based on template status: '✓ Workout logged - This is the workout as it was logged...' for completed templates",
        "Workout title text color changes to muted gray (text-synthwave-text-muted) for completed and skipped templates for visual hierarchy",
        "Difficulty badges hidden on completed and skipped workout cards to reduce visual clutter",
        "Day Complete badge repositioned from workout stats line to right of training program name for better visibility",
        "Program context section spacing tightened on ViewWorkouts (mb-8 → mb-4, program name mb-2 → mb-1, metadata py-1 → pb-1)",
        "Program context section displays phase name, current day, and total workouts scheduled for better user orientation",
        "Workout template logging moved to ProgramAgent.logWorkoutFromTemplate() method for cleaner separation of concerns",
        "Skip workout button text changed from 'Skip Workout' to 'Skipped Workout' when in skipped state",
        "Skipped badge styling updated to match logged badge with neon cyan color and ✕ icon (previously purple)",
        "Completed/logged workout cards now show 75% opacity for visual distinction from pending workouts",
        "Training program day advancement logic fixed to only advance when ALL workouts for that day are completed/skipped (not just primary template)",
        "Adherence rate calculation corrected to store as percentage (multiply by 100) instead of decimal in backend",
        "ManagePrograms workout stats redesigned with color-coded metrics (completed: neon pink, skipped: neon cyan, total: secondary text)",
        "Last activity timestamp on program cards now displays in neon cyan for consistency",
        "Progress percentage on program cards now displays in neon cyan matching other key metrics",
        "Command Palette implementation standardized across 10 management pages to use global instance from App.jsx instead of local duplicates",
        "Keyboard shortcut handlers (Cmd/Ctrl+K) consolidated to single global handler in App.jsx, removing 10 duplicate local handlers",
        "NavigationContext integrated across all management pages for centralized Command Palette state management",
        "Tooltip system standardized across ViewWorkouts, ManagePrograms, and TrainingGrounds with 'Go to the Training Grounds' message",
        "Textarea refs in ViewWorkouts changed from array to Map keyed by templateId for reliable user edit capture",
        "Skip workout API endpoint enhanced to support both skip and unskip actions via action parameter ('skip' | 'unskip')",
        "Program stats updated to show skipped count even when zero for transparency",
        "Training program creation now initializes skippedWorkouts: 0 for proper stat tracking",
      ],
      fixed: [
        "Critical bug where program day advanced too early when only first workout of day was completed instead of waiting for all workouts",
        "User workout edits not being captured due to textarea ref array indices mismatching template map order (switched to Map keyed by templateId)",
        "Template status showing 'scheduled' on unskip causing TypeScript error (changed to 'pending' to match WorkoutTemplate type)",
        "Adherence rate displaying 0% when should show 14% due to backend storing decimal (0.14) instead of percentage (14)",
        "Skipped workouts not being tracked or displayed in program statistics due to missing increment/decrement logic",
        "CloudWatch ThrottlingException errors in sync-log-subscriptions Lambda due to exceeding 5 requests/second API rate limit",
        "CORS policy error when attempting to unskip workouts due to missing /unskip API endpoint (consolidated to /skip with action param)",
        "Duplicate CommandPalette modals opening simultaneously (local + global) when pressing Cmd/K on 10 management pages",
        "linkedWorkoutId not updating in UI after workout logging due to single-shot polling instead of continuous polling",
        "Skip workout button not showing visual feedback (spinner) or updating card state after API call",
        "Celebration animations not triggering on day completion due to missing status check logic",
        "Polling intervals not being cleared properly, causing memory leaks on component unmount",
        "Template status not reverting correctly on unskip (was set to 'scheduled' instead of 'pending')",
        "Program stats showing '0' for adherence rate even with completed workouts due to backend calculation error",
      ],
      removed: [
        "Local CommandPalette components and state from 10 management pages (TrainingGrounds, ManageWorkouts, WorkoutDetails, Coaches, CoachConversations, CoachCreator, ManageMemories, ViewReports, ManageCoachConversations, WeeklyReports)",
        "Local keyboard shortcut handlers (Cmd/Ctrl+K useEffect hooks) from 10 management pages now using global handler",
        "Temporary celebration test buttons from ViewWorkouts page after implementing automatic trigger",
        "Unskip workout API endpoint (/unskip) consolidated into skip endpoint with action parameter",
        "Verbose debugging artifacts from Phase 3B testing document (244 lines removed)",
      ],
    },
  },
  {
    version: "Release v1.0.20251026-beta",
    date: "2025-10-26",
    changes: {
      added: [
        "Complete Training Programs infrastructure with multi-week/multi-phase program creation, calendar-based scheduling, and adherence tracking",
        "Program entity with full CRUD operations (create, read, update, delete) and DynamoDB single-table design integration",
        "Training program calendar generation with start dates, rest days, pause/resume functionality, and 'today' workout identification",
        "Natural language workout templates stored as human-readable coaching instructions instead of rigid JSON structures",
        "AI-powered workout template logging that converts natural language prescriptions to Universal Workout Schema on completion",
        "Conversation mode system (Chat vs Build) enabling context-aware AI interactions for different user intents",
        "Build mode UI with purple gradient styling, mode badges, and visual distinction from standard Chat mode conversations",
        "CoachConversationModeToggle component for seamless switching between Chat and Build modes with persistent mode state",
        "Build mode system prompt with structured guidance for training program creation through conversational Q&A flow",
        "Training program generation from conversational context using AI to extract program structure, phases, and workout templates",
        "Async build-program Lambda handler for non-blocking program generation with progress updates",
        "AI normalization and validation for training program structures ensuring data integrity and schema compliance",
        "Pinecone integration for training program summaries with semantic search and coach context retrieval",
        "Training program Pinecone metadata including program name, goal, duration, phase structure, and focus areas for rich semantic search",
        "S3 storage for detailed training program data and daily workout templates with efficient retrieval patterns",
        "Training program types and interfaces (Program, ProgramPhase, WorkoutTemplate, ProgramCalendar)",
        "Training program schema definitions with comprehensive field documentation and validation rules",
        "Timezone-aware calendar calculations using user's local timezone (defaults to America/Los_Angeles) for 'today' detection",
        "Message-level mode tracking with metadata.mode property for historical accuracy of Chat vs Build conversations",
        "AI-generated contextual updates for training program generation (start, progress, completion) using Nova Micro",
        "Utility flyout menu patterns in uiPatterns.js (utilityFlyout.container, header, headerTitle, itemsContainer)",
        "Reusable gradient divider patterns in uiPatterns.js (gradientCyan, gradientPink, gradientPurple)",
        "Section spacing patterns in uiPatterns.js (sectionSpacing.top, bottom, both) for consistent navigation layout",
        "'More Resources' hover-based flyout menu in SidebarNav with clean header and aligned positioning",
        "Prompt caching for all 4 Bedrock calls in training program generation flow (structure, phases, workouts, normalization)",
        "Triple focus strategy for command palette input with immediate, requestAnimationFrame, and 100ms timeout attempts ensuring reliable focus on open",
        "autoFocus and autoComplete attributes to command palette input for native browser focus support",
      ],
      changed: [
        'Workout templates now stored as natural language coaching instructions ("3x5 Back Squat at 80% 1RM, focus on depth and bar speed") instead of structured JSON',
        "Log workout flow refactored to use AI for converting natural language templates + user performance data to Universal Workout Schema",
        "Training program phases now contain prescribedExercises arrays (exercise name + coaching notes) instead of full structured workout objects",
        "Build mode prompt enhanced with sequential questioning strategy, methodology application, and comprehensive personalization",
        "AI responses in Build mode styled with purple gradient bubbles (aiBuildModeBubble) distinct from cyan Chat mode styling",
        "Message status dots now use dynamic color variants (cyan for Chat, purple for Build) from messagePatterns in uiPatterns.js",
        "CoachConversationAgent updated to preserve metadata.mode when loading messages from DynamoDB",
        "Stream-coach-conversation handler now captures conversation mode in AI response metadata for historical tracking",
        "Update-coach-conversation backend handler enhanced to accept and validate mode field for conversation updates",
        "SidebarNav utility section replaced long list with single 'More Resources' button revealing flyout menu on hover",
        "SidebarNav menu items now span full width with only top/bottom borders (no left/right) for cleaner visual design",
        "SidebarNav gradient dividers and section spacing now use centralized patterns from uiPatterns.js",
        "Navigation icon centering logic extended to include CoachIconSmall and MemoryIconTiny for consistent collapsed sidebar alignment",
        "Training program naming standardized to use 'Program' or 'Program' consistently (not 'Program' or 'program')",
        "Calendar functions renamed for clarity (isProgramActive → isProgramActive, ProgramCalendarDay → ProgramCalendarDay)",
        "Coach personality integration enhanced in program-generator.ts to match rich prompts used in conversation flow",
        "Training program ID generation pattern simplified to remove coachId (now: Program_userId_timestamp_shortId)",
        "DynamoDB query function renamed from queryAllPrograms to queryPrograms for cleaner naming",
        "Universal Workout Schema Exercise interface expanded with comprehensive field definitions (equipment, intensity, notes, tempo)",
        "Command palette parsing logic refactored from regex pattern to indexOf/substring approach for maximum UTF-8 and multi-line content compatibility",
        "Command detection now uses simple string splitting instead of regex patterns to handle emojis, special characters, and newlines reliably",
        "AGENTS.md documentation updated with 'Streaming Contextual Updates' pattern for AI-generated ephemeral feedback",
      ],
      fixed: [
        "Training program date handling inconsistency where calendar used UTC instead of user's local timezone for 'today' calculation",
        "Create-program handler errors due to accessing old property names after interface simplification",
        "Update-program handler potential property overwriting by adding atomic ConditionExpression checks",
        "Inconsistent camelCase naming (itemWithGSI corrected from itemWithGSI, convertUtcToUserDate from convertUTCToUserDate)",
        "AI responses in Build mode not showing purple styling during real-time streaming (metadata.mode missing in placeholder message)",
        "Build Mode badge text not vertically centered in message bubbles (added translate-y-px adjustment)",
        "Build-program Lambda missing DynamoDB environment variables and Bedrock permissions causing failures",
        "Training program generation sending entire conversation history instead of only latest continuous Build mode section",
        "Pinecone storage failure for training programs due to storing complex phases array in metadata (now stores phaseNames and focusAreas only)",
        "[GENERATE_PROGRAM] trigger text briefly appearing in AI chat bubbles before being removed during streaming",
        "Workout template normalization referencing outdated structured format instead of new natural language approach",
        "400 error when clicking Build mode toggle due to update-coach-conversation not accepting mode field",
        "CoachConversationModeToggle button styling inconsistencies (padding, border-radius, font-weight, vertical alignment)",
        "SidebarNav flyout menu positioning issues (z-index, vertical alignment, gap, border styling)",
        "'Help & Info' menu item text going dark when hovering over flyout (missing text-synthwave-neon-cyan)",
        "'Help & Info' menu item borders not showing neon cyan on hover (needed border-t/border-b specific classes)",
        "SidebarNav flyout menu clipping due to parent overflow-y-auto (moved outside scrollable container with fixed positioning)",
        "Coach Details and Save Memory icons appearing different sizes in collapsed sidebar (added centering for CoachIconSmall and MemoryIconTiny)",
        "Critical command palette bug where multi-line workout data (with newlines) failed to parse due to regex .+ pattern not matching newline characters",
        "Command palette input not receiving focus when opened, causing users to manually click the input field before typing",
        "Long workout logs with line breaks showing 'No commands found' error instead of recognizing /log-workout command",
      ],
      removed: [
        "Structured workout template schemas and normalization utilities (replaced with natural language approach)",
        "libs/program/workout-template-utils.ts (consolidated into workout-utils.ts)",
        "Test scripts for manually updating message modes (update-message-modes-for-testing.js, list-conversation-messages.js)",
      ],
    },
  },
  {
    version: "Release v1.0.20251023-beta",
    date: "2025-10-23",
    changes: {
      added: [
        "Pre-validation for workout slash commands (/log-workout) to reject obviously incomplete inputs before AI extraction (minimum 15 characters required)",
        "Comprehensive mobile-responsive positioning system for QuickActionsFAB using calc() with env(safe-area-inset-bottom) for immunity to mobile browser chrome changes",
        "Conversation mode toggle skeleton loading structure in ChatInput matching real UI layout with mode toggle pill shape",
        "Platform-aware mobile keyboard shortcut hiding (⌘ K / Ctrl K badges hidden on touch devices below 768px)",
        "MESSAGE_TYPES constant enum (TEXT, TEXT_WITH_IMAGES, VOICE) for type-safe message content classification across backend and frontend",
        "BuildModeIconTiny SVG component in SynthwaveComponents.jsx for consistent Build mode indicator icon usage",
        "generateAndFormatUpdate() helper function for DRY contextual update generation with consistent error handling",
        "AGENTS.md documentation file with concise best practices for AI prompts, architecture patterns, and stack-specific guidance",
        "AI-generated contextual updates for training program generation using Nova Micro (start, complete, error states)",
        "Message bubble UI patterns in uiPatterns.js (userMessageBubble, aiChatBubble, aiBuildModeBubble) for consistent chat styling",
        "Message status dot patterns in uiPatterns.js (statusDotPrimary, statusDotSecondary, color variants) for visual message state indicators",
        "Build mode badge pattern (modeBadgeBuild) in uiPatterns.js for purple-themed mode indicators on AI messages",
      ],
      changed: [
        "Workout extraction parsing flow refactored to call parseJsonWithFallbacks() before validation checks, allowing proper markdown cleanup of AI responses",
        "cleanResponse() utility enhanced with comprehensive markdown pattern removal supporting all code fence variations (```json, ```, ~~~json, ~~~)",
        "JSON formatting instructions in workout extraction prompt strengthened with explicit 'CRITICAL' emphasis and repetition to prevent markdown wrapping",
        "memory/detection.ts consolidated to use parseJsonWithFallbacks() consistently (replaced 34 lines of manual markdown cleanup in 2 locations)",
        "coach-conversation/summary.ts converted from custom regex-based JSON extraction to parseJsonWithFallbacks() (replaced 22 lines with single utility call)",
        "QuickActionsFAB positioning changed from fixed bottom-20 to calc(80px + env(safe-area-inset-bottom)) preventing overlap with BottomNav during mobile browser chrome transitions",
        "CommandPaletteButton completely hidden on mobile (<768px) and visible on desktop (≥768px) since QuickActionsFAB provides mobile access",
        "ChatInput skeleton loading structure now conditionally renders mode toggle skeleton when conversationMode prop is provided",
        "Conversation mode toggle alignment refined with precise padding calculations (pl-[50px] mobile, pl-[150px] desktop) to align with text input left edge",
        "CoachMessage.messageType now uses MessageType type instead of plain string for improved type safety",
        "Streaming conversation handler optimized with fire-and-forget memory saves using didInitiateMemorySave boolean flag (simplified from promise tracking)",
        "Contextual updates reduced from 5-6 to 2-3 key updates (removed pattern_analysis and insights_brewing for faster AI streaming start)",
        "Training program generation contextual updates converted from hardcoded structured messages to AI-generated ephemeral feedback using Nova Micro",
        "CoachConversations.jsx message bubble styling extracted to uiPatterns.js (userMessageBubble, aiChatBubble, aiBuildModeBubble patterns)",
        "CoachConversations.jsx message status dots refactored to use messagePatterns from uiPatterns.js with dynamic color variants",
        "Build mode AI messages now styled with purple gradient bubble (aiBuildModeBubble) and purple status dots distinct from cyan Chat mode",
        "Build mode indicator badge now uses centralized modeBadgeBuild pattern and BuildModeIconTiny component for consistency",
        "Initial acknowledgment contextual update now uses generateAndFormatUpdate() helper for cleaner code",
        "Training program contextual updates (start, complete, error) now use generateAndFormatUpdate() helper reducing duplication",
      ],
      fixed: [
        "Critical workout extraction failure when Claude returns markdown-wrapped JSON (```json {...} ```) despite explicit instructions not to wrap",
        "Premature validation blocking cleanup where extraction code checked for opening brace BEFORE running parseJsonWithFallbacks() cleanup function",
        "Expensive AI extraction calls triggered by accidental/incomplete slash command inputs (e.g., 'WARM up' 7 characters triggering 34KB prompt)",
        "QuickActionsFAB sliding down and overlapping BottomNav when mobile browser UI chrome hides/shows during scrolling (viewport height changes)",
        "Keyboard shortcut badges (⌘ K / Ctrl K) displaying on mobile touch devices where keyboard shortcuts are unavailable",
        "Empty kbd container taking up space on mobile even when kbd elements were hidden due to visible flex container wrapper",
        "Inconsistent JSON parsing across codebase with some functions using raw JSON.parse() instead of parseJsonWithFallbacks() utility",
        "ChatInput skeleton loading not reflecting conversation mode toggle UI, showing generic status text instead of mode toggle skeleton structure",
        "Hardcoded messageType strings replaced with MESSAGE_TYPES constants preventing typos and improving maintainability",
        "Performance bottleneck where pattern/insights contextual updates blocked AI streaming start by ~300-500ms (now removed)",
        "Code duplication in contextual update generation with repetitive generateContextualUpdate + formatContextualEvent pattern across 4 locations",
        "Inconsistent styling between Build mode messages and Chat mode messages using inline classes instead of centralized patterns",
        "Hardcoded SVG icon for Build mode duplicated in multiple locations instead of using shared component",
        "Messy contextual update implementation with hardcoded structured messages for training programs instead of AI-generated ephemeral feedback",
      ],
      removed: [
        "libs/program/messages.ts file (replaced with AI-generated contextual updates for consistency with memory/workout handling)",
      ],
    },
  },
  {
    version: "Release v1.0.20251021-beta",
    date: "2025-10-21",
    changes: {
      added: [
        "Enhanced running workout schema with comprehensive tracking for distance units, elevation loss, structured weather data, equipment, warmup/cooldown, route details, and fueling/hydration",
        "RunningSegment TypeScript interface for detailed segment-based tracking with pace, heart rate, cadence, terrain, and elevation change data",
        "RunningSegmentDisplay component in WorkoutViewer showing individual run segments with color-coded effort levels and performance metrics",
        "RunningDetails component displaying weather conditions, equipment tracking, route information, warmup/cooldown sections, and nutrition/hydration details",
        "Running-specific summary fields in WorkoutViewer (run type, distance with unit, total time, average pace, surface, elevation gain/loss, route name)",
        "Weather tracking with temperature, temperature_unit (F/C), conditions (sunny/cloudy/rainy/etc), wind speed, and humidity percentage",
        "Equipment tracking for running shoes, wearables (GPS watches), and other gear (running belt, sunglasses, etc.)",
        "Route information with name, description, and type classification (out_and_back, loop, point_to_point)",
        "Fueling details tracking pre-run nutrition, during-run fueling items, and total hydration in ounces",
        "Warmup and cooldown sections with distance, time, and text descriptions for each phase",
        "Run type classification supporting 11 types: easy, tempo, interval, long, race, recovery, fartlek, progression, threshold, hill_repeats, speed_work",
        "Segment type classification: warmup, working, interval, recovery, cooldown, main",
        "AI extraction pattern documentation for run type identification, pace/distance extraction, weather conditions, segment analysis, and equipment/route recognition",
      ],
      changed: [
        "RunningWorkout TypeScript interface upgraded from placeholder to fully-typed interface with comprehensive field definitions",
        "UNIVERSAL_WORKOUT_SCHEMA.md running section expanded with design philosophy, detailed examples, and AI extraction patterns",
        "WorkoutViewer component enhanced to display running workouts with collapsible sections for details and segments",
        "Running segments now display with color-coded effort level badges (max: pink, hard: cyan, moderate: secondary, easy: cyan/10)",
        "Universal workout schema running section now includes elevation_loss field alongside elevation_gain for complete elevation profile",
      ],
      fixed: [],
      removed: [],
    },
  },
  {
    version: "Release v1.0.20251019-beta",
    date: "2025-10-19",
    changes: {
      added: [
        "PublicHeader component providing minimal navigation for marketing/public pages with logo, sign in/user avatar, and hamburger menu",
        "Clear separation between public marketing pages and authenticated app pages with distinct navigation systems",
        "Mobile-optimized bottom navigation bar (BottomNav) with Training, Progress, and Coaches quick access",
        "Floating Action Button (QuickActionsFAB) with speed dial menu for Log Workout, Start Conversation, and Save Memory actions integrated with CommandPalette",
        "Mobile logo display in breadcrumbs (panda head icon) for consistent branding on small screens with tooltip",
        "Coach count badges in navigation menus showing total number of custom coaches created",
        "New get-coach-configs-count Lambda function and API endpoint for fetching total coach counts per user",
        "NavigationContext for centralized navigation state management including coach counts and menu visibility",
        "Two-tier responsive system: 640px (sm) for progressive refinements, 768px (md) for mobile/desktop paradigm shifts",
        "Skeleton loading states for avatar and username in PublicHeader during authentication",
        "Escape key handler for closing QuickActionsFAB speed dial menu",
        "Platform-aware keyboard shortcut display in PublicHeader links",
        "Timezone-aware date conversion utilities (convertUTCToUserDate, getUserTimezoneOrDefault) in analytics/date-utils.ts for accurate date aggregation across timezones",
        "userTimezone field to WorkoutSummary interface for proper timezone context during analytics processing",
        "Workout date validation in build-workout handler to detect and correct dates with incorrect years (more than 1 year off from completedAt)",
        "queryWorkoutSummaries DynamoDB function for efficient workout data retrieval using ProjectionExpression (fetches only summary fields instead of full workout objects)",
      ],
      changed: [
        "Navigation system completely redesigned with SidebarNav for desktop, BottomNav/MoreMenu/QuickActionsFAB for mobile",
        "Navigation configuration centralized in navigationConfig.js with sections: primary, contextual, quickAccess, account, and utility",
        "Settings and Sign Out menu items moved to dedicated 'Account & Settings' section with neon pink styling",
        "Technology menu item icon updated to modern 3D cube SVG design",
        "Section dividers in SidebarNav positioned below their respective sections with increased vertical spacing",
        "QuickStats now use Rajdhani font instead of Russo for numeric values across all total counts",
        "BottomNav active state background changed to darker contrast color (bg-synthwave-bg-primary/30) for better visibility",
        "BottomNav height increased from 56px to 64px for improved touch targets",
        "QuickActionsFAB main button styled with hero gradient (pink to purple) matching Theme.jsx patterns",
        "QuickActionsFAB menu items use neon pink color and right-aligned layout with full clickable areas",
        "QuickActionsFAB backdrop opacity reduced to 25% for less intrusive overlay",
        "ChatInput breakpoint for consolidating action buttons changed from 640px (sm) to 768px (md) for consistency",
        "ChatInput delete button label now dynamically displays 'Delete Session' or 'Delete Conversation' based on context",
        "Quick Prompts popup in ChatInput repositioned for mobile: fixed positioning, 90% width, horizontally centered, click-to-toggle",
        "Quick Prompts popup height increased and text size bumped to base for better readability",
        "Skeleton loading chat bubbles in CoachConversations and CoachCreator resized for proper mobile display (65vw min-width)",
        "Footer links updated to include all navigation items from PublicHeader for consistency",
        "All instances of 'About Us' standardized to 'About' across site (Footer, routeUtils, uiPatterns comments)",
        "LandingPage hero header line-height standardized to leading-tight across all breakpoints",
        "LandingPage hero content layout adjusted: full-width header with narrower subtitle and CTA buttons",
        "PublicHeader avatar skeleton size increased from 32px to 36px for better visibility",
        "PublicHeader 'Go to App' and 'Settings' menu items now use consistent py-2.5 padding",
        "BottomNav and QuickActionsFAB conditionally hidden on chat pages (CoachConversations, CoachCreator) for mobile only",
        "QuickActionsFAB now hidden when MoreMenu is open to prevent overlap",
        "Breadcrumbs pointer events fixed: nav container set to pointer-events-none, inner content to pointer-events-auto",
        "Weekly and monthly analytics now convert UTC completedAt timestamps to user's local timezone before date aggregation (defaults to America/Los_Angeles if no timezone preference set)",
        "WeeklyHeatMap date parsing updated to use timezone-safe method (parsing YYYY-MM-DD at local midnight) preventing off-by-one day display errors",
        "Workout ID generation updated from workout_summary_ prefix to workout_ prefix (e.g., workout_userId_timestamp_shortId) for clearer data model consistency",
        "Analytics data fetching refactored to use queryWorkoutSummaries for ~70-90% reduction in data transfer by fetching only necessary fields (completedAt, workoutId, summary, workoutName, discipline, coachIds)",
        "AI prompt guidance in workout extraction simplified to include concise date field instruction in temporal context section for more natural AI interpretation",
        "Non-streaming coach conversation handler now passes only new messages (user + assistant) to sendCoachConversationMessage instead of all messages",
        "Coach creator conversation history instructions enhanced to check ALL previous responses for already-provided information before asking questions, preventing redundant questions",
        "Mobile navigation components (BottomNav, MoreMenu, QuickActionsFAB) now hidden on authentication pages by adding /auth to publicRoutes array with prefix matching logic in App.jsx",
      ],
      fixed: [
        "AWS EventBridge cron schedule for build-weekly-analytics corrected from Saturday (weekDay: 7) to Sunday (weekDay: 1)",
        "Horizontal scrollbar on LandingPage at intermediate widths fixed with overflow-x-hidden and adjusted negative margins",
        "Skeleton loading chat bubbles bleeding beyond container on mobile in CoachConversations and CoachCreator pages",
        "Quick Prompts popup in ChatInput disappearing too quickly on mobile, now uses click-to-toggle instead of hover",
        "Quick Prompts popup not horizontally centered on mobile, now uses fixed positioning with left-1/2 -translate-x-1/2",
        "Coach avatar and keyboard shortcut buttons in breadcrumbs not reacting to hover/click on mobile due to pointer event blocking",
        "React Hooks order error in QuickActionsFAB (useEffect called after conditional return), moved hooks to component top",
        "Coaches badge not showing total count due to missing coachesCount in navigationUtils badge calculation",
        "Console warnings and unnecessary console.info logs removed from main.jsx, MoreMenu.jsx, and ReportAgent.js",
        "React warning for <style jsx> tag in MoreMenu.jsx, changed to <style>",
        "Weekly heat map displaying workouts on incorrect days (off by one) due to timezone-naive date parsing in WeeklyHeatMap.jsx when hovering over workout squares",
        "Analytics aggregating workouts on wrong calendar days by using UTC dates instead of user's local timezone for date grouping (e.g., Tuesday ET workout showing as Wednesday in reports)",
        "Workout date field in DynamoDB having incorrect year (e.g., 2024 instead of 2025) due to AI extraction errors, now validated and corrected to match completedAt year",
        "Critical message duplication bug in coach conversations where messages exponentially doubled each turn (2→4→10→22) due to non-streaming handler passing all messages instead of only new ones to DynamoDB save operation",
        "Analytics flows pulling entire workout objects from DynamoDB instead of just summary properties, causing unnecessary data transfer and processing overhead",
        "Confusing workout ID naming convention (workout#workout_summary_...) inconsistent with actual data structure (workouts contain summaries, not summaries of workouts)",
        "Coach creator asking redundant questions about information users already volunteered in previous responses (e.g., re-asking about equipment after user mentioned it 2 questions earlier)",
      ],
      removed: [
        "NavigationTest.jsx component and related test navigation configuration files",
        "uiPatterns.js from root src/utils directory (consolidated to src/utils/ui/uiPatterns.js)",
        "Seven duplicate logo image files (logo-light-sm-1.png through logo-light-sm-6.png, logo-light-sm-cf.png)",
        "Send message and voice record button tooltips from ChatInput component (self-explanatory buttons don't need hints, especially on mobile)",
      ],
    },
  },
  {
    version: "Release v1.0.20251016-beta",
    date: "2025-10-16",
    changes: {
      added: [
        "requiresDeepReasoning flag to SmartRequestRouter interface for intelligent model selection based on conversation complexity",
        "selectModelBasedOnReasoning() helper function for dynamic Sonnet 4.5 vs Haiku 4.5 routing based on deep reasoning requirements",
        "Comprehensive deep reasoning detection guidelines in smart router prompt distinguishing complex multi-variable scenarios from straightforward questions",
        "Smart model selection logging showing selected model (Sonnet/Haiku) and reasoning flag in CloudWatch for monitoring and optimization",
      ],
      changed: [
        "Coach conversation streaming now uses Haiku 4.5 by default (90-95% of traffic) with Sonnet 4.5 reserved for complex reasoning (5-10% of traffic)",
        "generateAIResponseStream() updated to accept routerAnalysis parameter and dynamically select model based on requiresDeepReasoning flag",
        "generateAIResponse() updated to accept routerAnalysis parameter for consistent model selection across streaming and non-streaming paths",
        "Coach creator sessions now use Haiku 4.5 for all Q&A interactions (structured questionnaire doesn't require deep reasoning capabilities)",
        "Smart router now distinguishes between complexity (hasComplexity) and deep reasoning requirements (requiresDeepReasoning) for more selective model routing",
        "Model selection criteria optimized: Haiku for standard chat, acknowledgments, simple questions, clarifications; Sonnet for multi-variable program design, complex injury scenarios, methodology debates, performance analysis",
        "Cost optimization achieving ~5-10x reduction for standard conversations while maintaining quality for complex scenarios requiring sophisticated reasoning",
        "Contextual updates in CoachConversations.jsx and CoachCreator.jsx now trigger automatic scroll-to-bottom for better real-time UX during AI processing stages",
      ],
      fixed: [
        "Contextual update indicators not triggering scrollToBottom behavior in chat windows, causing updates to appear off-screen during AI processing",
        "Missing contextualUpdate dependency in useEffect scroll hooks preventing automatic scrolling when processing stages display",
        "Cost inefficiency where all conversations used expensive Sonnet 4.5 regardless of complexity level or reasoning requirements",
      ],
    },
  },
  {
    version: "Release v1.0.20251015-beta",
    date: "2025-10-15",
    changes: {
      added: [
        "Monthly Reports system with automatic generation for months with 4+ workouts",
        "Monthly report cards with YYYY-MM format (e.g., '2025-10') for easy date parsing and sorting",
        "Monthly report display page with comprehensive analytics, insights, and performance trends",
        "Tab switcher on ViewReports page for toggling between Weekly and Monthly reports",
        "QuickStats for monthly reports showing total reports, current month, qualified months (4+ workouts), and high-confidence analysis",
        "Monthly report metadata including workoutCount, conversationCount, memoryCount, analysisConfidence, and dataCompleteness",
        "Monthly report preview tooltips showing top priority insights on hover",
        "NEW badge on current month reports to highlight the most recent analysis",
        "Monthly report empty states with clear messaging about 4+ workout threshold",
        "ReportAgent.loadAllMonthlyReports() method for fetching and managing monthly report data",
        "Monthly report grid layout matching weekly reports design with purple theme accents",
        "Separated keyboard shortcut display with individual containers for modifier key (⌘/Ctrl) and letter key (K) in CommandPaletteButton",
        "Flexbox layout with gap spacing between keyboard shortcut containers for improved visual clarity",
        "Platform-aware keyboard shortcut display showing ⌘ + K on macOS and Ctrl + K on Windows/Linux",
      ],
      changed: [
        "ViewReports page refactored to support both weekly and monthly report types with tabbed interface",
        "QuickStats dynamically switch between weekly and monthly metrics based on active tab",
        "Monthly report cards styled with purple accent color (synthwave-neon-purple) to differentiate from weekly (pink)",
        "Report cards updated with consistent 3-column performance stats grid (workouts, AI confidence, data completeness)",
        "Empty states now specify workout thresholds: 2+ for weekly, 4+ for monthly reports",
        "CommandPaletteButton component refactored from single kbd element to dual kbd elements wrapped in flex container",
        "Command palette skeleton loading structure width increased from w-16 to w-20 across all 10 pages for better accommodation of dual-key display",
        "Skeleton loading updated on: ViewReports, ManageCoachConversations, ManageMemories, ManageWorkouts, TrainingGrounds, CoachCreator, WeeklyReports, Workouts, CoachConversations, and Coaches pages",
        "Tab buttons on ViewReports page changed from neon pink to neon cyan for consistent color scheme",
        "Empty state patterns standardized across management pages (ViewReports, ManageWorkouts, ManageMemories, ManageCoachConversations) to minimal text-only design",
        "Empty state titles changed to cyan color (text-synthwave-neon-cyan) with muted descriptions (text-synthwave-text-muted)",
        "QuickStats tooltips shortened to 2-4 word phrases for reduced cognitive load on ViewReports page",
        "Monthly report summaries now display formatted month names (e.g., 'October 2025') instead of raw YYYY-MM format",
      ],
      fixed: [
        "Visual inconsistency where keyboard shortcut appeared as single container instead of separate key containers",
        "Tab button styling inconsistency on ViewReports page with mixed color schemes",
        "Empty state pattern inconsistency across management pages with some using borders/buttons and others using minimal text-only approach",
        "Verbose QuickStats tooltips creating information overload for users",
        "Missing monthly analytics causing users to only see weekly breakdowns of their training",
      ],
      removed: [
        "NeonBorder wrappers and action buttons from empty states on management pages for cleaner, minimal design",
        "Plus (+) separator between keyboard shortcut keys, replaced with flexbox gap for cleaner visual spacing",
      ],
    },
  },
  {
    version: "Release v1.0.20251012-beta",
    date: "2025-10-12",
    changes: {
      added: [
        "Compact horizontal header design system standardized across 10 pages (TrainingGrounds, ManageCoachConversations, CoachConversations, ViewReports, WeeklyReports, Workouts, ManageWorkouts, ManageMemories, Coaches, CoachCreator)",
        "CompactCoachCard shared component for consistent coach display with 24px avatar and online status indicator",
        "CommandPaletteButton shared component for consistent Cmd/Ctrl + K shortcut access across all pages",
        "Vesper coach integration on Coaches.jsx and CoachCreator.jsx as static guide coach for coach creation workflow",
        "Two-phase scroll restoration system (mount + post-loading) preventing unwanted scroll position retention on page refresh",
        "Keyboard shortcut handler (Cmd/Ctrl + K) for command palette across all 10 pages",
        "Standardized skeleton loading structures matching compact header design with w-72 width for title skeletons",
        "Coach pill tooltip system with customizable tooltipContent prop supporting page-specific messaging",
        "Unified coach pill navigation routing all main pages to training grounds and special pages to coaches dashboard",
        "Page title tooltips with hover information explaining page purpose and functionality",
        "Command palette button tooltips providing keyboard shortcut hints to users",
      ],
      changed: [
        "Page headers refactored from centered/large layouts to compact horizontal design with title + coach card + command button",
        "Skeleton header width standardized to w-72 (288px) across 9 pages for visual consistency",
        "ManageMemories.jsx skeleton header width set to w-64 (256px) per user preference for slightly different visual weight",
        "Coaches.jsx 'Your In-Progress Coaches' section header reduced from text-3xl md:text-4xl to text-xl md:text-2xl",
        "Coaches.jsx 'Start Fast with Templates' section header reduced from text-3xl md:text-4xl to text-xl md:text-2xl",
        "Coaches.jsx page description removed from header area for cleaner, more compact presentation",
        "CoachCreator.jsx page description removed from header area aligning with coaches page design",
        "Vesper coach card tooltip changed from 'Work with Vesper' to 'Go to Your Coaches' for clearer navigation intent",
        "Vesper coach card navigation simplified to always route to /coaches page instead of smart session-based routing",
        "CompactCoachCard component updated to accept tooltipContent prop with default value 'Go to the Training Grounds'",
        "CoachCreatorHeader component deprecated and replaced with compact horizontal header matching other pages",
        "Visual hierarchy improved with page titles (text-2xl md:text-3xl) larger than section headers (text-xl md:text-2xl)",
        "Section headers on Coaches.jsx kept center-aligned for modern gallery-style presentation matching card grid layouts",
      ],
      fixed: [
        "Scroll position retention issue where pages remembered scroll position after refresh instead of resetting to top",
        "Skeleton loading structure vertical positioning misalignment on ManageCoachConversations.jsx page",
        "Inconsistent skeleton header widths across pages causing visual layout shifts during loading",
        "Coach pill navigation inconsistency where some pages navigated differently than others",
        "Coach pill tooltips showing incorrect text ('Go to the Training Grounds') on Coaches and CoachCreator pages",
        "Page header visual hierarchy issue where section headers (text-3xl md:text-4xl) were larger than main page title (text-2xl md:text-3xl)",
        "CompactCoachCard hardcoded tooltip not respecting custom tooltipContent prop passed from parent components",
        "Command palette delay perception on ManageWorkouts.jsx (investigation revealed 300ms CSS animation is standard, not a bug)",
      ],
    },
  },
  {
    version: "Release v1.0.20251011-beta",
    date: "2025-10-11",
    changes: {
      added: [
        "Centralized changelog data system with exportable helper functions (changelogData.js) for application-wide version history access",
        "Changelog UI patterns (changelogListPatterns) in uiPatterns.js with 7 pattern properties for consistent version display",
        "HTML anchor navigation system for changelog with simplified version IDs (v1.0.20251011-beta format)",
        "React Router hash navigation for direct linking to specific changelog version sections",
        "Last 5 versions display in TrainingGrounds Messages & Notifications section with interactive version list",
        "GitHub-style tag icon on changelog version items for visual release indicators",
        "NEW badge system for releases 3 days old or newer to highlight recent updates",
        "Version list integration with date display and change count statistics in TrainingGrounds",
        "Centralized icon library with 4 new reusable icons (ProgramIcon, ResourcesIcon, MessagesIcon, BarChartIcon) in SynthwaveComponents.jsx",
        "getLatestVersions(count) helper function for retrieving N most recent changelog entries",
        "getTotalChanges(entry) helper function for calculating change statistics (added, changed, fixed, total)",
        "generateVersionAnchor(version) helper function using regex to extract clean version numbers from release strings",
      ],
      changed: [
        "Changelog.jsx now imports centralized changelogEntries and generateVersionAnchor from changelogData.js instead of local definitions",
        "Changelog CollapsibleSection components now accept id prop and use scroll-mt-24 class for proper anchor positioning",
        "Changelog scroll behavior changed from querySelector to getElementById to properly handle dots in CSS selectors",
        "Changelog anchor format simplified from 'version-Release-v1.0.20251010-beta' to just 'v1.0.20251010-beta' for cleaner URLs",
        "TrainingGrounds Messages & Notifications section styling updated to match Reports & Insights with pink borders (border-synthwave-neon-pink/20)",
        "TrainingGrounds version item styling updated with consistent hover effects (hover:border-synthwave-neon-pink/40)",
        "TrainingGrounds section text styling updated to match Reports section exactly for visual consistency",
        "Icon definitions moved from local TrainingGrounds.jsx declarations to centralized SynthwaveComponents.jsx for application-wide reusability",
        "TrainingGrounds.jsx now imports ProgramIcon, ResourcesIcon, MessagesIcon, and BarChartIcon from SynthwaveComponents instead of local definitions",
        "Changelog page padding reduced by removing pb-8 to eliminate gap above footer",
      ],
      fixed: [
        "Critical querySelector CSS selector bug where dots in anchor IDs (#version-Release-v1.0.20251005-beta) caused browser console errors",
        "Anchor navigation failing due to invalid CSS selectors treating dots as class separators instead of ID literals",
        "Footer gap on Changelog page caused by unnecessary pb-8 padding creating navy blue band below footer",
        "Icon duplication where TrainingGrounds.jsx defined local versions of icons instead of importing from shared library",
        "Inconsistent styling between Messages & Notifications and Reports & Insights sections in TrainingGrounds",
        "Missing visual indicators for recent releases making new versions blend in with older ones",
      ],
    },
  },
  {
    version: "Release v1.0.20251010-beta",
    date: "2025-10-10",
    changes: {
      added: [
        "Amazon Bedrock Prompt Caching with static/dynamic prompt separation achieving 100% cache hit rates and 90-135% cost reduction per request",
        "Parallel data loading for coach conversations with Router + Conversation + Config operations executing concurrently in 5-6 seconds",
        "Parallel data loading for coach creator sessions with Router + Session + Profile operations executing concurrently",
        "Cache optimization system with static prompts (coach config, methodology, safety constraints) cached at 2,982 tokens per request",
        "Cache performance monitoring showing consistent $0.008051 savings per request with negative costs (reading cached tokens cheaper than new tokens)",
        "Comprehensive cache hit rate logging with inputTokens, outputTokens, cacheRead, and cacheCreated metrics in CloudWatch",
        "Parallel pattern/insights generation overlapped with memory saving operations for maximum throughput",
        "Smart Router intelligent decision making with confidence-based context retrieval (0.3 low → skip expensive ops, 0.8 high → full context)",
        "Consolidated Memory Analysis system combining retrieval need detection and characteristics analysis in single AI call (60-70% faster)",
        "Promise.all() parallelization pattern for Router analysis, conversation loading, and config fetching",
        "Auto-discovery mode (--all flag) for migrate-pinecone-ids.js script to find and migrate all namespaces automatically",
        "listAllNamespaces() function using describeIndexStats() API for namespace discovery with record counts",
        "Final summary reporting for bulk migrations showing total namespaces, success/failure counts, and aggregate statistics",
        "Per-namespace migration tracking with individual success/failure status and resilient error handling",
        "Enhanced Pinecone query logging with match counts, processing times, and relevance score distributions",
        "Memory usage tracking with enhanced tagging (workout_planning, form_analysis, injury_management, etc.)",
      ],
      changed: [
        "Coach conversation streaming handler refactored to use parallel Promise.all() for Router + Conversation + Config loading (5-6 second total vs 15+ sequential)",
        "Coach creator streaming handler refactored to use parallel Promise.all() for Router + Session + Profile loading",
        "Bedrock API calls now use static prompt caching blocks for coach configuration, methodology context, and safety constraints",
        "System prompt structure split into static (cached) and dynamic (per-request) sections for optimal cache utilization",
        "Cache configuration now tracks and logs detailed metrics: cacheRead, cacheCreated, inputTokens, outputTokens, and cost savings",
        "Response generation functions updated to support cache_control blocks for efficient token reuse across requests",
        "Pinecone reranking score filtering now uses correct threshold (0.3) for reranked results instead of semantic search threshold (0.7)",
        "Pinecone metadata field naming standardized to camelCase (userId) across all record types (conversation summaries, memories, workouts, coach creator)",
        "Memory text content enhanced with tag keywords (tag: workout_planning tag: form_analysis) for improved semantic search matching",
        "Smart Router now skips unnecessary Pinecone/Memory queries for simple acknowledgments (confidence < 0.5)",
        "Memory retrieval logic now queries across all coaches (null coachId) for broader context availability",
        "Reranking configuration optimized with minScore: 0.3 for reranked results and fallbackMinScore: 0.5 for semantic search",
        "migrate-pinecone-ids.js script enhanced to support both single namespace and bulk migration modes with progress tracking",
        "Conversation summary Pinecone storage no longer includes redundant userId field (automatically added by storePineconeContext)",
      ],
      fixed: [
        "Critical Pinecone reranking bug where all 34 matches were filtered out due to mismatched score scales (0.7 threshold applied to 0.3-scale reranked scores)",
        "Performance bottleneck in data loading where Router + Conversation + Config operations were sequential (15+ seconds) instead of parallel (5-6 seconds)",
        "Cache inefficiency where entire system prompt was regenerated on every request instead of caching static sections",
        "Bedrock API costs unnecessarily high due to re-reading static coach configuration tokens on every message",
        "Reranking minScore logic incorrectly prioritizing caller's minScore parameter instead of RERANKING_CONFIG.minScore for reranked results",
        "Inconsistent metadata field naming in Pinecone records with both userId (camelCase) and user_id (snake_case) causing duplicate storage",
        "Conversation summaries creating duplicate user identification fields in Pinecone metadata",
        "Pinecone query results being discarded after reranking due to incompatible score threshold validation",
        "Memory retrieval potentially missing relevant context due to coach-specific scoping instead of global search",
        "Migration script failing to continue when single namespace encountered errors (now resilient with per-namespace error handling)",
      ],
    },
  },
  {
    version: "Release v1.0.20251005-beta",
    date: "2025-10-05",
    changes: {
      added: [
        "NeonPanda brand philosophy and mission integrated into coach creator (Vesper) personality prompt",
        "WHAT IS NEONPANDA section explaining platform's purpose: tracking workouts, measuring progress, and AI coach guidance",
        "Brand positioning statement: 'electric intelligence meets approachable excellence' for consistent voice",
        "Platform context emphasizing NeonPanda as bridge between cutting-edge AI and genuine human connection",
        "Left-aligned contextual update indicators with coach avatar for improved visual flow and consistency",
        "Empty streaming placeholder message filtering to prevent empty AI chat bubbles from displaying",
        "Consistent contextual update implementation across both CoachCreator and CoachConversations pages",
      ],
      changed: [
        "Contextual update formatting in streaming handlers removed extra linebreaks (\\n\\n) for cleaner display",
        "Contextual update UI simplified to text-only display without emoji decorations in CoachCreator and CoachConversations",
        "Coach creator prompt enhanced to emphasize Vesper is building coaches for the NeonPanda platform",
        "Vesper personality description updated to include NeonPanda's mission of creating relationships that transform lives",
        "Platform messaging updated to highlight NeonPanda creates a new category in fitness technology",
        "Contextual update text size increased from text-sm to text-base for improved readability",
        "Quick acknowledgments converted from chunk events to contextual events (ephemeral, not saved to conversation history)",
        "Emoji picker repositioned to anchor bottom edge just above emoji button for better visual alignment",
        "Contextual updates now display with coach avatar in left-aligned format matching message bubbles",
      ],
      fixed: [
        "Extra spacing in contextual updates causing unnecessary whitespace between updates and AI responses",
        "Emoji decorations in contextual update indicators conflicting with text-only design system",
        "Inconsistent spacing in chat display during streaming contextual updates",
        "Empty pulsing AI chat bubble appearing before first chunk arrives during streaming",
        "Quick acknowledgments being unnecessarily saved to conversation history as permanent messages",
        "Inconsistent contextual update display and behavior between CoachCreator and CoachConversations pages",
      ],
    },
  },
  {
    version: "Release v1.0.20251004-beta",
    date: "2025-10-04",
    changes: {
      added: [
        "Emoji picker integration in ChatInput component using emoji-picker-react library",
        "Fitness & Activities emoji category prioritized as 2nd position for quick access to workout-related emojis",
        "Comprehensive emoji picker styling matching synthwave theme with custom CSS overrides",
        "Cyan-themed scrollbar in emoji picker matching uiPatterns.js design system",
        "Search input in emoji picker styled to match ChatInput text input with focus and blur effects",
        "Toast notification system (ToastContext) for non-intrusive error and success messages",
        "Retry build functionality for failed coach creator sessions via 'Create Coach from Session' API",
        "AI-generated contextual updates to coach creator flow using 'Vesper' personality (mysterious, intuitive female guide)",
        "Five strategic contextual update points in coach creator: initial greeting, session review, methodology search, memory check, and response crafting",
        "SharedPolicies class for centralized IAM policy management across Lambda functions",
        "Dynamic LOG_GROUP_PREFIX generation for sync-log-subscriptions based on deployment type",
        "DashedCard UI pattern variants (dashedCard, dashedCardPinkBold, dashedCardCyan, dashedCardPurple) in uiPatterns.js",
        "SuccessModal pattern in uiPatterns.js for cyan-themed success modals",
        "SubcontainerEnhanced pattern in uiPatterns.js matching Theme.jsx glassmorphism design",
        "Bangers Google Font integration for creative text styling with sans-serif fallback",
        "create-coach-config Lambda function for manual coach creation from completed sessions",
        "Nested configGeneration object in CoachCreatorSession TypeScript interface for better data modeling",
      ],
      changed: [
        "Coach creator session deletions now perform hard deletes when user-initiated from Coaches page",
        "Coach config build process now performs soft deletes (isDeleted: true) on successful completion",
        "In-progress coach creator session cards styling updated to use dashedCard variants from uiPatterns.js",
        "Status display for in-progress sessions refactored to use icons and consistent text format matching metadata display",
        "Completion modal styling updated to cyan theme with inline icon, successModal pattern, and subcontainerEnhanced style",
        "Completion modal messaging enhanced to be more contextual and avoid 'AI' terminology",
        "Retry build functionality moved from CoachCreatorAgent to CoachAgent for proper API organization",
        "Coach creator flow now uses maximum of 11 questions (0-10, with question 10 optional for beginners)",
        "CoachCreatorAgent immediate streaming acknowledgement and isTyping state for faster visual feedback",
        "Coach creator prompt updated to align with 'NeonPanda' branding (electric, vibrant, playful)",
        "coachConfigId pattern changed from user_${userId}_coach_main to user_${userId}_coach_${Date.now()} for uniqueness",
        "created_date in coach config metadata now set programmatically instead of AI-generated to ensure accuracy",
        "personality_blending object now JSON.stringify'd before storing in Pinecone metadata",
        "Backend Lambda functions excluded from allFunctions array (forwardLogsToSns, syncLogSubscriptions) to prevent IAM policy size limits",
        "postConfirmation Lambda now uses inline IAM policies to resolve circular dependency issues",
        "Emoji picker category order optimized: Recently Used, Fitness & Activities, Smileys & People, Food & Drink, Objects",
        "Chat message spacing increased from pb-32 to pb-48 (192px) for better breathing room between messages and input",
        "Data extraction functions updated to align with new 11-question structure (questions 0-10)",
        "Session summary generation updated to reflect new 11-question flow and mapping",
        "Frontend fallback estimates corrected for all sophistication levels (BEGINNER: 10, INTERMEDIATE/ADVANCED: 11 questions)",
        "Gender preference selection added as first question (question 0) in coach creator flow",
      ],
      fixed: [
        "Browser alert popups and on-screen errors replaced with toast notifications for better UX",
        "Failed coach creator sessions not being returned to frontend due to old configGenerationStatus data structure",
        "Create custom coach card hover effects inconsistent with other coach cards on Coaches page",
        "Missing DynamoDB environment variables in create-coach-config Lambda causing failures",
        "CloudFormation circular dependency error related to auth stack and DynamoDB table grants",
        "IAM policy size limit exceeded (20,612 > 20,480 bytes) for forwardLogsToSns Lambda role",
        "Pinecone storage error due to personality_blending being stored as object instead of stringified JSON",
        "coachConfigId overwrites due to static '_main' suffix instead of unique timestamp-based pattern",
        "created_date showing incorrect AI-generated date (2025-01-04) instead of actual creation timestamp",
        "Completion modal showing by default instead of only when session is actually complete",
        "Completion modal subcontainer border style not matching Theme.jsx glassmorphism design",
        "Coach creator slower initial acknowledgement compared to coach conversation flow",
        "LOG_GROUP_PREFIX for sync-log-subscriptions using static value instead of dynamic branch-aware naming",
        "Linting errors in contextual-updates.ts related to MODEL_IDS.HAIKU and bedrockResponse.content",
        "INTERMEDIATE sophistication level showing estimated total of 9 questions instead of 10",
        "Unused data extraction functions (extractSessionDuration, extractCoachingStylePreferences) cluttering codebase",
        "Emoji picker internal CSS classes overriding custom synthwave styling for category labels",
        "Emoji picker placeholder text overlapping with search icon due to insufficient left padding",
        "Emoji sizes too large (28px) in picker, reduced to 24px for better density and scanning",
      ],
    },
  },
  {
    version: "Release v1.0.20251003-beta",
    date: "2025-10-03",
    changes: {
      added: [
        "Centralized JSON formatting instructions utility (libs/prompt-helpers.ts) for consistent AI prompt engineering",
        "Reusable getJsonFormattingInstructions() function with options for minified and standard variants",
        "Comprehensive JSON structure validation rules (brace/bracket counting, trailing comma prevention)",
        "JSON_FORMATTING_INSTRUCTIONS_STANDARD constant for general use cases",
        "JSON_FORMATTING_INSTRUCTIONS_MINIFIED constant for large payloads (workouts with 20+ rounds)",
        "Explicit markdown formatting prohibition in all AI prompts to prevent ```json wrapper issues",
        "Battle-tested JSON formatting rules applied across 15 backend functions for consistency",
        "AI-powered finish intent detection in coach creator using Claude Haiku for natural conversation flow",
        "JSON formatting instructions to 6 critical detection functions (checkUserWantsToFinish, detectConversationComplexity, detectMemoryRetrievalNeed, detectMemoryRequest, shouldUsePineconeSearch, extractCompletedAtTime)",
      ],
      changed: [
        "Coach config generation now uses standardized JSON instructions from prompt-helpers",
        "Workout extraction now uses minified variant of JSON instructions for large payloads",
        "Analytics generation now uses standardized JSON instructions from prompt-helpers",
        "Smart request router (analyzeRequestCapabilities) now uses standardized JSON instructions",
        "Memory analysis (analyzeMemoryNeeds) now uses comprehensive JSON formatting rules",
        "Pinecone methodology intent analysis now uses standardized JSON instructions",
        "Workout detection functions now use standardized JSON instructions",
        "Conversation summary generation now uses comprehensive JSON formatting rules",
        "All AI prompts generating JSON now follow identical, comprehensive formatting guidelines",
        "Dates stored in UTC and automatically converted to user's local timezone for display",
        "Migrated 11 critical detection/decision tasks from Nova Micro to Claude Haiku for superior reliability (workout detection, memory analysis, conversation complexity, Pinecone search decisions, time extraction, discipline classification)",
        "checkUserWantsToFinish() converted from synchronous keyword matching to async AI-powered intent detection",
        "stream-coach-creator-session and update-coach-creator-session handlers updated to await async checkUserWantsToFinish()",
        "Nova Micro now only used for low-stakes tasks (contextual UI messages and simple binary classifications)",
      ],
      fixed: [
        "Coach config generation JSON parsing failures when Bedrock returns markdown-wrapped JSON (```json...```)",
        "lastActivity timestamp not updating in coach creator session cards on Coaches page",
        "lastActivity field not being saved in stream-coach-creator-session handler",
        "lastActivity field not being saved in update-coach-creator-session handler (both streaming and non-streaming paths)",
        "Inconsistent JSON formatting instructions across different AI functions causing parsing variability",
        "Missing fallback parsing logic (cleanResponse/fixMalformedJson) in coach config generation",
        "JSON parsing errors from AI responses with markdown code blocks or structural issues",
        "Trailing comma errors in AI-generated JSON responses due to insufficient validation rules",
        "Coach creator '3 times to finish' bug where users needed to respond multiple times before coach creation triggered",
        "Keyword-based finish detection missing natural affirmative responses ('yep', 'sounds good', 'okay', 'sure')",
        "Nova Micro reliability issues with critical decision-making tasks requiring nuanced understanding",
        "Potential JSON parsing errors in 6 detection functions due to missing formatting instructions",
      ],
    },
  },
  {
    version: "Release v1.0.20251002-beta",
    date: "2025-10-02",
    changes: {
      added: [
        "Image upload functionality for both CoachConversations and CoachCreator pages with drag-and-drop and paste support",
        "Private S3 bucket (midgard-apps) with branch-aware naming for secure image storage",
        "Presigned URL generation for secure client-side image uploads (generate-upload-urls Lambda)",
        "Presigned URL generation for secure image downloads from private S3 bucket (generate-download-urls Lambda)",
        "ImageWithPresignedUrl shared component for consistent image display across pages",
        "Multimodal AI vision support using Claude Sonnet 4.5 via AWS Bedrock Converse API",
        "Image hydration system (image-hydration.ts) to download images from S3 and format for Claude API",
        "Client-side image processing utilities (imageProcessing.js) with HEIC conversion and compression",
        "useImageUpload React hook for managing image selection, preview, and upload state",
        "Per-image upload progress indicators with loading spinners on each image preview",
        "Copy-paste image functionality directly into ChatInput on desktop browsers",
        "Image preview display within message bubbles for both user and AI messages",
        "Inline image display with 128x128px thumbnails using neon maroon styling",
        "Support for up to 5 images per message with automatic validation",
        "S3 bucket lifecycle policy for automatic cleanup of old images after 90 days",
        "Dynamic S3 bucket name injection into amplify_outputs.json for frontend access",
      ],
      changed: [
        "CoachConversationAgent and CoachCreatorAgent now accept imageS3Keys parameter in message sending",
        "ChatInput component extended with image upload UI and file selection capabilities",
        "update-coach-creator-session handler now uses multimodal Bedrock API when images are present",
        "send-coach-conversation-message and stream-coach-conversation handlers updated for image support",
        "CoachMessage interface extended with messageType and imageS3Keys properties",
        "Backend validation ensures S3 keys are user-scoped (must start with user-uploads/{userId}/)",
        "Message submission now clears images immediately after upload for better UX",
        "Image previews styled with imagePreviewPatterns from uiPatterns.js for consistency",
        "Inline images display with neon maroon borders (border-synthwave-neon-maroon/80) and backgrounds",
        "authenticatedFetch now prepends API base URL to relative URLs for correct routing",
        "Image preview thumbnails reduced from 80px to 64px for more compact display",
      ],
      fixed: [
        "Missing APPS_BUCKET_NAME environment variable in update-coach-creator-session Lambda",
        "Missing S3 read permissions for update-coach-creator-session Lambda function",
        "Missing messageType property causing buildMultimodalContent to skip image processing in CoachCreator",
        "Frontend making API calls to localhost instead of deployed API Gateway for image downloads",
        "Image remove button being cut off on top due to overflow-hidden on parent container",
        "Images not disappearing from ChatInput after message submission",
        "ImageWithPresignedUrl component duplicated in CoachCreator.jsx and CoachConversations.jsx",
        "CoachCreatorAgent and CoachConversationAgent not loading imageS3Keys from DynamoDB into frontend state",
        "Image borders and styling not standing out against user message container backgrounds",
      ],
    },
  },
];

/**
 * Get the latest N versions from changelog
 * @param {number} count - Number of versions to return
 * @returns {Array} - Array of changelog entries
 */
export const getLatestVersions = (count = 5) => {
  return changelogEntries.slice(0, count);
};

/**
 * Get total count of changes for a version entry
 * @param {Object} entry - Changelog entry object
 * @returns {Object} - Object with counts {added, changed, fixed, total}
 */
export const getTotalChanges = (entry) => {
  const addedCount = entry.changes.added?.length || 0;
  const changedCount = entry.changes.changed?.length || 0;
  const fixedCount = entry.changes.fixed?.length || 0;

  return {
    added: addedCount,
    changed: changedCount,
    fixed: fixedCount,
    total: addedCount + changedCount + fixedCount,
  };
};

/**
 * Generate anchor ID from version string
 * Extracts just the version number portion (e.g., "v1.0.20251010-beta")
 * @param {string} version - Version string (e.g., "Release v1.0.20251010-beta")
 * @returns {string} - Anchor ID (e.g., "v1.0.20251010-beta")
 */
export const generateVersionAnchor = (version) => {
  // Extract version number: "Release v1.0.20251010-beta" -> "v1.0.20251010-beta"
  const match = version.match(/v[\d.]+(?:-\w+)?/);
  return match ? match[0] : version.replace(/\s+/g, "-");
};
