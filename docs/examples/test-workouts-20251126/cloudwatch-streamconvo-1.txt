-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   timestamp   |message|
|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1764193089369 | INIT_START Runtime Version: nodejs:22.v68 Runtime Version ARN: arn:aws:lambda:us-west-2::runtime:685b5bdd1a5972cbde591187200f592fbd417cd448d71e500b10e41759692493|
| 1764193089853 | 2025-11-26T21:38:09.853Z undefined INFO üîß PINECONE_API_KEY validation: {   exists: true,   length: 75,   isPlaceholder: false,   prefix: 'pcsk_4tHp6N_' }|
| 1764193089894 | 2025-11-26T21:38:09.894Z undefined INFO üîß awslambda global available: true|
| 1764193089895 | 2025-11-26T21:38:09.895Z undefined INFO üîß streamifyResponse available: true|
| 1764193089895 | 2025-11-26T21:38:09.895Z undefined INFO ‚úÖ Using awslambda.streamifyResponse for streaming mode|
| 1764193089906 | START RequestId: cbfabbf8-465e-4038-946f-b83981a55953 Version: $LATEST|
| 1764193089911 | 2025-11-26T21:38:09.911Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764193089911 | 2025-11-26T21:38:09.911Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764193089912 | 2025-11-26T21:38:09.912Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193089913 | 2025-11-26T21:38:09.913Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764193089913 | 2025-11-26T21:38:09.913Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764193089913 | 2025-11-26T21:38:09.913Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764193089919 | 2025-11-26T21:38:09.919Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üì° Yielded start event immediately|
| 1764193089920 | 2025-11-26T21:38:09.920Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üì° Yielded coach acknowledgment (contextual): "Copy that."|
| 1764193089920 | 2025-11-26T21:38:09.920Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193089920 | 2025-11-26T21:38:09.920Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764193089920 | 2025-11-26T21:38:09.920Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 54,   imageCount: 0 }|
| 1764193089921 | 2025-11-26T21:38:09.921Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764193090016 | 2025-11-26T21:38:10.016Z cbfabbf8-465e-4038-946f-b83981a55953 INFO user data loaded from DynamoDB successfully|
| 1764193090017 | 2025-11-26T21:38:10.017Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193090017 | 2025-11-26T21:38:10.017Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764193090048 | 2025-11-26T21:38:10.048Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 54,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193090049 | 2025-11-26T21:38:10.049Z cbfabbf8-465e-4038-946f-b83981a55953 INFO === BEDROCK API CALL START ===|
| 1764193090049 | 2025-11-26T21:38:10.049Z cbfabbf8-465e-4038-946f-b83981a55953 INFO AWS Region: us-west-2|
| 1764193090049 | 2025-11-26T21:38:10.049Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193090049 | 2025-11-26T21:38:10.049Z cbfabbf8-465e-4038-946f-b83981a55953 INFO System prompt length: 18071|
| 1764193090049 | 2025-11-26T21:38:10.049Z cbfabbf8-465e-4038-946f-b83981a55953 INFO User message length: 183|
| 1764193090049 | 2025-11-26T21:38:10.049Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Thinking enabled: false|
| 1764193090049 | 2025-11-26T21:38:10.049Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193090050 | 2025-11-26T21:38:10.050Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764193090050 | 2025-11-26T21:38:10.050Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193090050 | 2025-11-26T21:38:10.050Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193090050 | 2025-11-26T21:38:10.050Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üéØ Response prefilling enabled: {|
| 1764193090050 | 2025-11-26T21:38:10.050Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Converse command created successfully..|
| 1764193090050 | 2025-11-26T21:38:10.050Z cbfabbf8-465e-4038-946f-b83981a55953 INFO About to call bedrockClient.send()...|
| 1764193090050 | 2025-11-26T21:38:10.050Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Starting Bedrock API call with 60s timeout..|
| 1764193090085 | 2025-11-26T21:38:10.085Z cbfabbf8-465e-4038-946f-b83981a55953 INFO coachConversation data loaded from DynamoDB successfully|
| 1764193090138 | 2025-11-26T21:38:10.138Z cbfabbf8-465e-4038-946f-b83981a55953 INFO coachConfig data loaded from DynamoDB successfully|
| 1764193093860 | 2025-11-26T21:38:13.860Z cbfabbf8-465e-4038-946f-b83981a55953 INFO bedrockClient.send() completed successfully|
| 1764193093860 | 2025-11-26T21:38:13.860Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response received from Bedrock|
| 1764193093860 | 2025-11-26T21:38:13.860Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response metadata: {   httpStatusCode: 200,   requestId: '7693b486-e04f-4e42-af45-a2c7daff2e15',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193093860 | 2025-11-26T21:38:13.860Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "workout_logging",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +'"reasoning": "User expresses intent to log a workout but provides NO specific workout details (no exercises, weights, reps, times, distances, or structures). Missing REQUIRED criterion #2: specific workout content. This is a logging request/setup, not an actual workout log."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "No memory request detected. User is setting up to log a workout, not asking to save personal context or retrieve past information."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +`"reasoning": "No context search needed. User hasn't provided workout details yet to compare against history or methodology."\n` +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Straightforward logging setup. User is indicating readiness to provide workout details. No complex emotional, goal, or health factors present."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": true,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.9,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764193093861 | 2025-11-26T21:38:13.861Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1490, newLength: 1491 }|
| 1764193093861 | 2025-11-26T21:38:13.861Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Successfully extracted response text, length: 1491|
| 1764193093861 | 2025-11-26T21:38:13.861Z cbfabbf8-465e-4038-946f-b83981a55953 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193093861 | 2025-11-26T21:38:13.861Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 3844,   confidence: 0.9 }|
| 1764193093861 | 2025-11-26T21:38:13.861Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Parallel data loading completed in 3844ms|
| 1764193093861 | 2025-11-26T21:38:13.861Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764193093862 | 2025-11-26T21:38:13.862Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764193094729 | 2025-11-26T21:38:14.729Z cbfabbf8-465e-4038-946f-b83981a55953 INFO workout data queried from DynamoDB successfully|
| 1764193094760 | 2025-11-26T21:38:14.760Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 107,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764193094761 | 2025-11-26T21:38:14.761Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Triad" - an 8-round EMOM rotatin...','Completed Fortis Triada - a 24-minute EMOM with 8 ...','Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...'   ] }|
| 1764193094761 | 2025-11-26T21:38:14.761Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764193094761 | 2025-11-26T21:38:14.761Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üß† Smart Router Analysis: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 3844,   fallbackUsed: false }|
| 1764193094762 | 2025-11-26T21:38:14.762Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'I want to log a workout that I completed this morn',   hasMatch: false,   matchGroups: 0 }|
| 1764193094762 | 2025-11-26T21:38:14.762Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193094762 | 2025-11-26T21:38:14.762Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üöÄ Generating initial acknowledgment (router-approved)...|
| 1764193094762 | 2025-11-26T21:38:14.762Z cbfabbf8-465e-4038-946f-b83981a55953 INFO === BEDROCK API CALL START ===|
| 1764193094762 | 2025-11-26T21:38:14.762Z cbfabbf8-465e-4038-946f-b83981a55953 INFO AWS Region: us-west-2|
| 1764193094762 | 2025-11-26T21:38:14.762Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Model ID: us.amazon.nova-micro-v1:0|
| 1764193094762 | 2025-11-26T21:38:14.762Z cbfabbf8-465e-4038-946f-b83981a55953 INFO System prompt length: 1460|
| 1764193094763 | 2025-11-26T21:38:14.763Z cbfabbf8-465e-4038-946f-b83981a55953 INFO User message length: 255|
| 1764193094763 | 2025-11-26T21:38:14.763Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Thinking enabled: false|
| 1764193094763 | 2025-11-26T21:38:14.763Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193094763 | 2025-11-26T21:38:14.763Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193094763 | 2025-11-26T21:38:14.763Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Converse command created successfully..|
| 1764193094763 | 2025-11-26T21:38:14.763Z cbfabbf8-465e-4038-946f-b83981a55953 INFO About to call bedrockClient.send()...|
| 1764193094763 | 2025-11-26T21:38:14.763Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Starting Bedrock API call with 60s timeout..|
| 1764193095104 | 2025-11-26T21:38:15.104Z cbfabbf8-465e-4038-946f-b83981a55953 INFO bedrockClient.send() completed successfully|
| 1764193095104 | 2025-11-26T21:38:15.104Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response received from Bedrock|
| 1764193095104 | 2025-11-26T21:38:15.104Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'c7d8bccb-ee11-410d-8497-c46a5bd55dff',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193095104 | 2025-11-26T21:38:15.104Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: { text: 'Flexing my coach muscles for your morning triumph!' } }|
| 1764193095104 | 2025-11-26T21:38:15.104Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Successfully extracted response text, length: 50|
| 1764193095104 | 2025-11-26T21:38:15.104Z cbfabbf8-465e-4038-946f-b83981a55953 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193095104 | 2025-11-26T21:38:15.104Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üì° Initial acknowledgment ready|
| 1764193095105 | 2025-11-26T21:38:15.105Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üìä Processing plan: workout=true, memory=false, workoutIntent=true|
| 1764193095105 | 2025-11-26T21:38:15.105Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üèãÔ∏è Processing workout only|
| 1764193095105 | 2025-11-26T21:38:15.105Z cbfabbf8-465e-4038-946f-b83981a55953 INFO === BEDROCK API CALL START ===|
| 1764193095105 | 2025-11-26T21:38:15.105Z cbfabbf8-465e-4038-946f-b83981a55953 INFO AWS Region: us-west-2|
| 1764193095105 | 2025-11-26T21:38:15.105Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Model ID: us.amazon.nova-micro-v1:0|
| 1764193095105 | 2025-11-26T21:38:15.105Z cbfabbf8-465e-4038-946f-b83981a55953 INFO System prompt length: 1460|
| 1764193095105 | 2025-11-26T21:38:15.105Z cbfabbf8-465e-4038-946f-b83981a55953 INFO User message length: 289|
| 1764193095105 | 2025-11-26T21:38:15.105Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Thinking enabled: false|
| 1764193095105 | 2025-11-26T21:38:15.105Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç Starting workout detection for message|
| 1764193095105 | 2025-11-26T21:38:15.105Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'I want to log a workout that I completed this morn',   hasMatch: false,   matchGroups: 0 }|
| 1764193095106 | 2025-11-26T21:38:15.106Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç Slash command parsing result: {   userMessage: 'I want to log a workout that I completed this morning.',   isSlashCommand: false,   command: undefined,   content: undefined }|
| 1764193095106 | 2025-11-26T21:38:15.106Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193095106 | 2025-11-26T21:38:15.106Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç Slash command workout check: {   isSlashCommandWorkout: false,   supportedCommands: [ 'log-workout' ],   detectedCommand: undefined }|
| 1764193095106 | 2025-11-26T21:38:15.106Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç Natural language workout check (using Smart Router result): {   isNaturalLanguageWorkout: false,   confidence: 0.15,   reasoning: 'User expresses intent to log a workout but provides NO specific workout details (no exercises, weights, reps, times, distances, or structures). Missing REQUIRED criterion #2: specific workout content. This is a logging request/setup, not an actual workout log.',   source: 'smart_router' }|
| 1764193095106 | 2025-11-26T21:38:15.106Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç Final workout detection result: {   isWorkoutLogging: false,   isSlashCommandWorkout: false,   isNaturalLanguageWorkout: false }|
| 1764193095106 | 2025-11-26T21:38:15.106Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193095106 | 2025-11-26T21:38:15.106Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193095106 | 2025-11-26T21:38:15.106Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Converse command created successfully..|
| 1764193095106 | 2025-11-26T21:38:15.106Z cbfabbf8-465e-4038-946f-b83981a55953 INFO About to call bedrockClient.send()...|
| 1764193095106 | 2025-11-26T21:38:15.106Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Starting Bedrock API call with 60s timeout..|
| 1764193095402 | 2025-11-26T21:38:15.402Z cbfabbf8-465e-4038-946f-b83981a55953 INFO bedrockClient.send() completed successfully|
| 1764193095402 | 2025-11-26T21:38:15.402Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response received from Bedrock|
| 1764193095402 | 2025-11-26T21:38:15.402Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'd6b56759-dea7-4127-88bb-1915ecb0a796',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193095402 | 2025-11-26T21:38:15.402Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: 'Diving deep into your workout history to uncover the hidden gems in your progress!'   } }|
| 1764193095402 | 2025-11-26T21:38:15.402Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Successfully extracted response text, length: 82|
| 1764193095402 | 2025-11-26T21:38:15.402Z cbfabbf8-465e-4038-946f-b83981a55953 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193095402 | 2025-11-26T21:38:15.402Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üèãÔ∏è Workout intent detected but insufficient data - starting multi-turn collection|
| 1764193095402 | 2025-11-26T21:38:15.402Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üèãÔ∏è Starting new workout collection session|
| 1764193095403 | 2025-11-26T21:38:15.403Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üÜï NEW WORKOUT SESSION CREATED: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193095403',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   hasImages: false }|
| 1764193095403 | 2025-11-26T21:38:15.403Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚ú® Handling workout to-do list conversation|
| 1764193095403 | 2025-11-26T21:38:15.403Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764193095403 | 2025-11-26T21:38:15.403Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üìä Turn 1 of workout collection|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîç Extracting workout information from user response|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO === BEDROCK API CALL START ===|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO AWS Region: us-west-2|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO System prompt length: 5456|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO User message length: 1312|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Thinking enabled: false|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Converse command created successfully..|
| 1764193095404 | 2025-11-26T21:38:15.404Z cbfabbf8-465e-4038-946f-b83981a55953 INFO About to call bedrockClient.send()...|
| 1764193095405 | 2025-11-26T21:38:15.405Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Starting Bedrock API call with 60s timeout..|
| 1764193096943 | 2025-11-26T21:38:16.943Z cbfabbf8-465e-4038-946f-b83981a55953 INFO bedrockClient.send() completed successfully|
| 1764193096943 | 2025-11-26T21:38:16.943Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response received from Bedrock|
| 1764193096943 | 2025-11-26T21:38:16.943Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response metadata: {   httpStatusCode: 200,   requestId: '739b63bc-aa82-4e8c-8a2b-233aadd8eb7a',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193096943 | 2025-11-26T21:38:16.943Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_vSppvkjvRJOUMBpgIGSTfg',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764193096943 | 2025-11-26T21:38:16.943Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîß Tool use requested, extracting tool result|
| 1764193096944 | 2025-11-26T21:38:16.944Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Received extraction response|
| 1764193096944 | 2025-11-26T21:38:16.944Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Tool-based extraction successful|
| 1764193096944 | 2025-11-26T21:38:16.944Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Extracted workoutDate: "today"|
| 1764193096944 | 2025-11-26T21:38:16.944Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Extraction complete: 1 fields updated|
| 1764193096944 | 2025-11-26T21:38:16.944Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 1,   progress: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedData: { workoutDate: 'today' } }|
| 1764193096944 | 2025-11-26T21:38:16.944Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764193096945 | 2025-11-26T21:38:16.945Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üéØ Generating next workout creator question (streaming) { turnCount: 1 }|
| 1764193096945 | 2025-11-26T21:38:16.945Z cbfabbf8-465e-4038-946f-b83981a55953 INFO === BEDROCK STREAMING API CALL START ===|
| 1764193096945 | 2025-11-26T21:38:16.945Z cbfabbf8-465e-4038-946f-b83981a55953 INFO AWS Region: us-west-2|
| 1764193096945 | 2025-11-26T21:38:16.945Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193096945 | 2025-11-26T21:38:16.945Z cbfabbf8-465e-4038-946f-b83981a55953 INFO System prompt length: 2587|
| 1764193096946 | 2025-11-26T21:38:16.946Z cbfabbf8-465e-4038-946f-b83981a55953 INFO User message length: 60|
| 1764193096946 | 2025-11-26T21:38:16.946Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Thinking enabled: false|
| 1764193096946 | 2025-11-26T21:38:16.946Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Converse stream command created successfully..|
| 1764193097578 | 2025-11-26T21:38:17.578Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Stream response received from Bedrock|
| 1764193097951 | 2025-11-26T21:38:17.951Z cbfabbf8-465e-4038-946f-b83981a55953 INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764193097951 | 2025-11-26T21:38:17.951Z cbfabbf8-465e-4038-946f-b83981a55953 INFO Stream complete. Total response length: 92|
| 1764193097951 | 2025-11-26T21:38:17.951Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Question generation streaming complete|
| 1764193097951 | 2025-11-26T21:38:17.951Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Response generated and streamed|
| 1764193097951 | 2025-11-26T21:38:17.951Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚öôÔ∏è Finalizing session state|
| 1764193097951 | 2025-11-26T21:38:17.951Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 17,   todoProgress: '1/6 required items',   recommendedStatus: 'not applicable' }|
| 1764193097951 | 2025-11-26T21:38:17.951Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üìã TODO LIST BEFORE RETURN: {   turn: 1,   isComplete: false,   progress: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedData: { workoutDate: 'today' } }|
| 1764193097951 | 2025-11-26T21:38:17.951Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üìä SESSION STATE AFTER HANDLER (startWorkoutCollection): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193095403',   turnCount: 1,   isComplete: false,   progress: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedData: { workoutDate: 'today' } }|
| 1764193097952 | 2025-11-26T21:38:17.952Z cbfabbf8-465e-4038-946f-b83981a55953 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764193098014 | 2025-11-26T21:38:18.014Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Workout collection session started|
| 1764193098016 | 2025-11-26T21:38:18.016Z cbfabbf8-465e-4038-946f-b83981a55953 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764193098018 | END RequestId: cbfabbf8-465e-4038-946f-b83981a55953|
| 1764193098018 | REPORT RequestId: cbfabbf8-465e-4038-946f-b83981a55953 Duration: 8111.65 ms Billed Duration: 8646 ms Memory Size: 2048 MB Max Memory Used: 171 MB Init Duration: 533.89 ms|
| 1764193152536 | START RequestId: dc8e1f01-13a7-45c7-815e-d4044a1ec823 Version: $LATEST|
| 1764193152537 | 2025-11-26T21:39:12.537Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764193152537 | 2025-11-26T21:39:12.537Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764193152537 | 2025-11-26T21:39:12.537Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193152538 | 2025-11-26T21:39:12.538Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764193152538 | 2025-11-26T21:39:12.538Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764193152538 | 2025-11-26T21:39:12.538Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764193152539 | 2025-11-26T21:39:12.539Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üì° Yielded start event immediately|
| 1764193152539 | 2025-11-26T21:39:12.539Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üì° Yielded coach acknowledgment (contextual): "Right on."|
| 1764193152539 | 2025-11-26T21:39:12.539Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193152539 | 2025-11-26T21:39:12.539Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764193152539 | 2025-11-26T21:39:12.539Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 101,   imageCount: 0 }|
| 1764193152539 | 2025-11-26T21:39:12.539Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764193152544 | 2025-11-26T21:39:12.544Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO user data loaded from DynamoDB successfully|
| 1764193152545 | 2025-11-26T21:39:12.545Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193152545 | 2025-11-26T21:39:12.545Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764193152545 | 2025-11-26T21:39:12.545Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 101,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193152545 | 2025-11-26T21:39:12.545Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO === BEDROCK API CALL START ===|
| 1764193152545 | 2025-11-26T21:39:12.545Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO AWS Region: us-west-2|
| 1764193152545 | 2025-11-26T21:39:12.545Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193152545 | 2025-11-26T21:39:12.545Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO System prompt length: 18071|
| 1764193152545 | 2025-11-26T21:39:12.545Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO User message length: 230|
| 1764193152545 | 2025-11-26T21:39:12.545Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Thinking enabled: false|
| 1764193152545 | 2025-11-26T21:39:12.545Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193152546 | 2025-11-26T21:39:12.546Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764193152546 | 2025-11-26T21:39:12.546Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193152546 | 2025-11-26T21:39:12.546Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193152546 | 2025-11-26T21:39:12.546Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üéØ Response prefilling enabled: {|
| 1764193152546 | 2025-11-26T21:39:12.546Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Converse command created successfully..|
| 1764193152546 | 2025-11-26T21:39:12.546Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO About to call bedrockClient.send()...|
| 1764193152546 | 2025-11-26T21:39:12.546Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Starting Bedrock API call with 60s timeout..|
| 1764193152557 | 2025-11-26T21:39:12.557Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO coachConfig data loaded from DynamoDB successfully|
| 1764193152562 | 2025-11-26T21:39:12.562Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO coachConversation data loaded from DynamoDB successfully|
| 1764193156029 | 2025-11-26T21:39:16.029Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO bedrockClient.send() completed successfully|
| 1764193156029 | 2025-11-26T21:39:16.029Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Response received from Bedrock|
| 1764193156029 | 2025-11-26T21:39:16.029Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Response metadata: {   httpStatusCode: 200,   requestId: '91bc1852-9ec1-445e-8efd-d73de09a04d2',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193156030 | 2025-11-26T21:39:16.030Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "workout_logging",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": true,\n' +'"confidence": 0.99,\n' +'"workoutType": "crossfit",\n' +`"reasoning": "Past tense completion ('I did'), specific workout structure (8 rounds EMOM format), concrete details (weights 205#, reps, exercises, DUs)"\n` +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "Workout log only - no memory request or personal preference/goal information requiring storage"\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "Straightforward workout log with no references to history, progress comparison, or methodology questions"\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.98,\n' +'"reasoning": "Simple workout log - no emotional language, complications, or coaching depth needed beyond standard logging"\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": true,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.99,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764193156030 | 2025-11-26T21:39:16.030Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1297, newLength: 1298 }|
| 1764193156030 | 2025-11-26T21:39:16.030Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Successfully extracted response text, length: 1298|
| 1764193156030 | 2025-11-26T21:39:16.030Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193156030 | 2025-11-26T21:39:16.030Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: true,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 3485,   confidence: 0.99 }|
| 1764193156030 | 2025-11-26T21:39:16.030Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Parallel data loading completed in 3485ms|
| 1764193156030 | 2025-11-26T21:39:16.030Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764193156030 | 2025-11-26T21:39:16.030Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764193156783 | 2025-11-26T21:39:16.783Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO workout data queried from DynamoDB successfully|
| 1764193156803 | 2025-11-26T21:39:16.803Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 107,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764193156803 | 2025-11-26T21:39:16.803Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Triad" - an 8-round EMOM rotatin...','Completed Fortis Triada - a 24-minute EMOM with 8 ...','Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...'   ] }|
| 1764193156803 | 2025-11-26T21:39:16.803Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764193156803 | 2025-11-26T21:39:16.803Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üß† Smart Router Analysis: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: true,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 3485,   fallbackUsed: false }|
| 1764193156803 | 2025-11-26T21:39:16.803Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'I did the following workout: 8 rounds of:\nMin 1: 6',   hasMatch: false,   matchGroups: 0 }|
| 1764193156803 | 2025-11-26T21:39:16.803Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193156803 | 2025-11-26T21:39:16.803Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üèãÔ∏è Continuing workout collection session|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193156804',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 1,   hasImages: false,   progressBefore: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: { workoutDate: 'today' } }|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚ú® Handling workout to-do list conversation|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üìä Turn 2 of workout collection|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîç Extracting workout information from user response|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO === BEDROCK API CALL START ===|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO AWS Region: us-west-2|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO System prompt length: 5443|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO User message length: 1564|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Thinking enabled: false|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193156804 | 2025-11-26T21:39:16.804Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193156805 | 2025-11-26T21:39:16.805Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Converse command created successfully..|
| 1764193156805 | 2025-11-26T21:39:16.805Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO About to call bedrockClient.send()...|
| 1764193156805 | 2025-11-26T21:39:16.805Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Starting Bedrock API call with 60s timeout..|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO bedrockClient.send() completed successfully|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Response received from Bedrock|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'e27e6f2d-4275-43dd-9a77-841e74aa0c73',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_DEaq6deSSmCTytgi5JKq8w',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîß Tool use requested, extracting tool result|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Received extraction response|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Tool-based extraction successful|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Extracted exercises: "bench press, pull-ups, double unders (DUs)"|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Extracted setsOrRounds: "8 rounds"|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Extracted repsOrTime: "Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 3|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Extracted weights: "205lbs (bench press)"|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Extracted workoutDate: "today"|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Extracted workoutType: "EMOM (Every Minute On the Minute)"|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Extracted discipline: "crossfit"|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Extraction complete: 7 fields updated|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 2,   progress: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üéØ Generating next workout creator question (streaming) { turnCount: 2 }|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO === BEDROCK STREAMING API CALL START ===|
| 1764193160745 | 2025-11-26T21:39:20.745Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO AWS Region: us-west-2|
| 1764193160746 | 2025-11-26T21:39:20.746Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193160746 | 2025-11-26T21:39:20.746Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO System prompt length: 2781|
| 1764193160746 | 2025-11-26T21:39:20.746Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO User message length: 267|
| 1764193160746 | 2025-11-26T21:39:20.746Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Thinking enabled: false|
| 1764193160746 | 2025-11-26T21:39:20.746Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Converse stream command created successfully..|
| 1764193161290 | 2025-11-26T21:39:21.290Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Stream response received from Bedrock|
| 1764193161813 | 2025-11-26T21:39:21.813Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764193161813 | 2025-11-26T21:39:21.813Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO Stream complete. Total response length: 141|
| 1764193161813 | 2025-11-26T21:39:21.813Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Question generation streaming complete|
| 1764193161813 | 2025-11-26T21:39:21.813Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Response generated and streamed|
| 1764193161813 | 2025-11-26T21:39:21.813Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚öôÔ∏è Finalizing session state|
| 1764193161813 | 2025-11-26T21:39:21.813Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 83,   todoProgress: '5/6 required items',   recommendedStatus: 'not applicable' }|
| 1764193161813 | 2025-11-26T21:39:21.813Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üìã TODO LIST BEFORE RETURN: {   turn: 2,   isComplete: false,   progress: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193161813 | 2025-11-26T21:39:21.813Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193156804',   turnCount: 2,   isComplete: false,   progressAfter: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedDataAfter: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193161813 | 2025-11-26T21:39:21.813Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764193161829 | 2025-11-26T21:39:21.829Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Workout collection flow completed|
| 1764193161830 | 2025-11-26T21:39:21.830Z dc8e1f01-13a7-45c7-815e-d4044a1ec823 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764193161832 | END RequestId: dc8e1f01-13a7-45c7-815e-d4044a1ec823|
| 1764193161832 | REPORT RequestId: dc8e1f01-13a7-45c7-815e-d4044a1ec823 Duration: 9296.04 ms Billed Duration: 9297 ms Memory Size: 2048 MB Max Memory Used: 178 MB|
| 1764193273761 | START RequestId: a40f04d5-20a3-42ce-9afc-4ecf07f75382 Version: $LATEST|
| 1764193273778 | 2025-11-26T21:41:13.778Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764193273779 | 2025-11-26T21:41:13.779Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764193273779 | 2025-11-26T21:41:13.779Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193273779 | 2025-11-26T21:41:13.779Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764193273779 | 2025-11-26T21:41:13.779Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764193273779 | 2025-11-26T21:41:13.779Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764193273780 | 2025-11-26T21:41:13.780Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üì° Yielded start event immediately|
| 1764193273780 | 2025-11-26T21:41:13.780Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üì° Yielded coach acknowledgment (contextual): "Let's tackle this."|
| 1764193273780 | 2025-11-26T21:41:13.780Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193273780 | 2025-11-26T21:41:13.780Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764193273780 | 2025-11-26T21:41:13.780Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 76,   imageCount: 0 }|
| 1764193273780 | 2025-11-26T21:41:13.780Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764193273929 | 2025-11-26T21:41:13.929Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO user data loaded from DynamoDB successfully|
| 1764193273929 | 2025-11-26T21:41:13.929Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193273929 | 2025-11-26T21:41:13.929Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764193273930 | 2025-11-26T21:41:13.930Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 76,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193273930 | 2025-11-26T21:41:13.930Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO === BEDROCK API CALL START ===|
| 1764193273930 | 2025-11-26T21:41:13.930Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO AWS Region: us-west-2|
| 1764193273930 | 2025-11-26T21:41:13.930Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193273930 | 2025-11-26T21:41:13.930Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO System prompt length: 18071|
| 1764193273930 | 2025-11-26T21:41:13.930Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO User message length: 205|
| 1764193273930 | 2025-11-26T21:41:13.930Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Thinking enabled: false|
| 1764193273930 | 2025-11-26T21:41:13.930Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193273930 | 2025-11-26T21:41:13.930Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764193273931 | 2025-11-26T21:41:13.931Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193273931 | 2025-11-26T21:41:13.931Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193273931 | 2025-11-26T21:41:13.931Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üéØ Response prefilling enabled: {|
| 1764193273931 | 2025-11-26T21:41:13.931Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Converse command created successfully..|
| 1764193273931 | 2025-11-26T21:41:13.931Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO About to call bedrockClient.send()...|
| 1764193273931 | 2025-11-26T21:41:13.931Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Starting Bedrock API call with 60s timeout..|
| 1764193273947 | 2025-11-26T21:41:13.947Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO coachConversation data loaded from DynamoDB successfully|
| 1764193273996 | 2025-11-26T21:41:13.996Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO coachConfig data loaded from DynamoDB successfully|
| 1764193278489 | 2025-11-26T21:41:18.489Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO bedrockClient.send() completed successfully|
| 1764193278489 | 2025-11-26T21:41:18.489Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Response received from Bedrock|
| 1764193278489 | 2025-11-26T21:41:18.489Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Response metadata: {   httpStatusCode: 200,   requestId: '33c67c0e-913c-4acd-aa58-37ab5501aed8',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193278489 | 2025-11-26T21:41:18.489Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "progress_check",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +'"reasoning": "No past-tense completion language. Message discusses timing breakdown but lacks explicit logging intent, specific exercises, weights, or clear workout name. Appears to be analysis/commentary rather than logging."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "No memory request detected. User is discussing completed workout details but not asking to save preferences, goals, or constraints."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": true,\n' +'"searchTypes": ["workouts", "progress"],\n' +`"reasoning": "User references 'the workout' and '8 rounds' suggesting prior context. Search needed to identify which workout is being discussed and compare timing patterns."\n` +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.85,\n' +'"reasoning": "Simple timing breakdown discussion. No emotional language, major changes, or complex analysis required. Straightforward performance commentary."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": true\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.82,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }  |
| 1764193278489 | 2025-11-26T21:41:18.489Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1513, newLength: 1514 }|
| 1764193278489 | 2025-11-26T21:41:18.489Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Successfully extracted response text, length: 1514|
| 1764193278489 | 2025-11-26T21:41:18.489Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193278490 | 2025-11-26T21:41:18.490Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'progress_check',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: true,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 4560,   confidence: 0.82 }|
| 1764193278490 | 2025-11-26T21:41:18.490Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Parallel data loading completed in 4561ms|
| 1764193278490 | 2025-11-26T21:41:18.490Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç Router approved Pinecone search - loading conversation context|
| 1764193278490 | 2025-11-26T21:41:18.490Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764193279326 | 2025-11-26T21:41:19.326Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO workout data queried from DynamoDB successfully|
| 1764193279339 | 2025-11-26T21:41:19.339Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 107,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764193279340 | 2025-11-26T21:41:19.340Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Triad" - an 8-round EMOM rotatin...','Completed Fortis Triada - a 24-minute EMOM with 8 ...','Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...'   ] }|
| 1764193279340 | 2025-11-26T21:41:19.340Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç Querying Pinecone for semantic context (decision: smart-router): {   userId: '63gocaz-j-AYRsb0094ik',   userMessageLength: 76,   messagePreview: 'So the workout with warmup took 30 minutes and the 8 rounds took 24 minutes....' }|
| 1764193279340 | 2025-11-26T21:41:19.340Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîß DEBUG: Pinecone configuration: {   indexName: 'coach-creator-proto-v1-dev',   apiKeySet: true,   apiKeyLength: 75,   apiKeyPrefix: 'pcsk_4tHp6N_',   apiKeyIsPlaceholder: false,   environment: 'unknown',   envPineconeKey: 'SET',   envPineconeKeyLength: 75 }|
| 1764193279343 | 2025-11-26T21:41:19.343Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîß About to query Pinecone: {   namespace: 'user_63gocaz-j-AYRsb0094ik',   userId: '63gocaz-j-AYRsb0094ik',   indexName: 'coach-creator-proto-v1-dev',   rerankingEnabled: true,   finalTopK: 6 }|
| 1764193279343 | 2025-11-26T21:41:19.343Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Querying user namespace: {   indexName: 'coach-creator-proto-v1-dev',   namespace: 'user_63gocaz-j-AYRsb0094ik',   userId: '63gocaz-j-AYRsb0094ik',   userMessageLength: 76,   topK: 30,   recordTypes: ['workout_summary','coach_creator_summary','conversation_summary'   ] }|
| 1764193279375 | 2025-11-26T21:41:19.375Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç Querying methodology namespace: {   userMessage: 'So the workout with warmup took 30 minutes and the 8 rounds took 24 minutes.',   topK: 30,   namespace: 'methodology' }|
| 1764193280428 | 2025-11-26T21:41:20.428Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Methodology query successful: { originalHits: 30, matches: 30 }|
| 1764193282993 | 2025-11-26T21:41:22.993Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ User namespace query successful: { matches: 30 }|
| 1764193282994 | 2025-11-26T21:41:22.994Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç Retrieved initial Pinecone matches: {   userMatches: 30,   methodologyMatches: 30,   totalMatches: 60,   queryTopK: 30,   willRerank: true }|
| 1764193282994 | 2025-11-26T21:41:22.994Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Processing Pinecone results: {   totalMatches: 60,   targetTopK: 6,   minScore: 0.7,   rerankingEnabled: true,   hasQuery: true }|
| 1764193282994 | 2025-11-26T21:41:22.994Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîÑ Applying reranking: { originalCount: 60, rerankingCount: 30, targetFinalCount: 8 }|
| 1764193282995 | 2025-11-26T21:41:22.995Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîß DEBUG: Pinecone configuration: {   indexName: 'coach-creator-proto-v1-dev',   apiKeySet: true,   apiKeyLength: 75,   apiKeyPrefix: 'pcsk_4tHp6N_',   apiKeyIsPlaceholder: false,   environment: 'unknown',   envPineconeKey: 'SET',   envPineconeKeyLength: 75 }|
| 1764193282995 | 2025-11-26T21:41:22.995Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîÑ Starting reranking process: {   originalMatches: 30,   documentsExtracted: 30,   queryLength: 76,   targetTopN: 8,   model: 'pinecone-rerank-v0',   firstMatchFields: [{index: 0,id: 'workout_63gocaz-j-AYRsb0094ik_1762113858912_s7umnsnz7',hasText: true,hasContent: true,hasMetadataText: true,hasMetadataContent: false,textLength: 231,contentLength: 231,metadataTextLength: 231,documentLength: 231},{index: 1,id: 'workout_63gocaz-j-AYRsb0094ik_1763761243610_52ahhpiok',hasText: true,hasContent: true,hasMetadataText: true,hasMetadataContent: false,textLength: 343,contentLength: 343,metadataTextLength: 343,documentLength: 343}   ] }|
| 1764193284046 | 2025-11-26T21:41:24.046Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Reranking successful: {   originalCount: 30,   rerankedCount: 8,   avgOriginalScore: 0.3827335871756077,   avgRerankScore: 0.013367415098749998 }|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Successfully processed Pinecone results: {   indexName: 'coach-creator-proto-v1-dev',   userId: '63gocaz-j-AYRsb0094ik',   totalMatches: 60,   processedMatches: 8,   relevantMatches: 0,   finalMinScore: 0.3,   wasReranked: true,   wasNormalized: true,   methodologyMatches: 0,   userMatches: 0 }|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üì≠ No relevant Pinecone context found: { success: true, totalMatches: 60 }|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Pinecone context loaded in 5557ms|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üß† Smart Router Analysis: {   userIntent: 'progress_check',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: true,   pineconeSearchUsed: true,   hasComplexity: false,   processingTime: 4560,   fallbackUsed: false }|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'So the workout with warmup took 30 minutes and the',   hasMatch: false,   matchGroups: 0 }|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üèãÔ∏è Continuing workout collection session|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193284047',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 2,   hasImages: false,   progressBefore: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚ú® Handling workout to-do list conversation|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üìä Turn 3 of workout collection|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîç Extracting workout information from user response|
| 1764193284047 | 2025-11-26T21:41:24.047Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO === BEDROCK API CALL START ===|
| 1764193284048 | 2025-11-26T21:41:24.048Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO AWS Region: us-west-2|
| 1764193284048 | 2025-11-26T21:41:24.048Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193284048 | 2025-11-26T21:41:24.048Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO System prompt length: 5443|
| 1764193284048 | 2025-11-26T21:41:24.048Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO User message length: 1768|
| 1764193284048 | 2025-11-26T21:41:24.048Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Thinking enabled: false|
| 1764193284048 | 2025-11-26T21:41:24.048Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193284048 | 2025-11-26T21:41:24.048Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193284048 | 2025-11-26T21:41:24.048Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Converse command created successfully..|
| 1764193284048 | 2025-11-26T21:41:24.048Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO About to call bedrockClient.send()...|
| 1764193284048 | 2025-11-26T21:41:24.048Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Starting Bedrock API call with 60s timeout..|
| 1764193285596 | 2025-11-26T21:41:25.596Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO bedrockClient.send() completed successfully|
| 1764193285596 | 2025-11-26T21:41:25.596Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Response received from Bedrock|
| 1764193285596 | 2025-11-26T21:41:25.596Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'cb5c4d4d-0d86-45b8-8403-6d57e416a8d1',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193285596 | 2025-11-26T21:41:25.596Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_Vkqy3R4wSR-WvcYem3xuFA',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764193285596 | 2025-11-26T21:41:25.596Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîß Tool use requested, extracting tool result|
| 1764193285596 | 2025-11-26T21:41:25.596Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Received extraction response|
| 1764193285596 | 2025-11-26T21:41:25.596Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Tool-based extraction successful|
| 1764193285596 | 2025-11-26T21:41:25.596Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Extraction complete: 2 fields updated|
| 1764193285597 | 2025-11-26T21:41:25.597Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 3,   progress: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193285597 | 2025-11-26T21:41:25.597Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764193285597 | 2025-11-26T21:41:25.597Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üéØ Generating next workout creator question (streaming) { turnCount: 3 }|
| 1764193285597 | 2025-11-26T21:41:25.597Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO === BEDROCK STREAMING API CALL START ===|
| 1764193285597 | 2025-11-26T21:41:25.597Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO AWS Region: us-west-2|
| 1764193285597 | 2025-11-26T21:41:25.597Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193285597 | 2025-11-26T21:41:25.597Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO System prompt length: 2781|
| 1764193285597 | 2025-11-26T21:41:25.597Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO User message length: 436|
| 1764193285597 | 2025-11-26T21:41:25.597Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Thinking enabled: false|
| 1764193285597 | 2025-11-26T21:41:25.597Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Converse stream command created successfully..|
| 1764193286128 | 2025-11-26T21:41:26.128Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Stream response received from Bedrock|
| 1764193286595 | 2025-11-26T21:41:26.595Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764193286595 | 2025-11-26T21:41:26.595Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO Stream complete. Total response length: 160|
| 1764193286595 | 2025-11-26T21:41:26.595Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Question generation streaming complete|
| 1764193286595 | 2025-11-26T21:41:26.595Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Response generated and streamed|
| 1764193286595 | 2025-11-26T21:41:26.595Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚öôÔ∏è Finalizing session state|
| 1764193286595 | 2025-11-26T21:41:26.595Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 83,   todoProgress: '5/6 required items',   recommendedStatus: 'not applicable' }|
| 1764193286595 | 2025-11-26T21:41:26.595Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üìã TODO LIST BEFORE RETURN: {   turn: 3,   isComplete: false,   progress: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193286595 | 2025-11-26T21:41:26.595Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193284047',   turnCount: 3,   isComplete: false,   progressAfter: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedDataAfter: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193286595 | 2025-11-26T21:41:26.595Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764193286662 | 2025-11-26T21:41:26.662Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Workout collection flow completed|
| 1764193286663 | 2025-11-26T21:41:26.663Z a40f04d5-20a3-42ce-9afc-4ecf07f75382 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764193286665 | END RequestId: a40f04d5-20a3-42ce-9afc-4ecf07f75382|
| 1764193286665 | REPORT RequestId: a40f04d5-20a3-42ce-9afc-4ecf07f75382 Duration: 12903.26 ms Billed Duration: 12904 ms Memory Size: 2048 MB Max Memory Used: 178 MB|
| 1764193305007 | START RequestId: 9441977a-6e2d-4f87-87a9-eae3b5c6d878 Version: $LATEST|
| 1764193305008 | 2025-11-26T21:41:45.008Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764193305008 | 2025-11-26T21:41:45.008Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764193305009 | 2025-11-26T21:41:45.009Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193305009 | 2025-11-26T21:41:45.009Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764193305009 | 2025-11-26T21:41:45.009Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764193305009 | 2025-11-26T21:41:45.009Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764193305009 | 2025-11-26T21:41:45.009Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üì° Yielded start event immediately|
| 1764193305009 | 2025-11-26T21:41:45.009Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üì° Yielded coach acknowledgment (contextual): "Copy that."|
| 1764193305010 | 2025-11-26T21:41:45.010Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193305010 | 2025-11-26T21:41:45.010Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764193305010 | 2025-11-26T21:41:45.010Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 46,   imageCount: 0 }|
| 1764193305010 | 2025-11-26T21:41:45.010Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764193305015 | 2025-11-26T21:41:45.015Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO user data loaded from DynamoDB successfully|
| 1764193305015 | 2025-11-26T21:41:45.015Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193305015 | 2025-11-26T21:41:45.015Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 46,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO === BEDROCK API CALL START ===|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO AWS Region: us-west-2|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO System prompt length: 18071|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO User message length: 175|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Thinking enabled: false|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üéØ Response prefilling enabled: {|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Converse command created successfully..|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO About to call bedrockClient.send()...|
| 1764193305016 | 2025-11-26T21:41:45.016Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Starting Bedrock API call with 60s timeout..|
| 1764193305027 | 2025-11-26T21:41:45.027Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO coachConfig data loaded from DynamoDB successfully|
| 1764193305033 | 2025-11-26T21:41:45.033Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO coachConversation data loaded from DynamoDB successfully|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO bedrockClient.send() completed successfully|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Response received from Bedrock|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Response metadata: {   httpStatusCode: 200,   requestId: '864ef6a6-c7c1-45c4-9946-7e93951671d1',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "progress_check",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +'"reasoning": "Message discusses intensity/RPE but lacks past-tense completion language, specific workout details, or logging intent. Appears to be responding to a prior question about a workout."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "User is providing feedback data, not requesting memory storage or retrieval. No personal preferences, goals, or constraints stated."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "Message is a direct response with intensity/RPE assessment. No history lookup or pattern analysis needed for this standalone data point."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Simple intensity/RPE feedback without emotional content, goals, or complications. Straightforward coaching response needed."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.85,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1420, newLength: 1421 }|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Successfully extracted response text, length: 1421|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'progress_check',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 3437,   confidence: 0.85 }|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Parallel data loading completed in 3437ms|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764193308452 | 2025-11-26T21:41:48.452Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764193309214 | 2025-11-26T21:41:49.214Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO workout data queried from DynamoDB successfully|
| 1764193309238 | 2025-11-26T21:41:49.238Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 107,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Triad" - an 8-round EMOM rotatin...','Completed Fortis Triada - a 24-minute EMOM with 8 ...','Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...'   ] }|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üß† Smart Router Analysis: {   userIntent: 'progress_check',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 3437,   fallbackUsed: false }|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'I would say the intensity was 6 and rpe was 6.',   hasMatch: false,   matchGroups: 0 }|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üèãÔ∏è Continuing workout collection session|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193309239',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 3,   hasImages: false,   progressBefore: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚ú® Handling workout to-do list conversation|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üìä Turn 4 of workout collection|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîç Extracting workout information from user response|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO === BEDROCK API CALL START ===|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO AWS Region: us-west-2|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO System prompt length: 5443|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO User message length: 1956|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Thinking enabled: false|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193309239 | 2025-11-26T21:41:49.239Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Converse command created successfully..|
| 1764193309240 | 2025-11-26T21:41:49.240Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO About to call bedrockClient.send()...|
| 1764193309240 | 2025-11-26T21:41:49.240Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Starting Bedrock API call with 60s timeout..|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO bedrockClient.send() completed successfully|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Response received from Bedrock|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'ac52ebcf-90e1-4d36-9b16-e643d3ee4a44',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_CvZ2x7qtQqu5GM-sAYxapw',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîß Tool use requested, extracting tool result|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Received extraction response|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Tool-based extraction successful|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Extracted intensity: 6|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Extracted rpe: 6|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Extraction complete: 2 fields updated|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 4,   progress: {required: '5/6 (83%)',highPriority: '4/5 (80%)',lowPriority: '0/9 (0%)'   },   collectedData: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',intensity: 6,exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üéØ Generating next workout creator question (streaming) { turnCount: 4 }|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO === BEDROCK STREAMING API CALL START ===|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO AWS Region: us-west-2|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO System prompt length: 2872|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO User message length: 449|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Thinking enabled: false|
| 1764193310842 | 2025-11-26T21:41:50.842Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Converse stream command created successfully..|
| 1764193311525 | 2025-11-26T21:41:51.525Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Stream response received from Bedrock|
| 1764193312199 | 2025-11-26T21:41:52.199Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764193312199 | 2025-11-26T21:41:52.199Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO Stream complete. Total response length: 150|
| 1764193312199 | 2025-11-26T21:41:52.199Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Question generation streaming complete|
| 1764193312199 | 2025-11-26T21:41:52.199Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Response generated and streamed|
| 1764193312199 | 2025-11-26T21:41:52.199Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚öôÔ∏è Finalizing session state|
| 1764193312199 | 2025-11-26T21:41:52.199Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 83,   todoProgress: '5/6 required items',   recommendedStatus: 'not applicable' }|
| 1764193312199 | 2025-11-26T21:41:52.199Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üìã TODO LIST BEFORE RETURN: {   turn: 4,   isComplete: false,   progress: {required: '5/6 (83%)',highPriority: '4/5 (80%)',lowPriority: '0/9 (0%)'   },   collectedData: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',intensity: 6,exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193312200 | 2025-11-26T21:41:52.200Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193309239',   turnCount: 4,   isComplete: false,   progressAfter: {required: '5/6 (83%)',highPriority: '4/5 (80%)',lowPriority: '0/9 (0%)'   },   collectedDataAfter: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',intensity: 6,exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193312200 | 2025-11-26T21:41:52.200Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764193312214 | 2025-11-26T21:41:52.214Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Workout collection flow completed|
| 1764193312215 | 2025-11-26T21:41:52.215Z 9441977a-6e2d-4f87-87a9-eae3b5c6d878 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764193312216 | END RequestId: 9441977a-6e2d-4f87-87a9-eae3b5c6d878|
| 1764193312216 | REPORT RequestId: 9441977a-6e2d-4f87-87a9-eae3b5c6d878 Duration: 7208.72 ms Billed Duration: 7209 ms Memory Size: 2048 MB Max Memory Used: 178 MB|
| 1764193582392 | START RequestId: fa73a94a-8dde-4754-93b4-2dc14947bdaa Version: $LATEST|
| 1764193582398 | 2025-11-26T21:46:22.398Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764193582398 | 2025-11-26T21:46:22.398Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764193582398 | 2025-11-26T21:46:22.398Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193582398 | 2025-11-26T21:46:22.398Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764193582398 | 2025-11-26T21:46:22.398Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764193582398 | 2025-11-26T21:46:22.398Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764193582399 | 2025-11-26T21:46:22.399Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üì° Yielded start event immediately|
| 1764193582399 | 2025-11-26T21:46:22.399Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üì° Yielded coach acknowledgment (contextual): "Right on."|
| 1764193582399 | 2025-11-26T21:46:22.399Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193582399 | 2025-11-26T21:46:22.399Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764193582399 | 2025-11-26T21:46:22.399Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 42,   imageCount: 0 }|
| 1764193582399 | 2025-11-26T21:46:22.399Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764193582446 | 2025-11-26T21:46:22.446Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO user data loaded from DynamoDB successfully|
| 1764193582446 | 2025-11-26T21:46:22.446Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193582446 | 2025-11-26T21:46:22.446Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üß† Smart Router analyzing request capabilities: {   messageLength: 42,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO === BEDROCK API CALL START ===|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO AWS Region: us-west-2|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO System prompt length: 18071|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO User message length: 171|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Thinking enabled: false|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üéØ Response prefilling enabled: {|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Converse command created successfully..|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO About to call bedrockClient.send()...|
| 1764193582447 | 2025-11-26T21:46:22.447Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Starting Bedrock API call with 60s timeout..|
| 1764193582471 | 2025-11-26T21:46:22.471Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO coachConversation data loaded from DynamoDB successfully|
| 1764193582515 | 2025-11-26T21:46:22.515Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO coachConfig data loaded from DynamoDB successfully|
| 1764193585832 | 2025-11-26T21:46:25.832Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO bedrockClient.send() completed successfully|
| 1764193585832 | 2025-11-26T21:46:25.832Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Response received from Bedrock|
| 1764193585832 | 2025-11-26T21:46:25.832Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Response metadata: {   httpStatusCode: 200,   requestId: 'c7033592-946f-453f-9986-ac544d84e843',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193585832 | 2025-11-26T21:46:25.832Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "workout_logging",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +`"reasoning": "Message uses past tense completion ('completed') but lacks specific workout content (no exercises, weights, reps, times, distances, or named workouts). Only location context provided. Insufficient detail for workout logging."\n` +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "No explicit memory request or preference/goal/constraint sharing detected. Statement is contextual follow-up to unspecified prior content."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "No specific workout details to search. Message is incomplete without prior context about what was completed."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.9,\n' +'"reasoning": "Simple contextual statement with no complexity indicators, emotional content, or coaching needs evident."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.3,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764193585833 | 2025-11-26T21:46:25.833Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1423, newLength: 1424 }|
| 1764193585833 | 2025-11-26T21:46:25.833Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Successfully extracted response text, length: 1424|
| 1764193585833 | 2025-11-26T21:46:25.833Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO === BEDROCK API CALL SUCCESS ===|
| 1764193585833 | 2025-11-26T21:46:25.833Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 3387,   confidence: 0.3 }|
| 1764193585833 | 2025-11-26T21:46:25.833Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Parallel data loading completed in 3387ms|
| 1764193585833 | 2025-11-26T21:46:25.833Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764193585833 | 2025-11-26T21:46:25.833Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764193586744 | 2025-11-26T21:46:26.744Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO workout data queried from DynamoDB successfully|
| 1764193586759 | 2025-11-26T21:46:26.759Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 107,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764193586759 | 2025-11-26T21:46:26.759Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Triad" - an 8-round EMOM rotatin...','Completed Fortis Triada - a 24-minute EMOM with 8 ...','Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...'   ] }|
| 1764193586759 | 2025-11-26T21:46:26.759Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üß† Smart Router Analysis: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 3387,   fallbackUsed: false }|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'I completed this at home in my garage gym.',   hasMatch: false,   matchGroups: 0 }|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üèãÔ∏è Continuing workout collection session|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193586760',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 4,   hasImages: false,   progressBefore: {required: '5/6 (83%)',highPriority: '4/5 (80%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: '8 rounds',discipline: 'crossfit',weights: '205lbs (bench press)',intensity: 6,exercises: 'bench press, pull-ups, double unders (DUs)',workoutType: 'EMOM (Every Minute On the Minute)',workoutDate: 'today'   } }|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚ú® Handling workout to-do list conversation|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üìä Turn 5 of workout collection|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîç Extracting workout information from user response|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO === BEDROCK API CALL START ===|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO AWS Region: us-west-2|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO System prompt length: 5443|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO User message length: 2156|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Thinking enabled: false|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Converse command created successfully..|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO About to call bedrockClient.send()...|
| 1764193586760 | 2025-11-26T21:46:26.760Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Starting Bedrock API call with 60s timeout..|
| 1764193591765 | 2025-11-26T21:46:31.765Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO HEARTBEAT: Lambda still running, waiting for Bedrock response..|
| 1764193593133 | 2025-11-26T21:46:33.133Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO bedrockClient.send() completed successfully|
| 1764193593133 | 2025-11-26T21:46:33.133Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Response received from Bedrock|
| 1764193593133 | 2025-11-26T21:46:33.133Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Response metadata: {   httpStatusCode: 200,   requestId: '57a5f98a-bcd5-4c1a-a1f6-a096d26b65e6',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193593133 | 2025-11-26T21:46:33.133Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_SBeZwieKRmOw0m6TKAdztQ',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764193593133 | 2025-11-26T21:46:33.133Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîß Tool use requested, extracting tool result|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Received extraction response|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Tool-based extraction successful|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted location: "home garage gym"|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted exercises: "bench press, pull-ups, double unders"|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted setsOrRounds: 8|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted repsOrTime: "Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 3|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted workoutType: "EMOM"|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted weights: "205 lbs bench press"|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted discipline: "crossfit"|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted workoutDate: "today"|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted intensity: 6|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted rpe: 6|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted duration: 24|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extracted sessionDuration: 30|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Extraction complete: 12 fields updated|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 5,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '1/9 (11%)'   },   collectedData: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205 lbs bench press',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üéØ Generating next workout creator question (streaming) { turnCount: 5 }|
| 1764193593134 | 2025-11-26T21:46:33.134Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO === BEDROCK STREAMING API CALL START ===|
| 1764193593135 | 2025-11-26T21:46:33.135Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO AWS Region: us-west-2|
| 1764193593135 | 2025-11-26T21:46:33.135Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193593135 | 2025-11-26T21:46:33.135Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO System prompt length: 4047|
| 1764193593135 | 2025-11-26T21:46:33.135Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO User message length: 424|
| 1764193593135 | 2025-11-26T21:46:33.135Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Thinking enabled: false|
| 1764193593135 | 2025-11-26T21:46:33.135Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Converse stream command created successfully..|
| 1764193593744 | 2025-11-26T21:46:33.744Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Stream response received from Bedrock|
| 1764193595011 | 2025-11-26T21:46:35.011Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764193595011 | 2025-11-26T21:46:35.011Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO Stream complete. Total response length: 423|
| 1764193595011 | 2025-11-26T21:46:35.011Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Question generation streaming complete|
| 1764193595011 | 2025-11-26T21:46:35.011Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Response generated and streamed|
| 1764193595011 | 2025-11-26T21:46:35.011Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚öôÔ∏è Finalizing session state|
| 1764193595011 | 2025-11-26T21:46:35.011Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: true,   progress: 100,   todoProgress: '6/6 required items',   recommendedStatus: 'asking for optional fields' }|
| 1764193595011 | 2025-11-26T21:46:35.011Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üìã TODO LIST BEFORE RETURN: {   turn: 5,   isComplete: false,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '1/9 (11%)'   },   collectedData: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205 lbs bench press',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764193595012 | 2025-11-26T21:46:35.012Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193586760',   turnCount: 5,   isComplete: false,   progressAfter: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '1/9 (11%)'   },   collectedDataAfter: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205 lbs bench press',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764193595012 | 2025-11-26T21:46:35.012Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764193595071 | 2025-11-26T21:46:35.071Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Workout collection flow completed|
| 1764193595072 | 2025-11-26T21:46:35.072Z fa73a94a-8dde-4754-93b4-2dc14947bdaa INFO ‚úÖ Streaming pipeline completed successfully|
| 1764193595073 | END RequestId: fa73a94a-8dde-4754-93b4-2dc14947bdaa|
| 1764193595073 | REPORT RequestId: fa73a94a-8dde-4754-93b4-2dc14947bdaa Duration: 12682.34 ms Billed Duration: 12683 ms Memory Size: 2048 MB Max Memory Used: 178 MB|
| 1764193611557 | START RequestId: 10e6290a-fc00-4015-bc51-aa9dcbc3e426 Version: $LATEST|
| 1764193611558 | 2025-11-26T21:46:51.558Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764193611558 | 2025-11-26T21:46:51.558Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764193611558 | 2025-11-26T21:46:51.558Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193611559 | 2025-11-26T21:46:51.559Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764193611559 | 2025-11-26T21:46:51.559Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764193611559 | 2025-11-26T21:46:51.559Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764193611559 | 2025-11-26T21:46:51.559Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üì° Yielded start event immediately|
| 1764193611559 | 2025-11-26T21:46:51.559Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üì° Yielded coach acknowledgment (contextual): "Let's tackle this."|
| 1764193611559 | 2025-11-26T21:46:51.559Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193611560 | 2025-11-26T21:46:51.560Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764193611560 | 2025-11-26T21:46:51.560Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 40,   imageCount: 0 }|
| 1764193611560 | 2025-11-26T21:46:51.560Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764193611564 | 2025-11-26T21:46:51.564Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO user data loaded from DynamoDB successfully|
| 1764193611564 | 2025-11-26T21:46:51.564Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193611564 | 2025-11-26T21:46:51.564Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764193611565 | 2025-11-26T21:46:51.565Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 40,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193611565 | 2025-11-26T21:46:51.565Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO === BEDROCK API CALL START ===|
| 1764193611565 | 2025-11-26T21:46:51.565Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO AWS Region: us-west-2|
| 1764193611565 | 2025-11-26T21:46:51.565Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193611565 | 2025-11-26T21:46:51.565Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO System prompt length: 18071|
| 1764193611565 | 2025-11-26T21:46:51.565Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO User message length: 169|
| 1764193611565 | 2025-11-26T21:46:51.565Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Thinking enabled: false|
| 1764193611565 | 2025-11-26T21:46:51.565Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193611566 | 2025-11-26T21:46:51.566Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764193611566 | 2025-11-26T21:46:51.566Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193611566 | 2025-11-26T21:46:51.566Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193611566 | 2025-11-26T21:46:51.566Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üéØ Response prefilling enabled: {|
| 1764193611566 | 2025-11-26T21:46:51.566Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Converse command created successfully..|
| 1764193611566 | 2025-11-26T21:46:51.566Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO About to call bedrockClient.send()...|
| 1764193611566 | 2025-11-26T21:46:51.566Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Starting Bedrock API call with 60s timeout..|
| 1764193611574 | 2025-11-26T21:46:51.574Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO coachConfig data loaded from DynamoDB successfully|
| 1764193611582 | 2025-11-26T21:46:51.582Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO coachConversation data loaded from DynamoDB successfully|
| 1764193615062 | 2025-11-26T21:46:55.062Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO bedrockClient.send() completed successfully|
| 1764193615062 | 2025-11-26T21:46:55.062Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Response received from Bedrock|
| 1764193615062 | 2025-11-26T21:46:55.062Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'c7c9f293-ad0f-4ebb-9340-e37eb0c333b0',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193615062 | 2025-11-26T21:46:55.062Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "general",\n' +'  "showContextualUpdates": false,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.95,\n' +'"workoutType": null,\n' +'"reasoning": "Message discusses sleep duration, not workout completion. No past-tense workout language, specific exercise details, or logging intent present."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "User is sharing a sleep observation, not requesting memory storage or retrieval. No explicit memory request patterns or coaching-specific preferences mentioned."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +`"reasoning": "Sleep observation doesn't require historical context search. No references to past patterns, progress comparison, or methodology questions."\n` +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.98,\n' +'"reasoning": "Simple factual statement about sleep. No emotional language, goals, setbacks, or coaching relationship dynamics present."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.96,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764193615062 | 2025-11-26T21:46:55.062Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1406, newLength: 1407 }|
| 1764193615062 | 2025-11-26T21:46:55.062Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Successfully extracted response text, length: 1407|
| 1764193615062 | 2025-11-26T21:46:55.062Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193615063 | 2025-11-26T21:46:55.063Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'general',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 3499,   confidence: 0.96 }|
| 1764193615063 | 2025-11-26T21:46:55.063Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Parallel data loading completed in 3499ms|
| 1764193615063 | 2025-11-26T21:46:55.063Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764193615063 | 2025-11-26T21:46:55.063Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764193615943 | 2025-11-26T21:46:55.943Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO workout data queried from DynamoDB successfully|
| 1764193615960 | 2025-11-26T21:46:55.960Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 107,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764193615960 | 2025-11-26T21:46:55.960Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Triad" - an 8-round EMOM rotatin...','Completed Fortis Triada - a 24-minute EMOM with 8 ...','Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...'   ] }|
| 1764193615960 | 2025-11-26T21:46:55.960Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764193615960 | 2025-11-26T21:46:55.960Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üß† Smart Router Analysis: {   userIntent: 'general',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 3499,   fallbackUsed: false }|
| 1764193615961 | 2025-11-26T21:46:55.961Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'I pulled in 6 hours of sleep last night.',   hasMatch: false,   matchGroups: 0 }|
| 1764193615961 | 2025-11-26T21:46:55.961Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193615961 | 2025-11-26T21:46:55.961Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764193615961 | 2025-11-26T21:46:55.961Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üèãÔ∏è Continuing workout collection session|
| 1764193615961 | 2025-11-26T21:46:55.961Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193615961',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 5,   hasImages: false,   progressBefore: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '1/9 (11%)'   },   collectedDataBefore: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205 lbs bench press',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764193615961 | 2025-11-26T21:46:55.961Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚ú® Handling workout to-do list conversation|
| 1764193615961 | 2025-11-26T21:46:55.961Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üìä Turn 6 of workout collection|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîç Extracting workout information from user response|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO === BEDROCK API CALL START ===|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO AWS Region: us-west-2|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO System prompt length: 5443|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO User message length: 2629|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Thinking enabled: false|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Converse command created successfully..|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO About to call bedrockClient.send()...|
| 1764193615962 | 2025-11-26T21:46:55.962Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Starting Bedrock API call with 60s timeout..|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO bedrockClient.send() completed successfully|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Response received from Bedrock|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'caa70a18-d2bc-4e71-a4d9-3e07ca44bff8',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_JzyxShg0S-K9eBMy6c90vQ',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîß Tool use requested, extracting tool result|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Received extraction response|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Tool-based extraction successful|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚è≠Ô∏è AI detected user wants to finish logging and skip remaining fields|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Extracted sleepHours: 6|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Extraction complete: 1 fields updated|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 6,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '2/9 (22%)'   },   collectedData: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,sleepHours: 6,discipline: 'crossfit',weights: '205 lbs bench press',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764193617690 | 2025-11-26T21:46:57.690Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚è∞ Max turns (6) reached with required fields complete - auto-completing workout logging|
| 1764193617691 | 2025-11-26T21:46:57.691Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üìã TODO LIST BEFORE RETURN (Auto-complete): {   turn: 6,   isComplete: true,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '2/9 (22%)'   },   collectedData: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,sleepHours: 6,discipline: 'crossfit',weights: '205 lbs bench press',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764193617691 | 2025-11-26T21:46:57.691Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193615961',   turnCount: 6,   isComplete: true,   progressAfter: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '2/9 (22%)'   },   collectedDataAfter: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,sleepHours: 6,discipline: 'crossfit',weights: '205 lbs bench press',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764193617691 | 2025-11-26T21:46:57.691Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üéâ Workout collection complete - triggering build-workout|
| 1764193617691 | 2025-11-26T21:46:57.691Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üöÄ Triggering async Lambda invocation for multi-turn workout creation: {   functionName: 'amplify-neonpandaprotov1--buildworkoutlambda23D1E4-KFUp94ybUR20',   payloadKeys: ['userId','coachId','conversationId','userMessage','coachConfig','imageS3Keys','userTimezone','criticalTrainingDirective'   ],   context: 'multi-turn workout creation' }|
| 1764193617753 | 2025-11-26T21:46:57.753Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Successfully triggered async Lambda for multi-turn workout creation: {   functionName: 'amplify-neonpandaprotov1--buildworkoutlambda23D1E4-KFUp94ybUR20',   payloadSize: 11451 }|
| 1764193617754 | 2025-11-26T21:46:57.754Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Triggered async workout creation|
| 1764193617754 | 2025-11-26T21:46:57.754Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764193617771 | 2025-11-26T21:46:57.771Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Workout collection flow completed|
| 1764193617772 | 2025-11-26T21:46:57.772Z 10e6290a-fc00-4015-bc51-aa9dcbc3e426 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764193617774 | END RequestId: 10e6290a-fc00-4015-bc51-aa9dcbc3e426|
| 1764193617774 | REPORT RequestId: 10e6290a-fc00-4015-bc51-aa9dcbc3e426 Duration: 6215.82 ms Billed Duration: 6216 ms Memory Size: 2048 MB Max Memory Used: 182 MB|
| 1764193634941 | START RequestId: eb8be48c-ffc6-4f67-b893-19b99abd7c90 Version: $LATEST|
| 1764193634943 | 2025-11-26T21:47:14.943Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764193634943 | 2025-11-26T21:47:14.943Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764193634943 | 2025-11-26T21:47:14.943Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193634944 | 2025-11-26T21:47:14.944Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764193634944 | 2025-11-26T21:47:14.944Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764193634944 | 2025-11-26T21:47:14.944Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764193634944 | 2025-11-26T21:47:14.944Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Yielded start event immediately|
| 1764193634944 | 2025-11-26T21:47:14.944Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Yielded coach acknowledgment (contextual): "Copy that."|
| 1764193634944 | 2025-11-26T21:47:14.944Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193634944 | 2025-11-26T21:47:14.944Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764193634944 | 2025-11-26T21:47:14.944Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 7,   imageCount: 0 }|
| 1764193634944 | 2025-11-26T21:47:14.944Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764193634949 | 2025-11-26T21:47:14.949Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO user data loaded from DynamoDB successfully|
| 1764193634949 | 2025-11-26T21:47:14.949Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193634949 | 2025-11-26T21:47:14.949Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 7,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO === BEDROCK API CALL START ===|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO AWS Region: us-west-2|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO System prompt length: 18071|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO User message length: 136|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Thinking enabled: false|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üéØ Response prefilling enabled: {|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Converse command created successfully..|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO About to call bedrockClient.send()...|
| 1764193634950 | 2025-11-26T21:47:14.950Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Starting Bedrock API call with 60s timeout..|
| 1764193634959 | 2025-11-26T21:47:14.959Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO coachConfig data loaded from DynamoDB successfully|
| 1764193634968 | 2025-11-26T21:47:14.968Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO coachConversation data loaded from DynamoDB successfully|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO bedrockClient.send() completed successfully|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Response received from Bedrock|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Response metadata: {   httpStatusCode: 200,   requestId: '8ba5664f-1680-4f02-bb80-39c199e0eac3',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "acknowledgment",\n' +'  "showContextualUpdates": false,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.0,\n' +'"workoutType": null,\n' +'"reasoning": "Simple acknowledgment with no workout content or completion language"\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "Acknowledgment only, no memory request or personal context sharing"\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "No context needed for simple acknowledgment"\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 1.0,\n' +'"reasoning": "Minimal message, no complexity indicators present"\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.99,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1075, newLength: 1076 }|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Successfully extracted response text, length: 1076|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'acknowledgment',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 2859,   confidence: 0.99 }|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ Parallel data loading completed in 2859ms|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764193637808 | 2025-11-26T21:47:17.808Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764193638643 | 2025-11-26T21:47:18.643Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO workout data queried from DynamoDB successfully|
| 1764193638659 | 2025-11-26T21:47:18.659Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 107,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764193638659 | 2025-11-26T21:47:18.659Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Triad" - an 8-round EMOM rotatin...','Completed Fortis Triada - a 24-minute EMOM with 8 ...','Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...'   ] }|
| 1764193638659 | 2025-11-26T21:47:18.659Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764193638659 | 2025-11-26T21:47:18.659Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üß† Smart Router Analysis: {   userIntent: 'acknowledgment',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 2859,   fallbackUsed: false }|
| 1764193638659 | 2025-11-26T21:47:18.659Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîç parseSlashCommand: Regex match result: { messageStart: 'Thanks;', hasMatch: false, matchGroups: 0 }|
| 1764193638660 | 2025-11-26T21:47:18.660Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193638660 | 2025-11-26T21:47:18.660Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üìä Processing plan: workout=false, memory=false, workoutIntent=false|
| 1764193638660 | 2025-11-26T21:47:18.660Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚è≠Ô∏è Router determined no workout or memory processing needed|
| 1764193638660 | 2025-11-26T21:47:18.660Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üìù Contextual updates streamed but not saved (0 updates, ephemeral UX only)|
| 1764193638660 | 2025-11-26T21:47:18.660Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üöÄ Starting REAL-TIME AI streaming..|
| 1764193638664 | 2025-11-26T21:47:18.664Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Generated system prompt preview for streaming: {   coachName: 'Victoria The Masters Champion',   personality: 'victoria',   methodology: 'BLOCK_PERIODIZATION',   safetyConstraints: 1,   estimatedLength: 8524,   keyFeatures: ['Blended personality (victoria + marcus)','expert level adaptation','masters_crossfit_competition + heavy_lifting_development + strength_maintenance + recovery_optimization + age_group_excellence focus','Specializes in: masters_crossfit_competition, heavy_functional_lifting, olympic_lifting_masters, powerlifting_integration, crossfit_strength_development, advanced_periodization, performance_optimization, age_group_excellence, strength_focused_training'   ],   dataRichness: ['Detailed user background available','Equipment context: crossfit_gym, olympic_lifting_platform, powerlifting_equipment, gymnastics_equipment, competition_equipment, heavy_lifting_implements, recovery_tools, performance_monitoring, specialized_barbells, masters_specific_equipment','Time constraints: 75','Intensity preference: high_intelligent'   ],   conversationContext: { sessionNumber: 21 },   promptLength: 19209,   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   hasPineconeContext: false,   pineconeMatches: 0 }|
| 1764193638755 | 2025-11-26T21:47:18.755Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Successfully stored debug data in S3: {   bucket: 'midgard-sandbox-logs',   key: 'sandbox-abb89311/coach-conversation/2025-11-26T21-47-18-664Z_63gocaz-j-AYRsb0094ik_coach-conversation-prompt-stream.txt',   contentLength: 19209,   metadataKeys: ['userId','coachId','conversationId','coachName','userMessage','sessionNumber','totalPromptLength','totalPromptSizeKB','basePromptLength','basePromptSizeKB','conversationHistoryLength','conversationHistorySizeKB','pineconeContextLength','pineconeContextSizeKB','hasImages','imageCount','hasWorkoutContext','recentWorkoutsCount','workoutDetected','hasPineconeContext','pineconeMatches','hasMemories','memoriesCount','messageCount','hasCriticalDirective','userTimezone','type'   ] }|
| 1764193638755 | 2025-11-26T21:47:18.755Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ System prompt stored in S3 for debug/monitoring: {   location: 's3://midgard-sandbox-logs/sandbox-abb89311/coach-conversation/2025-11-26T21-47-18-664Z_63gocaz-j-AYRsb0094ik_coach-conversation-prompt-stream.txt',   totalSizeKB: '18.76',   baseSizeKB: '18.76',   historySizeKB: '0.00',   pineconeContextKB: '0.00',   components: {base: '18.76KB',history: '0.00KB',pinecone: '0.00KB',total: '18.76KB'   } }|
| 1764193638755 | 2025-11-26T21:47:18.755Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ü§ñ Model selection: HAIKU 4.5 (requiresDeepReasoning=false)|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üí∞ STEPPED HISTORY CACHING: Boundary at 30 messages {   totalMessages: 40,   cached: 30,   dynamic: 10,   stepSize: 10,   nextBoundary: 40,   minThreshold: 12 }|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üí¨ Using text-only Converse Stream API with history caching {   totalMessages: 42,   existingMessages: 40,   model: 'us.anthropic.claude-haiku-4-5-20251001-v1:0' }|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üî• CACHE OPTIMIZATION: Using static/dynamic prompt structure|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Static prompt size: 12.84 KB|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Dynamic prompt size: 5.91 KB|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO === BEDROCK MULTIMODAL STREAMING API CALL START ===|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO AWS Region: us-west-2|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO System prompt length: 19209|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Messages count: 42|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Thinking enabled: false|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Has images: false|
| 1764193638756 | 2025-11-26T21:47:18.756Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Multimodal converse stream command created successfully..|
| 1764193639600 | 2025-11-26T21:47:19.600Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Stream response received from Bedrock|
| 1764193639806 | 2025-11-26T21:47:19.806Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [205ms] Optimized AI chunk yielded: "You got it! That's logged and ..." (44 chars)|
| 1764193639806 | 2025-11-26T21:47:19.806Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #7 flushed: "You got it! That's logged and ..." (44 chars)|
| 1764193640066 | 2025-11-26T21:47:20.066Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [466ms] Optimized AI chunk yielded: "  **Fortis Triad - November 26..." (36 chars)|
| 1764193640066 | 2025-11-26T21:47:20.066Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #15 flushed: "  **Fortis Triad - November 26..." (36 chars)|
| 1764193640224 | 2025-11-26T21:47:20.224Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [624ms] Optimized AI chunk yielded: "** - 8 rounds EMOM:   - Min 1:..." (44 chars)|
| 1764193640224 | 2025-11-26T21:47:20.224Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #20 flushed: "** - 8 rounds EMOM:   - Min 1:..." (44 chars)|
| 1764193640276 | 2025-11-26T21:47:20.276Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [676ms] Optimized AI chunk yielded: " @ 205#   - Min 2: 6 pull-..." (26 chars)|
| 1764193640276 | 2025-11-26T21:47:20.276Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #22 flushed: " @ 205#   - Min 2: 6 pull-..." (26 chars)|
| 1764193640416 | 2025-11-26T21:47:20.416Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [816ms] Optimized AI chunk yielded: "ups   - Min 3: 30 double under..." (52 chars)|
| 1764193640416 | 2025-11-26T21:47:20.416Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #27 flushed: "ups   - Min 3: 30 double under..." (52 chars)|
| 1764193640565 | 2025-11-26T21:47:20.565Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [965ms] Optimized AI chunk yielded: "minutes** (30 min with warmup)..." (43 chars)|
| 1764193640565 | 2025-11-26T21:47:20.565Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #32 flushed: "minutes** (30 min with warmup)..." (43 chars)|
| 1764193640715 | 2025-11-26T21:47:20.715Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [1115ms] Optimized AI chunk yielded: "6/10 | RPE 6/10 - Sleep: 6 hou..." (32 chars)|
| 1764193640715 | 2025-11-26T21:47:20.715Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #36 flushed: "6/10 | RPE 6/10 - Sleep: 6 hou..." (32 chars)|
| 1764193640767 | 2025-11-26T21:47:20.767Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [1167ms] Optimized AI chunk yielded: " - Location: Home garage gym  ..." (34 chars)|
| 1764193640768 | 2025-11-26T21:47:20.768Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #38 flushed: " - Location: Home garage gym  ..." (34 chars)|
| 1764193640898 | 2025-11-26T21:47:20.898Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [1298ms] Optimized AI chunk yielded: "d steady-state work this morni..." (33 chars)|
| 1764193640898 | 2025-11-26T21:47:20.898Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #42 flushed: "d steady-state work this morni..." (33 chars)|
| 1764193641002 | 2025-11-26T21:47:21.002Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [1402ms] Optimized AI chunk yielded: " You're maintaining consistent..." (44 chars)|
| 1764193641002 | 2025-11-26T21:47:21.002Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #46 flushed: " You're maintaining consistent..." (44 chars)|
| 1764193641162 | 2025-11-26T21:47:21.162Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [1562ms] Optimized AI chunk yielded: " all movements at a moderate i..." (46 chars)|
| 1764193641162 | 2025-11-26T21:47:21.162Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #50 flushed: " all movements at a moderate i..." (46 chars)|
| 1764193641291 | 2025-11-26T21:47:21.291Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [1691ms] Optimized AI chunk yielded: " what you need heading into th..." (40 chars)|
| 1764193641291 | 2025-11-26T21:47:21.291Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #54 flushed: " what you need heading into th..." (40 chars)|
| 1764193641472 | 2025-11-26T21:47:21.472Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [1872ms] Optimized AI chunk yielded: "  **One thing I'm noticing:** ..." (33 chars)|
| 1764193641473 | 2025-11-26T21:47:21.473Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #59 flushed: "  **One thing I'm noticing:** ..." (33 chars)|
| 1764193641573 | 2025-11-26T21:47:21.573Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [1973ms] Optimized AI chunk yielded: "'re running on 6 hours of slee..." (45 chars)|
| 1764193641573 | 2025-11-26T21:47:21.573Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #62 flushed: "'re running on 6 hours of slee..." (45 chars)|
| 1764193641655 | 2025-11-26T21:47:21.655Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [2055ms] Optimized AI chunk yielded: "d consecutive morning. That's ..." (35 chars)|
| 1764193641655 | 2025-11-26T21:47:21.655Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #64 flushed: "d consecutive morning. That's ..." (35 chars)|
| 1764193641797 | 2025-11-26T21:47:21.797Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [2197ms] Optimized AI chunk yielded: "eable for moderate-intensity s..." (48 chars)|
| 1764193641797 | 2025-11-26T21:47:21.797Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #69 flushed: "eable for moderate-intensity s..." (48 chars)|
| 1764193641984 | 2025-11-26T21:47:21.984Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [2384ms] Optimized AI chunk yielded: ", but as we ramp intensity bac..." (41 chars)|
| 1764193641984 | 2025-11-26T21:47:21.984Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #74 flushed: ", but as we ramp intensity bac..." (41 chars)|
| 1764193642111 | 2025-11-26T21:47:22.111Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [2510ms] Optimized AI chunk yielded: " becomes critical for adaptati..." (48 chars)|
| 1764193642111 | 2025-11-26T21:47:22.111Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #77 flushed: " becomes critical for adaptati..." (48 chars)|
| 1764193642374 | 2025-11-26T21:47:22.374Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [2774ms] Optimized AI chunk yielded: ". If you can dial in 7-8 hours..." (43 chars)|
| 1764193642374 | 2025-11-26T21:47:22.374Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #85 flushed: ". If you can dial in 7-8 hours..." (43 chars)|
| 1764193642461 | 2025-11-26T21:47:22.461Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [2861ms] Optimized AI chunk yielded: "'ll feel the difference tomorr..." (62 chars)|
| 1764193642462 | 2025-11-26T21:47:22.462Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #88 flushed: "'ll feel the difference tomorr..." (62 chars)|
| 1764193642570 | 2025-11-26T21:47:22.570Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [2970ms] Optimized AI chunk yielded: "? Any fatigue signals,..." (22 chars)|
| 1764193642570 | 2025-11-26T21:47:22.570Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #92 flushed: "? Any fatigue signals,..." (22 chars)|
| 1764193642754 | 2025-11-26T21:47:22.754Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° [3154ms] Optimized AI chunk yielded: " or are you tracking solid rec..." (36 chars)|
| 1764193642754 | 2025-11-26T21:47:22.754Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üì° Optimized chunk #96 flushed: " or are you tracking solid rec..." (36 chars)|
| 1764193642786 | 2025-11-26T21:47:22.786Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO === BEDROCK MULTIMODAL STREAMING API CALL SUCCESS ===|
| 1764193642786 | 2025-11-26T21:47:22.786Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Stream complete. Total response length: 887|
| 1764193642786 | 2025-11-26T21:47:22.786Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üìä Metadata event received after messageStop|
| 1764193642786 | 2025-11-26T21:47:22.786Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üìä Usage data found in metadata|
| 1764193642786 | 2025-11-26T21:47:22.786Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üí∞ CACHE PERFORMANCE: {   context: 'Multimodal Streaming API',   inputTokens: 378,   outputTokens: 259,   cacheRead: 0,   cacheCreated: 0,   cacheHitRate: '0.0%',   costs: {withoutCache: '$0.001134',withCache: '$0.001134',saved: '$0.000000 (0%)'   } }|
| 1764193642787 | 2025-11-26T21:47:22.787Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üìä Stream metrics: { latencyMs: 4017 }|
| 1764193642787 | 2025-11-26T21:47:22.787Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ Real-time AI streaming completed successfully|
| 1764193642787 | 2025-11-26T21:47:22.787Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193642798 | 2025-11-26T21:47:22.798Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO coachConversation data loaded from DynamoDB successfully|
| 1764193642798 | 2025-11-26T21:47:22.798Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764193642821 | 2025-11-26T21:47:22.821Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ Conversation updated successfully|
| 1764193642821 | 2025-11-26T21:47:22.821Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üìä Conversation size: {   sizeKB: 22.94,   percentage: 6,   isApproachingLimit: false,   maxSizeKB: 400 }|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO === BEDROCK API CALL START ===|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO AWS Region: us-west-2|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO System prompt length: 4189|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO User message length: 127|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Thinking enabled: false|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üöÄ Conversation summary triggered (fire-and-forget)|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ Proper pipeline streaming implementation completed successfully|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193642822 | 2025-11-26T21:47:22.822Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO üéØ Response prefilling enabled: {|
| 1764193642823 | 2025-11-26T21:47:22.823Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Converse command created successfully..|
| 1764193642823 | 2025-11-26T21:47:22.823Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO About to call bedrockClient.send()...|
| 1764193642823 | 2025-11-26T21:47:22.823Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO Starting Bedrock API call with 60s timeout..|
| 1764193642826 | 2025-11-26T21:47:22.826Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764193642828 | END RequestId: eb8be48c-ffc6-4f67-b893-19b99abd7c90|
| 1764193642828 | REPORT RequestId: eb8be48c-ffc6-4f67-b893-19b99abd7c90 Duration: 7886.06 ms Billed Duration: 7887 ms Memory Size: 2048 MB Max Memory Used: 182 MB|
| 1764193898242 | 2025-11-26T21:51:38.242Z eb8be48c-ffc6-4f67-b893-19b99abd7c90 INFO HEARTBEAT: Lambda still running, waiting for Bedrock response..|
| 1764193898242 | START RequestId: a9528f12-3673-444c-ada1-70844c6c3c31 Version: $LATEST|
| 1764193898266 | 2025-11-26T21:51:38.266Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764193898266 | 2025-11-26T21:51:38.266Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764193898266 | 2025-11-26T21:51:38.266Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193898267 | 2025-11-26T21:51:38.267Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764193898267 | 2025-11-26T21:51:38.267Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764193898267 | 2025-11-26T21:51:38.267Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764193898267 | 2025-11-26T21:51:38.267Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üì° Yielded start event immediately|
| 1764193898267 | 2025-11-26T21:51:38.267Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üì° Yielded coach acknowledgment (contextual): "Copy that."|
| 1764193898267 | 2025-11-26T21:51:38.267Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193898267 | 2025-11-26T21:51:38.267Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764193898267 | 2025-11-26T21:51:38.267Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 54,   imageCount: 0 }|
| 1764193898267 | 2025-11-26T21:51:38.267Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764193898349 | 2025-11-26T21:51:38.349Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO user data loaded from DynamoDB successfully|
| 1764193898349 | 2025-11-26T21:51:38.349Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193898349 | 2025-11-26T21:51:38.349Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764193898350 | 2025-11-26T21:51:38.350Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 54,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193898350 | 2025-11-26T21:51:38.350Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO === BEDROCK API CALL START ===|
| 1764193898350 | 2025-11-26T21:51:38.350Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO AWS Region: us-west-2|
| 1764193898350 | 2025-11-26T21:51:38.350Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193898350 | 2025-11-26T21:51:38.350Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO System prompt length: 18071|
| 1764193898350 | 2025-11-26T21:51:38.350Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO User message length: 183|
| 1764193898350 | 2025-11-26T21:51:38.350Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Thinking enabled: false|
| 1764193898350 | 2025-11-26T21:51:38.350Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193898350 | 2025-11-26T21:51:38.350Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764193898350 | 2025-11-26T21:51:38.350Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193898351 | 2025-11-26T21:51:38.351Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193898351 | 2025-11-26T21:51:38.351Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üéØ Response prefilling enabled: {|
| 1764193898351 | 2025-11-26T21:51:38.351Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Converse command created successfully..|
| 1764193898351 | 2025-11-26T21:51:38.351Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO About to call bedrockClient.send()...|
| 1764193898351 | 2025-11-26T21:51:38.351Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Starting Bedrock API call with 60s timeout..|
| 1764193898365 | 2025-11-26T21:51:38.365Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO coachConversation data loaded from DynamoDB successfully|
| 1764193898418 | 2025-11-26T21:51:38.418Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO coachConfig data loaded from DynamoDB successfully|
| 1764193899327 | 2025-11-26T21:51:39.327Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO bedrockClient.send() completed successfully|
| 1764193899327 | 2025-11-26T21:51:39.327Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response received from Bedrock|
| 1764193899327 | 2025-11-26T21:51:39.327Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response metadata: {   httpStatusCode: 200,   requestId: '13779bc9-502e-40c6-8533-402076b2c745',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193899327 | 2025-11-26T21:51:39.327Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "hasComplexity": false,\n' +'  "confidence": 0.95,\n' +'  "complexityTypes": [],\n' +'  "reasoning": "Message is a simple acknowledgment with no indicators of goal-setting, emotional intensity, life changes, achievements, setbacks, or coaching dynamics. No complexity triggers present."\n' +'}'   } }|
| 1764193899327 | 2025-11-26T21:51:39.327Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 276, newLength: 277 }|
| 1764193899327 | 2025-11-26T21:51:39.327Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Successfully extracted response text, length: 277|
| 1764193899327 | 2025-11-26T21:51:39.327Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193899328 | 2025-11-26T21:51:39.328Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîÑ Conversation summary trigger detected: {   conversationId: 'conv_1763761119267_ek3vk5fw0',   totalMessages: 42,   triggeredBy: 'message_count',   complexityDetected: false }|
| 1764193899328 | 2025-11-26T21:51:39.328Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üöÄ Triggering async Lambda invocation for conversation summary generation: {   functionName: 'amplify-neonpandaprotov1--buildconversationsummary-2fJSP2M2bHKn',   payloadKeys: ['userId','coachId','conversationId','triggerReason','messageCount','complexityIndicators'   ],   context: 'conversation summary generation' }|
| 1764193899384 | 2025-11-26T21:51:39.384Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Successfully triggered async Lambda for conversation summary generation: {   functionName: 'amplify-neonpandaprotov1--buildconversationsummary-2fJSP2M2bHKn',   payloadSize: 191 }|
| 1764193903062 | 2025-11-26T21:51:43.062Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO bedrockClient.send() completed successfully|
| 1764193903063 | 2025-11-26T21:51:43.063Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response received from Bedrock|
| 1764193903063 | 2025-11-26T21:51:43.063Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response metadata: {   httpStatusCode: 200,   requestId: '727dcea7-6561-4132-bb52-ce7cdb21c7e6',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193903063 | 2025-11-26T21:51:43.063Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "workout_logging",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +'"reasoning": "User expresses intent to log but provides NO specific workout details (no times, weights, reps, exercises, distances, or structures). Missing all three strict criteria: has past tense intent but lacks specific content and explicit logging details."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "No memory request detected. User is setting up for workout logging, not requesting memory operations."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +`"reasoning": "No context search needed. User hasn't provided workout details to search against or asked for comparative analysis."\n` +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Simple statement of intent. No emotional language, goals, achievements, or complex factors present."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.85,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764193903063 | 2025-11-26T21:51:43.063Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1413, newLength: 1414 }|
| 1764193903063 | 2025-11-26T21:51:43.063Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Successfully extracted response text, length: 1414|
| 1764193903063 | 2025-11-26T21:51:43.063Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193903064 | 2025-11-26T21:51:43.064Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 4715,   confidence: 0.85 }|
| 1764193903064 | 2025-11-26T21:51:43.064Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Parallel data loading completed in 4715ms|
| 1764193903064 | 2025-11-26T21:51:43.064Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764193903064 | 2025-11-26T21:51:43.064Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764193903947 | 2025-11-26T21:51:43.947Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO workout data queried from DynamoDB successfully|
| 1764193903964 | 2025-11-26T21:51:43.964Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 105,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764193903964 | 2025-11-26T21:51:43.964Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...'   ] }|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üß† Smart Router Analysis: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 4715,   fallbackUsed: false }|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'i want to log a workout that I completed this morn',   hasMatch: false,   matchGroups: 0 }|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üöÄ Generating initial acknowledgment (router-approved)...|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO === BEDROCK API CALL START ===|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO AWS Region: us-west-2|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Model ID: us.amazon.nova-micro-v1:0|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO System prompt length: 1460|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO User message length: 255|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Thinking enabled: false|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Converse command created successfully..|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO About to call bedrockClient.send()...|
| 1764193903965 | 2025-11-26T21:51:43.965Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Starting Bedrock API call with 60s timeout..|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO bedrockClient.send() completed successfully|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response received from Bedrock|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response metadata: {   httpStatusCode: 200,   requestId: '91a02cde-0ef4-4aee-bb16-8a8ad18aab53',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: 'Diving into your morning victory and crafting a plan for your next win!'   } }|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Successfully extracted response text, length: 71|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üì° Initial acknowledgment ready|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üìä Processing plan: workout=true, memory=false, workoutIntent=true|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üèãÔ∏è Processing workout only|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO === BEDROCK API CALL START ===|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO AWS Region: us-west-2|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Model ID: us.amazon.nova-micro-v1:0|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO System prompt length: 1460|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO User message length: 289|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Thinking enabled: false|
| 1764193904355 | 2025-11-26T21:51:44.355Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç Starting workout detection for message|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'i want to log a workout that I completed this morn',   hasMatch: false,   matchGroups: 0 }|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç Slash command parsing result: {   userMessage: 'i want to log a workout that I completed this morning.',   isSlashCommand: false,   command: undefined,   content: undefined }|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç Slash command workout check: {   isSlashCommandWorkout: false,   supportedCommands: [ 'log-workout' ],   detectedCommand: undefined }|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç Natural language workout check (using Smart Router result): {   isNaturalLanguageWorkout: false,   confidence: 0.15,   reasoning: 'User expresses intent to log but provides NO specific workout details (no times, weights, reps, exercises, distances, or structures). Missing all three strict criteria: has past tense intent but lacks specific content and explicit logging details.',   source: 'smart_router' }|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç Final workout detection result: {   isWorkoutLogging: false,   isSlashCommandWorkout: false,   isNaturalLanguageWorkout: false }|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Converse command created successfully..|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO About to call bedrockClient.send()...|
| 1764193904356 | 2025-11-26T21:51:44.356Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Starting Bedrock API call with 60s timeout..|
| 1764193904622 | 2025-11-26T21:51:44.622Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO bedrockClient.send() completed successfully|
| 1764193904622 | 2025-11-26T21:51:44.622Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response received from Bedrock|
| 1764193904622 | 2025-11-26T21:51:44.622Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response metadata: {   httpStatusCode: 200,   requestId: '2db43a6b-8f8d-4159-bd44-d5537aee1171',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193904622 | 2025-11-26T21:51:44.622Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: { text: "Diving deep into your morning's epic session!" } }|
| 1764193904622 | 2025-11-26T21:51:44.622Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Successfully extracted response text, length: 45|
| 1764193904622 | 2025-11-26T21:51:44.622Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üèãÔ∏è Workout intent detected but insufficient data - starting multi-turn collection|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üèãÔ∏è Starting new workout collection session|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üÜï NEW WORKOUT SESSION CREATED: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193904623',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   hasImages: false }|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚ú® Handling workout to-do list conversation|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üìä Turn 1 of workout collection|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîç Extracting workout information from user response|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO === BEDROCK API CALL START ===|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO AWS Region: us-west-2|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO System prompt length: 5456|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO User message length: 1312|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Thinking enabled: false|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Converse command created successfully..|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO About to call bedrockClient.send()...|
| 1764193904623 | 2025-11-26T21:51:44.623Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Starting Bedrock API call with 60s timeout..|
| 1764193906757 | 2025-11-26T21:51:46.757Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO bedrockClient.send() completed successfully|
| 1764193906757 | 2025-11-26T21:51:46.757Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response received from Bedrock|
| 1764193906757 | 2025-11-26T21:51:46.757Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'b38d5edc-5133-4924-aa38-c1ecb0d46cf7',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193906757 | 2025-11-26T21:51:46.757Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_3oFHP7wlRSeKOrv5C9d1Vw',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764193906758 | 2025-11-26T21:51:46.758Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîß Tool use requested, extracting tool result|
| 1764193906758 | 2025-11-26T21:51:46.758Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Received extraction response|
| 1764193906758 | 2025-11-26T21:51:46.758Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Tool-based extraction successful|
| 1764193906758 | 2025-11-26T21:51:46.758Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Extracted workoutDate: "today"|
| 1764193906758 | 2025-11-26T21:51:46.758Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Extraction complete: 1 fields updated|
| 1764193906758 | 2025-11-26T21:51:46.758Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 1,   progress: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedData: { workoutDate: 'today' } }|
| 1764193906758 | 2025-11-26T21:51:46.758Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764193906758 | 2025-11-26T21:51:46.758Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üéØ Generating next workout creator question (streaming) { turnCount: 1 }|
| 1764193906759 | 2025-11-26T21:51:46.759Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO === BEDROCK STREAMING API CALL START ===|
| 1764193906759 | 2025-11-26T21:51:46.759Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO AWS Region: us-west-2|
| 1764193906759 | 2025-11-26T21:51:46.759Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193906759 | 2025-11-26T21:51:46.759Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO System prompt length: 2587|
| 1764193906759 | 2025-11-26T21:51:46.759Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO User message length: 60|
| 1764193906759 | 2025-11-26T21:51:46.759Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Thinking enabled: false|
| 1764193906759 | 2025-11-26T21:51:46.759Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Converse stream command created successfully..|
| 1764193907539 | 2025-11-26T21:51:47.539Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Stream response received from Bedrock|
| 1764193907817 | 2025-11-26T21:51:47.817Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764193907818 | 2025-11-26T21:51:47.818Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO Stream complete. Total response length: 99|
| 1764193907818 | 2025-11-26T21:51:47.818Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Question generation streaming complete|
| 1764193907818 | 2025-11-26T21:51:47.818Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Response generated and streamed|
| 1764193907818 | 2025-11-26T21:51:47.818Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚öôÔ∏è Finalizing session state|
| 1764193907818 | 2025-11-26T21:51:47.818Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 17,   todoProgress: '1/6 required items',   recommendedStatus: 'not applicable' }|
| 1764193907818 | 2025-11-26T21:51:47.818Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üìã TODO LIST BEFORE RETURN: {   turn: 1,   isComplete: false,   progress: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedData: { workoutDate: 'today' } }|
| 1764193907818 | 2025-11-26T21:51:47.818Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üìä SESSION STATE AFTER HANDLER (startWorkoutCollection): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193904623',   turnCount: 1,   isComplete: false,   progress: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedData: { workoutDate: 'today' } }|
| 1764193907818 | 2025-11-26T21:51:47.818Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764193907879 | 2025-11-26T21:51:47.879Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Workout collection session started|
| 1764193907880 | 2025-11-26T21:51:47.880Z a9528f12-3673-444c-ada1-70844c6c3c31 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764193907881 | END RequestId: a9528f12-3673-444c-ada1-70844c6c3c31|
| 1764193907881 | REPORT RequestId: a9528f12-3673-444c-ada1-70844c6c3c31 Duration: 9638.78 ms Billed Duration: 9639 ms Memory Size: 2048 MB Max Memory Used: 182 MB|
| 1764193950150 | START RequestId: 61f1c4af-193e-46e2-ad23-b1f8f5982439 Version: $LATEST|
| 1764193950151 | 2025-11-26T21:52:30.151Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764193950151 | 2025-11-26T21:52:30.151Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764193950151 | 2025-11-26T21:52:30.151Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193950151 | 2025-11-26T21:52:30.151Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764193950151 | 2025-11-26T21:52:30.151Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764193950151 | 2025-11-26T21:52:30.151Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764193950152 | 2025-11-26T21:52:30.152Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üì° Yielded start event immediately|
| 1764193950152 | 2025-11-26T21:52:30.152Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üì° Yielded coach acknowledgment (contextual): "Let's tackle this."|
| 1764193950152 | 2025-11-26T21:52:30.152Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193950152 | 2025-11-26T21:52:30.152Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764193950152 | 2025-11-26T21:52:30.152Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 97,   imageCount: 0 }|
| 1764193950152 | 2025-11-26T21:52:30.152Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764193950158 | 2025-11-26T21:52:30.158Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO user data loaded from DynamoDB successfully|
| 1764193950158 | 2025-11-26T21:52:30.158Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193950158 | 2025-11-26T21:52:30.158Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764193950158 | 2025-11-26T21:52:30.158Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 97,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193950158 | 2025-11-26T21:52:30.158Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO === BEDROCK API CALL START ===|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO AWS Region: us-west-2|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO System prompt length: 18071|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO User message length: 226|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Thinking enabled: false|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üéØ Response prefilling enabled: {|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Converse command created successfully..|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO About to call bedrockClient.send()...|
| 1764193950159 | 2025-11-26T21:52:30.159Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Starting Bedrock API call with 60s timeout..|
| 1764193950167 | 2025-11-26T21:52:30.167Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO coachConfig data loaded from DynamoDB successfully|
| 1764193950172 | 2025-11-26T21:52:30.172Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO coachConversation data loaded from DynamoDB successfully|
| 1764193955164 | 2025-11-26T21:52:35.164Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO HEARTBEAT: Lambda still running, waiting for Bedrock response..|
| 1764193955951 | 2025-11-26T21:52:35.951Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO bedrockClient.send() completed successfully|
| 1764193955951 | 2025-11-26T21:52:35.951Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Response received from Bedrock|
| 1764193955951 | 2025-11-26T21:52:35.951Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'd6f06c00-fd61-4df8-99ea-31a8cdc67a5b',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193955951 | 2025-11-26T21:52:35.951Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "workout_logging",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": true,\n' +'"confidence": 0.98,\n' +'"workoutType": "crossfit",\n' +`"reasoning": "Clear past tense completion ('i did'), specific workout structure (8 rounds, EMOM format), concrete details (weights, exercises, reps)"\n` +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "Pure workout logging, no memory save needed. Handled by workout logging system"\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "New conversation, no historical context needed for logging this completed workout"\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Straightforward workout log with no emotional, goal, or analytical complexity indicators"\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": true,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.98,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764193955951 | 2025-11-26T21:52:35.951Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1236, newLength: 1237 }|
| 1764193955951 | 2025-11-26T21:52:35.951Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Successfully extracted response text, length: 1237|
| 1764193955951 | 2025-11-26T21:52:35.951Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193955953 | 2025-11-26T21:52:35.953Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: true,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 5795,   confidence: 0.98 }|
| 1764193955953 | 2025-11-26T21:52:35.953Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Parallel data loading completed in 5795ms|
| 1764193955953 | 2025-11-26T21:52:35.953Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764193955953 | 2025-11-26T21:52:35.953Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764193956807 | 2025-11-26T21:52:36.807Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO workout data queried from DynamoDB successfully|
| 1764193956827 | 2025-11-26T21:52:36.827Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 105,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...'   ] }|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üß† Smart Router Analysis: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: true,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 5795,   fallbackUsed: false }|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'i did the following workout:\n8 rounds\nMin 1: 6 ben',   hasMatch: false,   matchGroups: 0 }|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üèãÔ∏è Continuing workout collection session|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193956828',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 1,   hasImages: false,   progressBefore: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: { workoutDate: 'today' } }|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚ú® Handling workout to-do list conversation|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üìä Turn 2 of workout collection|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîç Extracting workout information from user response|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO === BEDROCK API CALL START ===|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO AWS Region: us-west-2|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO System prompt length: 5443|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO User message length: 1563|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Thinking enabled: false|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193956828 | 2025-11-26T21:52:36.828Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193956829 | 2025-11-26T21:52:36.829Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Converse command created successfully..|
| 1764193956829 | 2025-11-26T21:52:36.829Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO About to call bedrockClient.send()...|
| 1764193956829 | 2025-11-26T21:52:36.829Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Starting Bedrock API call with 60s timeout..|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO bedrockClient.send() completed successfully|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Response received from Bedrock|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Response metadata: {   httpStatusCode: 200,   requestId: '21d21929-553e-4d5d-a3a4-f29d45d6c328',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_hEgpdIjPRqGPduO3p5u4xg',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîß Tool use requested, extracting tool result|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Received extraction response|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Tool-based extraction successful|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Extracted exercises: "bench press, pull-ups, double unders"|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Extracted setsOrRounds: 8|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Extracted repsOrTime: "Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 3|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Extracted weights: "205lbs bench press"|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Extracted workoutType: "EMOM (Every Minute on the Minute)"|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Extracted discipline: "crossfit"|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Extracted workoutDate: "today"|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Extraction complete: 7 fields updated|
| 1764193960116 | 2025-11-26T21:52:40.116Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 2,   progress: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764193960117 | 2025-11-26T21:52:40.117Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764193960117 | 2025-11-26T21:52:40.117Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üéØ Generating next workout creator question (streaming) { turnCount: 2 }|
| 1764193960117 | 2025-11-26T21:52:40.117Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO === BEDROCK STREAMING API CALL START ===|
| 1764193960117 | 2025-11-26T21:52:40.117Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO AWS Region: us-west-2|
| 1764193960117 | 2025-11-26T21:52:40.117Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193960117 | 2025-11-26T21:52:40.117Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO System prompt length: 2764|
| 1764193960117 | 2025-11-26T21:52:40.117Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO User message length: 270|
| 1764193960117 | 2025-11-26T21:52:40.117Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Thinking enabled: false|
| 1764193960117 | 2025-11-26T21:52:40.117Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Converse stream command created successfully..|
| 1764193960885 | 2025-11-26T21:52:40.885Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Stream response received from Bedrock|
| 1764193961416 | 2025-11-26T21:52:41.416Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764193961416 | 2025-11-26T21:52:41.416Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO Stream complete. Total response length: 137|
| 1764193961416 | 2025-11-26T21:52:41.416Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Question generation streaming complete|
| 1764193961416 | 2025-11-26T21:52:41.416Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Response generated and streamed|
| 1764193961416 | 2025-11-26T21:52:41.416Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚öôÔ∏è Finalizing session state|
| 1764193961416 | 2025-11-26T21:52:41.416Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 83,   todoProgress: '5/6 required items',   recommendedStatus: 'not applicable' }|
| 1764193961416 | 2025-11-26T21:52:41.416Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üìã TODO LIST BEFORE RETURN: {   turn: 2,   isComplete: false,   progress: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764193961417 | 2025-11-26T21:52:41.417Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193956828',   turnCount: 2,   isComplete: false,   progressAfter: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedDataAfter: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764193961417 | 2025-11-26T21:52:41.417Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764193961446 | 2025-11-26T21:52:41.446Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Workout collection flow completed|
| 1764193961458 | 2025-11-26T21:52:41.458Z 61f1c4af-193e-46e2-ad23-b1f8f5982439 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764193961459 | END RequestId: 61f1c4af-193e-46e2-ad23-b1f8f5982439|
| 1764193961459 | REPORT RequestId: 61f1c4af-193e-46e2-ad23-b1f8f5982439 Duration: 11309.25 ms Billed Duration: 11310 ms Memory Size: 2048 MB Max Memory Used: 182 MB|
| 1764193985643 | START RequestId: c9341c34-622a-4810-8d0c-d3376a6dcbe6 Version: $LATEST|
| 1764193985646 | 2025-11-26T21:53:05.646Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764193985647 | 2025-11-26T21:53:05.647Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764193985647 | 2025-11-26T21:53:05.647Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193985647 | 2025-11-26T21:53:05.647Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764193985647 | 2025-11-26T21:53:05.647Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764193985647 | 2025-11-26T21:53:05.647Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764193985647 | 2025-11-26T21:53:05.647Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üì° Yielded start event immediately|
| 1764193985647 | 2025-11-26T21:53:05.647Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üì° Yielded coach acknowledgment (contextual): "I hear you."|
| 1764193985647 | 2025-11-26T21:53:05.647Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764193985648 | 2025-11-26T21:53:05.648Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764193985648 | 2025-11-26T21:53:05.648Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 92,   imageCount: 0 }|
| 1764193985648 | 2025-11-26T21:53:05.648Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764193985653 | 2025-11-26T21:53:05.653Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO user data loaded from DynamoDB successfully|
| 1764193985653 | 2025-11-26T21:53:05.653Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193985653 | 2025-11-26T21:53:05.653Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 92,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO === BEDROCK API CALL START ===|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO AWS Region: us-west-2|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO System prompt length: 18071|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO User message length: 221|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Thinking enabled: false|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193985654 | 2025-11-26T21:53:05.654Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üéØ Response prefilling enabled: {|
| 1764193985655 | 2025-11-26T21:53:05.655Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Converse command created successfully..|
| 1764193985655 | 2025-11-26T21:53:05.655Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO About to call bedrockClient.send()...|
| 1764193985655 | 2025-11-26T21:53:05.655Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Starting Bedrock API call with 60s timeout..|
| 1764193985665 | 2025-11-26T21:53:05.665Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO coachConfig data loaded from DynamoDB successfully|
| 1764193985669 | 2025-11-26T21:53:05.669Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO coachConversation data loaded from DynamoDB successfully|
| 1764193990660 | 2025-11-26T21:53:10.660Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO HEARTBEAT: Lambda still running, waiting for Bedrock response..|
| 1764193992253 | 2025-11-26T21:53:12.253Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO bedrockClient.send() completed successfully|
| 1764193992253 | 2025-11-26T21:53:12.253Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Response received from Bedrock|
| 1764193992253 | 2025-11-26T21:53:12.253Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'b56a96bd-87ab-4b92-b5e5-8d46fbd1d2c1',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193992253 | 2025-11-26T21:53:12.253Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "workout_logging",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": true,\n' +'"confidence": 0.95,\n' +'"workoutType": "crossfit",\n' +`"reasoning": "Past tense completion ('I worked out', 'I completed'), specific time details (30 min total, 24 min for 8 rounds), structured workout format (8 rounds). Meets all three strict criteria."\n` +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "Workout performance data should not be saved as memory. Handled by workout logging system."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "No references to past workouts, progress comparison, or methodology questions. Straightforward workout logging without contextual dependencies."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.98,\n' +'"reasoning": "Simple workout log with time metrics. No emotional language, goal discussion, or coaching complexity. Straightforward performance reporting."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": true,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.96,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764193992254 | 2025-11-26T21:53:12.254Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1412, newLength: 1413 }|
| 1764193992254 | 2025-11-26T21:53:12.254Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Successfully extracted response text, length: 1413|
| 1764193992254 | 2025-11-26T21:53:12.254Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO === BEDROCK API CALL SUCCESS ===|
| 1764193992254 | 2025-11-26T21:53:12.254Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: true,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 6601,   confidence: 0.96 }|
| 1764193992254 | 2025-11-26T21:53:12.254Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Parallel data loading completed in 6601ms|
| 1764193992254 | 2025-11-26T21:53:12.254Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764193992254 | 2025-11-26T21:53:12.254Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764193993019 | 2025-11-26T21:53:13.019Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO workout data queried from DynamoDB successfully|
| 1764193993038 | 2025-11-26T21:53:13.038Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 105,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764193993038 | 2025-11-26T21:53:13.038Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...'   ] }|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üß† Smart Router Analysis: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: true,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 6601,   fallbackUsed: false }|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'Including warmup I worked out for 30 minutes. For ',   hasMatch: false,   matchGroups: 0 }|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üèãÔ∏è Continuing workout collection session|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193993039',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 2,   hasImages: false,   progressBefore: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚ú® Handling workout to-do list conversation|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üìä Turn 3 of workout collection|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîç Extracting workout information from user response|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO === BEDROCK API CALL START ===|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO AWS Region: us-west-2|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO System prompt length: 5443|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO User message length: 1799|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Thinking enabled: false|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Converse command created successfully..|
| 1764193993039 | 2025-11-26T21:53:13.039Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO About to call bedrockClient.send()...|
| 1764193993040 | 2025-11-26T21:53:13.040Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Starting Bedrock API call with 60s timeout..|
| 1764193994381 | 2025-11-26T21:53:14.381Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO bedrockClient.send() completed successfully|
| 1764193994381 | 2025-11-26T21:53:14.381Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Response received from Bedrock|
| 1764193994381 | 2025-11-26T21:53:14.381Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Response metadata: {   httpStatusCode: 200,   requestId: '97bdf4f6-50ca-42a2-bd8e-0d749e663c3f',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764193994381 | 2025-11-26T21:53:14.381Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_faGsHv_FQvS97pXMPjK3PA',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764193994381 | 2025-11-26T21:53:14.381Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîß Tool use requested, extracting tool result|
| 1764193994381 | 2025-11-26T21:53:14.381Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Received extraction response|
| 1764193994381 | 2025-11-26T21:53:14.381Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Tool-based extraction successful|
| 1764193994381 | 2025-11-26T21:53:14.381Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Extraction complete: 3 fields updated|
| 1764193994381 | 2025-11-26T21:53:14.381Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 3,   progress: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764193994382 | 2025-11-26T21:53:14.382Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764193994382 | 2025-11-26T21:53:14.382Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üéØ Generating next workout creator question (streaming) { turnCount: 3 }|
| 1764193994382 | 2025-11-26T21:53:14.382Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO === BEDROCK STREAMING API CALL START ===|
| 1764193994382 | 2025-11-26T21:53:14.382Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO AWS Region: us-west-2|
| 1764193994382 | 2025-11-26T21:53:14.382Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764193994382 | 2025-11-26T21:53:14.382Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO System prompt length: 2764|
| 1764193994382 | 2025-11-26T21:53:14.382Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO User message length: 451|
| 1764193994382 | 2025-11-26T21:53:14.382Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Thinking enabled: false|
| 1764193994382 | 2025-11-26T21:53:14.382Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Converse stream command created successfully..|
| 1764193995005 | 2025-11-26T21:53:15.005Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Stream response received from Bedrock|
| 1764193995706 | 2025-11-26T21:53:15.706Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764193995706 | 2025-11-26T21:53:15.706Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO Stream complete. Total response length: 233|
| 1764193995706 | 2025-11-26T21:53:15.706Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Question generation streaming complete|
| 1764193995706 | 2025-11-26T21:53:15.706Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Response generated and streamed|
| 1764193995706 | 2025-11-26T21:53:15.706Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚öôÔ∏è Finalizing session state|
| 1764193995706 | 2025-11-26T21:53:15.706Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 83,   todoProgress: '5/6 required items',   recommendedStatus: 'not applicable' }|
| 1764193995706 | 2025-11-26T21:53:15.706Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üìã TODO LIST BEFORE RETURN: {   turn: 3,   isComplete: false,   progress: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764193995706 | 2025-11-26T21:53:15.706Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764193993039',   turnCount: 3,   isComplete: false,   progressAfter: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedDataAfter: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764193995706 | 2025-11-26T21:53:15.706Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764193995722 | 2025-11-26T21:53:15.722Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Workout collection flow completed|
| 1764193995723 | 2025-11-26T21:53:15.723Z c9341c34-622a-4810-8d0c-d3376a6dcbe6 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764193995724 | END RequestId: c9341c34-622a-4810-8d0c-d3376a6dcbe6|
| 1764193995724 | REPORT RequestId: c9341c34-622a-4810-8d0c-d3376a6dcbe6 Duration: 10081.03 ms Billed Duration: 10082 ms Memory Size: 2048 MB Max Memory Used: 195 MB|
| 1764194009708 | START RequestId: f3b92cac-e65d-4ad4-a085-f4e8e3174194 Version: $LATEST|
| 1764194009709 | 2025-11-26T21:53:29.709Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764194009709 | 2025-11-26T21:53:29.709Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764194009709 | 2025-11-26T21:53:29.709Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764194009709 | 2025-11-26T21:53:29.709Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764194009709 | 2025-11-26T21:53:29.709Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764194009709 | 2025-11-26T21:53:29.709Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764194009710 | 2025-11-26T21:53:29.710Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üì° Yielded start event immediately|
| 1764194009710 | 2025-11-26T21:53:29.710Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üì° Yielded coach acknowledgment (contextual): "Let's figure this out."|
| 1764194009710 | 2025-11-26T21:53:29.710Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764194009710 | 2025-11-26T21:53:29.710Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764194009710 | 2025-11-26T21:53:29.710Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 33,   imageCount: 0 }|
| 1764194009710 | 2025-11-26T21:53:29.710Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764194009715 | 2025-11-26T21:53:29.715Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO user data loaded from DynamoDB successfully|
| 1764194009715 | 2025-11-26T21:53:29.715Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764194009715 | 2025-11-26T21:53:29.715Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764194009715 | 2025-11-26T21:53:29.715Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 33,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764194009715 | 2025-11-26T21:53:29.715Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO === BEDROCK API CALL START ===|
| 1764194009715 | 2025-11-26T21:53:29.715Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO AWS Region: us-west-2|
| 1764194009715 | 2025-11-26T21:53:29.715Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194009715 | 2025-11-26T21:53:29.715Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO System prompt length: 18071|
| 1764194009715 | 2025-11-26T21:53:29.715Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO User message length: 162|
| 1764194009715 | 2025-11-26T21:53:29.715Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Thinking enabled: false|
| 1764194009716 | 2025-11-26T21:53:29.716Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764194009716 | 2025-11-26T21:53:29.716Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764194009716 | 2025-11-26T21:53:29.716Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764194009716 | 2025-11-26T21:53:29.716Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764194009716 | 2025-11-26T21:53:29.716Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üéØ Response prefilling enabled: {|
| 1764194009716 | 2025-11-26T21:53:29.716Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Converse command created successfully..|
| 1764194009716 | 2025-11-26T21:53:29.716Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO About to call bedrockClient.send()...|
| 1764194009716 | 2025-11-26T21:53:29.716Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Starting Bedrock API call with 60s timeout..|
| 1764194009725 | 2025-11-26T21:53:29.725Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO coachConfig data loaded from DynamoDB successfully|
| 1764194009730 | 2025-11-26T21:53:29.730Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO coachConversation data loaded from DynamoDB successfully|
| 1764194012874 | 2025-11-26T21:53:32.874Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO bedrockClient.send() completed successfully|
| 1764194012874 | 2025-11-26T21:53:32.874Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Response received from Bedrock|
| 1764194012874 | 2025-11-26T21:53:32.874Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Response metadata: {   httpStatusCode: 200,   requestId: '913ebecd-97c5-4f75-8e4d-cbf96aa43c38',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764194012874 | 2025-11-26T21:53:32.874Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "progress_check",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +'"reasoning": "No past tense completion language or specific workout details. Only RPE/intensity metrics without workout context."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "User is providing feedback on a workout, not requesting memory storage or retrieval. Context suggests continuation of prior conversation."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": true,\n' +'"searchTypes": ["workouts"],\n' +'"reasoning": "Message references intensity/RPE metrics but lacks workout context. Search needed to understand which workout is being discussed."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.85,\n' +'"reasoning": "Simple metric feedback without emotional language, goals, or major changes. Straightforward coaching context."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": true\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.72,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764194012875 | 2025-11-26T21:53:32.875Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1347, newLength: 1348 }|
| 1764194012875 | 2025-11-26T21:53:32.875Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Successfully extracted response text, length: 1348|
| 1764194012875 | 2025-11-26T21:53:32.875Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO === BEDROCK API CALL SUCCESS ===|
| 1764194012875 | 2025-11-26T21:53:32.875Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'progress_check',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: true,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 3160,   confidence: 0.72 }|
| 1764194012875 | 2025-11-26T21:53:32.875Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Parallel data loading completed in 3160ms|
| 1764194012875 | 2025-11-26T21:53:32.875Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç Router approved Pinecone search - loading conversation context|
| 1764194012875 | 2025-11-26T21:53:32.875Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764194013619 | 2025-11-26T21:53:33.619Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO workout data queried from DynamoDB successfully|
| 1764194013630 | 2025-11-26T21:53:33.630Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 105,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764194013631 | 2025-11-26T21:53:33.631Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...'   ] }|
| 1764194013636 | 2025-11-26T21:53:33.636Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç Querying Pinecone for semantic context (decision: smart-router): {   userId: '63gocaz-j-AYRsb0094ik',   userMessageLength: 33,   messagePreview: 'My intensity was 6 and rpe was 6....' }|
| 1764194013637 | 2025-11-26T21:53:33.637Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîß DEBUG: Pinecone configuration: {   indexName: 'coach-creator-proto-v1-dev',   apiKeySet: true,   apiKeyLength: 75,   apiKeyPrefix: 'pcsk_4tHp6N_',   apiKeyIsPlaceholder: false,   environment: 'unknown',   envPineconeKey: 'SET',   envPineconeKeyLength: 75 }|
| 1764194013639 | 2025-11-26T21:53:33.639Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîß About to query Pinecone: {   namespace: 'user_63gocaz-j-AYRsb0094ik',   userId: '63gocaz-j-AYRsb0094ik',   indexName: 'coach-creator-proto-v1-dev',   rerankingEnabled: true,   finalTopK: 6 }|
| 1764194013639 | 2025-11-26T21:53:33.639Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Querying user namespace: {   indexName: 'coach-creator-proto-v1-dev',   namespace: 'user_63gocaz-j-AYRsb0094ik',   userId: '63gocaz-j-AYRsb0094ik',   userMessageLength: 33,   topK: 30,   recordTypes: ['workout_summary','coach_creator_summary','conversation_summary'   ] }|
| 1764194013640 | 2025-11-26T21:53:33.640Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç Querying methodology namespace: {   userMessage: 'My intensity was 6 and rpe was 6.',   topK: 30,   namespace: 'methodology' }|
| 1764194014198 | 2025-11-26T21:53:34.198Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ User namespace query successful: { matches: 30 }|
| 1764194014438 | 2025-11-26T21:53:34.438Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Methodology query successful: { originalHits: 30, matches: 30 }|
| 1764194014438 | 2025-11-26T21:53:34.438Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç Retrieved initial Pinecone matches: {   userMatches: 30,   methodologyMatches: 30,   totalMatches: 60,   queryTopK: 30,   willRerank: true }|
| 1764194014438 | 2025-11-26T21:53:34.438Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Processing Pinecone results: {   totalMatches: 60,   targetTopK: 6,   minScore: 0.7,   rerankingEnabled: true,   hasQuery: true }|
| 1764194014440 | 2025-11-26T21:53:34.440Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîÑ Applying reranking: { originalCount: 60, rerankingCount: 30, targetFinalCount: 8 }|
| 1764194014440 | 2025-11-26T21:53:34.440Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîß DEBUG: Pinecone configuration: {   indexName: 'coach-creator-proto-v1-dev',   apiKeySet: true,   apiKeyLength: 75,   apiKeyPrefix: 'pcsk_4tHp6N_',   apiKeyIsPlaceholder: false,   environment: 'unknown',   envPineconeKey: 'SET',   envPineconeKeyLength: 75 }|
| 1764194014440 | 2025-11-26T21:53:34.440Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîÑ Starting reranking process: {   originalMatches: 30,   documentsExtracted: 30,   queryLength: 33,   targetTopN: 8,   model: 'pinecone-rerank-v0',   firstMatchFields: [{index: 0,id: 'workout_63gocaz-j-AYRsb0094ik_1762114962598_f1b2f66l8',hasText: true,hasContent: true,hasMetadataText: true,hasMetadataContent: false,textLength: 324,contentLength: 324,metadataTextLength: 324,documentLength: 324},{index: 1,id: 'workout_63gocaz-j-AYRsb0094ik_1762114678818_m1ndtwq3h',hasText: true,hasContent: true,hasMetadataText: true,hasMetadataContent: false,textLength: 427,contentLength: 427,metadataTextLength: 427,documentLength: 427}   ] }|
| 1764194015488 | 2025-11-26T21:53:35.488Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Reranking successful: {   originalCount: 30,   rerankedCount: 8,   avgOriginalScore: 0.31820492446422577,   avgRerankScore: 0.0008754559087500001 }|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Successfully processed Pinecone results: {   indexName: 'coach-creator-proto-v1-dev',   userId: '63gocaz-j-AYRsb0094ik',   totalMatches: 60,   processedMatches: 8,   relevantMatches: 0,   finalMinScore: 0.3,   wasReranked: true,   wasNormalized: true,   methodologyMatches: 0,   userMatches: 0 }|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üì≠ No relevant Pinecone context found: { success: true, totalMatches: 60 }|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Pinecone context loaded in 2614ms|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üß† Smart Router Analysis: {   userIntent: 'progress_check',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: true,   pineconeSearchUsed: true,   hasComplexity: false,   processingTime: 3160,   fallbackUsed: false }|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'My intensity was 6 and rpe was 6.',   hasMatch: false,   matchGroups: 0 }|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üèãÔ∏è Continuing workout collection session|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764194015489',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 3,   hasImages: false,   progressBefore: {required: '5/6 (83%)',highPriority: '2/5 (40%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: {repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚ú® Handling workout to-do list conversation|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üìä Turn 4 of workout collection|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîç Extracting workout information from user response|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO === BEDROCK API CALL START ===|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO AWS Region: us-west-2|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO System prompt length: 5443|
| 1764194015489 | 2025-11-26T21:53:35.489Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO User message length: 2018|
| 1764194015490 | 2025-11-26T21:53:35.490Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Thinking enabled: false|
| 1764194015490 | 2025-11-26T21:53:35.490Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764194015490 | 2025-11-26T21:53:35.490Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764194015490 | 2025-11-26T21:53:35.490Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Converse command created successfully..|
| 1764194015490 | 2025-11-26T21:53:35.490Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO About to call bedrockClient.send()...|
| 1764194015490 | 2025-11-26T21:53:35.490Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Starting Bedrock API call with 60s timeout..|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO bedrockClient.send() completed successfully|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Response received from Bedrock|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Response metadata: {   httpStatusCode: 200,   requestId: '2d94f1f6-00fa-4457-82d9-e52e3733be01',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_B2iF303HT5aXUtBVjC3FIg',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîß Tool use requested, extracting tool result|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Received extraction response|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Tool-based extraction successful|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Extracted intensity: 6|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Extracted rpe: 6|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Extraction complete: 2 fields updated|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 4,   progress: {required: '5/6 (83%)',highPriority: '4/5 (80%)',lowPriority: '0/9 (0%)'   },   collectedData: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üéØ Generating next workout creator question (streaming) { turnCount: 4 }|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO === BEDROCK STREAMING API CALL START ===|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO AWS Region: us-west-2|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO System prompt length: 2855|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO User message length: 521|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Thinking enabled: false|
| 1764194016666 | 2025-11-26T21:53:36.666Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Converse stream command created successfully..|
| 1764194017499 | 2025-11-26T21:53:37.499Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Stream response received from Bedrock|
| 1764194018442 | 2025-11-26T21:53:38.442Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764194018442 | 2025-11-26T21:53:38.442Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO Stream complete. Total response length: 203|
| 1764194018442 | 2025-11-26T21:53:38.442Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Question generation streaming complete|
| 1764194018442 | 2025-11-26T21:53:38.442Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Response generated and streamed|
| 1764194018442 | 2025-11-26T21:53:38.442Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚öôÔ∏è Finalizing session state|
| 1764194018442 | 2025-11-26T21:53:38.442Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 83,   todoProgress: '5/6 required items',   recommendedStatus: 'not applicable' }|
| 1764194018442 | 2025-11-26T21:53:38.442Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üìã TODO LIST BEFORE RETURN: {   turn: 4,   isComplete: false,   progress: {required: '5/6 (83%)',highPriority: '4/5 (80%)',lowPriority: '0/9 (0%)'   },   collectedData: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764194018442 | 2025-11-26T21:53:38.442Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764194015489',   turnCount: 4,   isComplete: false,   progressAfter: {required: '5/6 (83%)',highPriority: '4/5 (80%)',lowPriority: '0/9 (0%)'   },   collectedDataAfter: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764194018442 | 2025-11-26T21:53:38.442Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764194018458 | 2025-11-26T21:53:38.458Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Workout collection flow completed|
| 1764194018459 | 2025-11-26T21:53:38.459Z f3b92cac-e65d-4ad4-a085-f4e8e3174194 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764194018461 | END RequestId: f3b92cac-e65d-4ad4-a085-f4e8e3174194|
| 1764194018461 | REPORT RequestId: f3b92cac-e65d-4ad4-a085-f4e8e3174194 Duration: 8752.68 ms Billed Duration: 8753 ms Memory Size: 2048 MB Max Memory Used: 212 MB|
| 1764194031456 | START RequestId: 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c Version: $LATEST|
| 1764194031457 | 2025-11-26T21:53:51.457Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764194031457 | 2025-11-26T21:53:51.457Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764194031457 | 2025-11-26T21:53:51.457Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764194031457 | 2025-11-26T21:53:51.457Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764194031457 | 2025-11-26T21:53:51.457Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764194031457 | 2025-11-26T21:53:51.457Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764194031458 | 2025-11-26T21:53:51.458Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üì° Yielded start event immediately|
| 1764194031458 | 2025-11-26T21:53:51.458Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üì° Yielded coach acknowledgment (contextual): "Let's dive in."|
| 1764194031458 | 2025-11-26T21:53:51.458Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764194031458 | 2025-11-26T21:53:51.458Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764194031458 | 2025-11-26T21:53:51.458Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 40,   imageCount: 0 }|
| 1764194031458 | 2025-11-26T21:53:51.458Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764194031463 | 2025-11-26T21:53:51.463Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO user data loaded from DynamoDB successfully|
| 1764194031463 | 2025-11-26T21:53:51.463Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764194031463 | 2025-11-26T21:53:51.463Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764194031463 | 2025-11-26T21:53:51.463Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üß† Smart Router analyzing request capabilities: {   messageLength: 40,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO === BEDROCK API CALL START ===|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO AWS Region: us-west-2|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO System prompt length: 18071|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO User message length: 169|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Thinking enabled: false|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Bedrock client config: { region: 'us-west-2' }|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üéØ Response prefilling enabled: {|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Converse command created successfully..|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO About to call bedrockClient.send()...|
| 1764194031464 | 2025-11-26T21:53:51.464Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Starting Bedrock API call with 60s timeout..|
| 1764194031473 | 2025-11-26T21:53:51.473Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO coachConfig data loaded from DynamoDB successfully|
| 1764194031480 | 2025-11-26T21:53:51.480Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO coachConversation data loaded from DynamoDB successfully|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO bedrockClient.send() completed successfully|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Response received from Bedrock|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Response metadata: {   httpStatusCode: 200,   requestId: '540ee872-29fa-4abf-9ef7-20eefa090ac7',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "workout_logging",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +`"reasoning": "Past tense completion present ('I did') but lacks specific workout content. No exercises, weights, reps, times, distances, or named workouts. Too vague to constitute a loggable workout."\n` +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "No explicit memory request. Could note location preference but insufficient context to determine if this is a pattern worth saving."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "Message lacks specificity needed for meaningful context search. No performance data, methodology questions, or historical references."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Simple statement without emotional depth, goal discussion, or coaching implications. Requires clarification before meaningful analysis."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.25,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1435, newLength: 1436 }|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Successfully extracted response text, length: 1436|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO === BEDROCK API CALL SUCCESS ===|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 3891,   confidence: 0.25 }|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Parallel data loading completed in 3891ms|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764194035354 | 2025-11-26T21:53:55.354Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764194036117 | 2025-11-26T21:53:56.117Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO workout data queried from DynamoDB successfully|
| 1764194036128 | 2025-11-26T21:53:56.128Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 105,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764194036128 | 2025-11-26T21:53:56.128Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...'   ] }|
| 1764194036128 | 2025-11-26T21:53:56.128Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764194036128 | 2025-11-26T21:53:56.128Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üß† Smart Router Analysis: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 3891,   fallbackUsed: false }|
| 1764194036128 | 2025-11-26T21:53:56.128Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'I did the workout in my home garage gym.',   hasMatch: false,   matchGroups: 0 }|
| 1764194036128 | 2025-11-26T21:53:56.128Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764194036128 | 2025-11-26T21:53:56.128Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764194036136 | 2025-11-26T21:53:56.136Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üèãÔ∏è Continuing workout collection session|
| 1764194036136 | 2025-11-26T21:53:56.136Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764194036136',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 4,   hasImages: false,   progressBefore: {required: '5/6 (83%)',highPriority: '4/5 (80%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: {rpe: 6,repsOrTime: 'Min 1: 6 bench press, Min 2: 6 pull-ups, Min 3: 30 DUs',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press',intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM (Every Minute on the Minute)',workoutDate: 'today'   } }|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚ú® Handling workout to-do list conversation|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üìä Turn 5 of workout collection|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîç Extracting workout information from user response|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO === BEDROCK API CALL START ===|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO AWS Region: us-west-2|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO System prompt length: 5443|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO User message length: 2280|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Thinking enabled: false|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Bedrock client config: { region: 'us-west-2' }|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Converse command created successfully..|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO About to call bedrockClient.send()...|
| 1764194036137 | 2025-11-26T21:53:56.137Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Starting Bedrock API call with 60s timeout..|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO bedrockClient.send() completed successfully|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Response received from Bedrock|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Response metadata: {   httpStatusCode: 200,   requestId: '8a06d849-451b-4c73-ae98-4d0083d528db',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_jNrJydYoTa2JIJzp8l6NXw',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîß Tool use requested, extracting tool result|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Received extraction response|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Tool-based extraction successful|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted exercises: "bench press, pull-ups, double unders"|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted setsOrRounds: 8|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted repsOrTime: "6 reps bench press, 6 reps pull-ups, 30 reps doub|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted workoutDate: "today"|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted discipline: "crossfit"|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted weights: "205lbs bench press, bodyweight pull-ups"|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted workoutType: "EMOM"|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted duration: 24|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted sessionDuration: 30|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted intensity: 6|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted rpe: 6|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extracted location: "home garage gym"|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Extraction complete: 12 fields updated|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 5,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '1/9 (11%)'   },   collectedData: {rpe: 6,repsOrTime: '6 reps bench press, 6 reps pull-ups, 30 reps double unders per round',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press, bodyweight pull-ups',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üéØ Generating next workout creator question (streaming) { turnCount: 5 }|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO === BEDROCK STREAMING API CALL START ===|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO AWS Region: us-west-2|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO System prompt length: 4081|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO User message length: 535|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Thinking enabled: false|
| 1764194040565 | 2025-11-26T21:54:00.565Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Converse stream command created successfully..|
| 1764194041171 | 2025-11-26T21:54:01.171Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Stream response received from Bedrock|
| 1764194042632 | 2025-11-26T21:54:02.632Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764194042632 | 2025-11-26T21:54:02.632Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO Stream complete. Total response length: 477|
| 1764194042632 | 2025-11-26T21:54:02.632Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Question generation streaming complete|
| 1764194042632 | 2025-11-26T21:54:02.632Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Response generated and streamed|
| 1764194042632 | 2025-11-26T21:54:02.632Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚öôÔ∏è Finalizing session state|
| 1764194042632 | 2025-11-26T21:54:02.632Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: true,   progress: 100,   todoProgress: '6/6 required items',   recommendedStatus: 'asking for optional fields' }|
| 1764194042632 | 2025-11-26T21:54:02.632Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üìã TODO LIST BEFORE RETURN: {   turn: 5,   isComplete: false,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '1/9 (11%)'   },   collectedData: {rpe: 6,repsOrTime: '6 reps bench press, 6 reps pull-ups, 30 reps double unders per round',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press, bodyweight pull-ups',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764194042632 | 2025-11-26T21:54:02.632Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764194036136',   turnCount: 5,   isComplete: false,   progressAfter: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '1/9 (11%)'   },   collectedDataAfter: {rpe: 6,repsOrTime: '6 reps bench press, 6 reps pull-ups, 30 reps double unders per round',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press, bodyweight pull-ups',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764194042632 | 2025-11-26T21:54:02.632Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764194042649 | 2025-11-26T21:54:02.649Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Workout collection flow completed|
| 1764194042650 | 2025-11-26T21:54:02.650Z 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c INFO ‚úÖ Streaming pipeline completed successfully|
| 1764194042651 | END RequestId: 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c|
| 1764194042651 | REPORT RequestId: 5ed23ffa-3eb1-40eb-a79e-f2daad163b7c Duration: 11195.05 ms Billed Duration: 11196 ms Memory Size: 2048 MB Max Memory Used: 247 MB|
| 1764194053311 | START RequestId: ea072bd2-327c-44a9-b00d-a8f556826651 Version: $LATEST|
| 1764194053313 | 2025-11-26T21:54:13.313Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764194053313 | 2025-11-26T21:54:13.313Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764194053313 | 2025-11-26T21:54:13.313Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764194053316 | 2025-11-26T21:54:13.316Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764194053316 | 2025-11-26T21:54:13.316Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764194053316 | 2025-11-26T21:54:13.316Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764194053316 | 2025-11-26T21:54:13.316Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üì° Yielded start event immediately|
| 1764194053316 | 2025-11-26T21:54:13.316Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üì° Yielded coach acknowledgment (contextual): "Got it, let's go."|
| 1764194053317 | 2025-11-26T21:54:13.317Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764194053317 | 2025-11-26T21:54:13.317Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764194053317 | 2025-11-26T21:54:13.317Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 34,   imageCount: 0 }|
| 1764194053317 | 2025-11-26T21:54:13.317Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO user data loaded from DynamoDB successfully|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 34,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO === BEDROCK API CALL START ===|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO AWS Region: us-west-2|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO System prompt length: 18071|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO User message length: 163|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Thinking enabled: false|
| 1764194053322 | 2025-11-26T21:54:13.322Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764194053323 | 2025-11-26T21:54:13.323Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764194053323 | 2025-11-26T21:54:13.323Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764194053323 | 2025-11-26T21:54:13.323Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764194053323 | 2025-11-26T21:54:13.323Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üéØ Response prefilling enabled: {|
| 1764194053323 | 2025-11-26T21:54:13.323Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Converse command created successfully..|
| 1764194053323 | 2025-11-26T21:54:13.323Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO About to call bedrockClient.send()...|
| 1764194053323 | 2025-11-26T21:54:13.323Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Starting Bedrock API call with 60s timeout..|
| 1764194053332 | 2025-11-26T21:54:13.332Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO coachConfig data loaded from DynamoDB successfully|
| 1764194053352 | 2025-11-26T21:54:13.352Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO coachConversation data loaded from DynamoDB successfully|
| 1764194056760 | 2025-11-26T21:54:16.760Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO bedrockClient.send() completed successfully|
| 1764194056760 | 2025-11-26T21:54:16.760Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Response received from Bedrock|
| 1764194056760 | 2025-11-26T21:54:16.760Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'b80c247e-106f-4a15-8864-cb7fb3b5d8ea',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764194056760 | 2025-11-26T21:54:16.760Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "general",\n' +'  "showContextualUpdates": false,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.0,\n' +'"workoutType": null,\n' +'"reasoning": "No past-tense workout completion, no specific workout content, no logging intent. Sleep report is general health information, not exercise."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "User is reporting sleep data, not requesting memory storage or retrieval. No explicit save intent or memory-related language present."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "Sleep report requires no historical context search. No reference to past workouts, progress, methodology, or techniques."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Simple factual statement about sleep. No emotional language, goals, setbacks, or coaching decisions needed. Straightforward health metric."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.98,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764194056760 | 2025-11-26T21:54:16.760Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1373, newLength: 1374 }|
| 1764194056761 | 2025-11-26T21:54:16.761Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Successfully extracted response text, length: 1374|
| 1764194056761 | 2025-11-26T21:54:16.761Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO === BEDROCK API CALL SUCCESS ===|
| 1764194056761 | 2025-11-26T21:54:16.761Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'general',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 3439,   confidence: 0.98 }|
| 1764194056761 | 2025-11-26T21:54:16.761Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Parallel data loading completed in 3439ms|
| 1764194056761 | 2025-11-26T21:54:16.761Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764194056761 | 2025-11-26T21:54:16.761Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764194057513 | 2025-11-26T21:54:17.513Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO workout data queried from DynamoDB successfully|
| 1764194057524 | 2025-11-26T21:54:17.524Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 105,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...'   ] }|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üß† Smart Router Analysis: {   userIntent: 'general',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 3439,   fallbackUsed: false }|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'I got 6 hours of sleep last night.',   hasMatch: false,   matchGroups: 0 }|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üèãÔ∏è Continuing workout collection session|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764194057525',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 5,   hasImages: false,   progressBefore: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '1/9 (11%)'   },   collectedDataBefore: {rpe: 6,repsOrTime: '6 reps bench press, 6 reps pull-ups, 30 reps double unders per round',setsOrRounds: 8,discipline: 'crossfit',weights: '205lbs bench press, bodyweight pull-ups',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚ú® Handling workout to-do list conversation|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üìä Turn 6 of workout collection|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîç Extracting workout information from user response|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO === BEDROCK API CALL START ===|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO AWS Region: us-west-2|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO System prompt length: 5443|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO User message length: 2797|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Thinking enabled: false|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Converse command created successfully..|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO About to call bedrockClient.send()...|
| 1764194057525 | 2025-11-26T21:54:17.525Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Starting Bedrock API call with 60s timeout..|
| 1764194058713 | 2025-11-26T21:54:18.713Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO bedrockClient.send() completed successfully|
| 1764194058713 | 2025-11-26T21:54:18.713Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Response received from Bedrock|
| 1764194058713 | 2025-11-26T21:54:18.713Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'd5004bdc-520c-42ca-a89b-5e1ef04988b9',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764194058714 | 2025-11-26T21:54:18.714Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_fv8GOHT5TreA0TtH9JXwsQ',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764194058714 | 2025-11-26T21:54:18.714Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîß Tool use requested, extracting tool result|
| 1764194058714 | 2025-11-26T21:54:18.714Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Received extraction response|
| 1764194058714 | 2025-11-26T21:54:18.714Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Tool-based extraction successful|
| 1764194058714 | 2025-11-26T21:54:18.714Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Extracted sleepHours: 6|
| 1764194058714 | 2025-11-26T21:54:18.714Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Extraction complete: 1 fields updated|
| 1764194058714 | 2025-11-26T21:54:18.714Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 6,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '2/9 (22%)'   },   collectedData: {rpe: 6,repsOrTime: '6 reps bench press, 6 reps pull-ups, 30 reps double unders per round',setsOrRounds: 8,sleepHours: 6,discipline: 'crossfit',weights: '205lbs bench press, bodyweight pull-ups',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764194058714 | 2025-11-26T21:54:18.714Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚è∞ Max turns (6) reached with required fields complete - auto-completing workout logging|
| 1764194058714 | 2025-11-26T21:54:18.714Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üìã TODO LIST BEFORE RETURN (Auto-complete): {   turn: 6,   isComplete: true,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '2/9 (22%)'   },   collectedData: {rpe: 6,repsOrTime: '6 reps bench press, 6 reps pull-ups, 30 reps double unders per round',setsOrRounds: 8,sleepHours: 6,discipline: 'crossfit',weights: '205lbs bench press, bodyweight pull-ups',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764194058715 | 2025-11-26T21:54:18.715Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764194057525',   turnCount: 6,   isComplete: true,   progressAfter: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '2/9 (22%)'   },   collectedDataAfter: {rpe: 6,repsOrTime: '6 reps bench press, 6 reps pull-ups, 30 reps double unders per round',setsOrRounds: 8,sleepHours: 6,discipline: 'crossfit',weights: '205lbs bench press, bodyweight pull-ups',sessionDuration: 30,duration: 24,intensity: 6,exercises: 'bench press, pull-ups, double unders',workoutType: 'EMOM',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764194058715 | 2025-11-26T21:54:18.715Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üéâ Workout collection complete - triggering build-workout|
| 1764194058715 | 2025-11-26T21:54:18.715Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üöÄ Triggering async Lambda invocation for multi-turn workout creation: {   functionName: 'amplify-neonpandaprotov1--buildworkoutlambda23D1E4-KFUp94ybUR20',   payloadKeys: ['userId','coachId','conversationId','userMessage','coachConfig','imageS3Keys','userTimezone','criticalTrainingDirective'   ],   context: 'multi-turn workout creation' }|
| 1764194058761 | 2025-11-26T21:54:18.761Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Successfully triggered async Lambda for multi-turn workout creation: {   functionName: 'amplify-neonpandaprotov1--buildworkoutlambda23D1E4-KFUp94ybUR20',   payloadSize: 11443 }|
| 1764194058762 | 2025-11-26T21:54:18.762Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Triggered async workout creation|
| 1764194058762 | 2025-11-26T21:54:18.762Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764194058775 | 2025-11-26T21:54:18.775Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Workout collection flow completed|
| 1764194058776 | 2025-11-26T21:54:18.776Z ea072bd2-327c-44a9-b00d-a8f556826651 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764194058783 | END RequestId: ea072bd2-327c-44a9-b00d-a8f556826651|
| 1764194058783 | REPORT RequestId: ea072bd2-327c-44a9-b00d-a8f556826651 Duration: 5466.54 ms Billed Duration: 5467 ms Memory Size: 2048 MB Max Memory Used: 279 MB|
| 1764194073731 | START RequestId: 74776166-0f41-4557-8188-386aa085a5fe Version: $LATEST|
| 1764194073732 | 2025-11-26T21:54:33.732Z 74776166-0f41-4557-8188-386aa085a5fe INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764194073732 | 2025-11-26T21:54:33.732Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764194073732 | 2025-11-26T21:54:33.732Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764194073732 | 2025-11-26T21:54:33.732Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764194073732 | 2025-11-26T21:54:33.732Z 74776166-0f41-4557-8188-386aa085a5fe INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764194073733 | 2025-11-26T21:54:33.733Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764194073733 | 2025-11-26T21:54:33.733Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Yielded start event immediately|
| 1764194073733 | 2025-11-26T21:54:33.733Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Yielded coach acknowledgment (contextual): "Alright, let's work."|
| 1764194073733 | 2025-11-26T21:54:33.733Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764194073733 | 2025-11-26T21:54:33.733Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764194073733 | 2025-11-26T21:54:33.733Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 16,   imageCount: 0 }|
| 1764194073733 | 2025-11-26T21:54:33.733Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764194073738 | 2025-11-26T21:54:33.738Z 74776166-0f41-4557-8188-386aa085a5fe INFO user data loaded from DynamoDB successfully|
| 1764194073738 | 2025-11-26T21:54:33.738Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764194073738 | 2025-11-26T21:54:33.738Z 74776166-0f41-4557-8188-386aa085a5fe INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO üß† Smart Router analyzing request capabilities: {   messageLength: 16,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO === BEDROCK API CALL START ===|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO AWS Region: us-west-2|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO System prompt length: 18071|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO User message length: 145|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO Thinking enabled: false|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO Bedrock client config: { region: 'us-west-2' }|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO üéØ Response prefilling enabled: {|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO Converse command created successfully..|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO About to call bedrockClient.send()...|
| 1764194073739 | 2025-11-26T21:54:33.739Z 74776166-0f41-4557-8188-386aa085a5fe INFO Starting Bedrock API call with 60s timeout..|
| 1764194073759 | 2025-11-26T21:54:33.759Z 74776166-0f41-4557-8188-386aa085a5fe INFO coachConfig data loaded from DynamoDB successfully|
| 1764194073765 | 2025-11-26T21:54:33.765Z 74776166-0f41-4557-8188-386aa085a5fe INFO coachConversation data loaded from DynamoDB successfully|
| 1764194076111 | 2025-11-26T21:54:36.111Z 74776166-0f41-4557-8188-386aa085a5fe INFO bedrockClient.send() completed successfully|
| 1764194076111 | 2025-11-26T21:54:36.111Z 74776166-0f41-4557-8188-386aa085a5fe INFO Response received from Bedrock|
| 1764194076111 | 2025-11-26T21:54:36.111Z 74776166-0f41-4557-8188-386aa085a5fe INFO Response metadata: {   httpStatusCode: 200,   requestId: 'b81156bd-59d5-409f-9b21-1fd70f207b75',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764194076111 | 2025-11-26T21:54:36.111Z 74776166-0f41-4557-8188-386aa085a5fe INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "acknowledgment",\n' +'  "showContextualUpdates": false,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.0,\n' +'"workoutType": null,\n' +'"reasoning": "Simple acknowledgment with no workout details, past tense completion, or logging intent."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "Simple acknowledgment; no memory request or personal context shared."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "No context needed for simple acknowledgment response."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.99,\n' +'"reasoning": "Straightforward acknowledgment with no complex elements."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.99,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764194076111 | 2025-11-26T21:54:36.111Z 74776166-0f41-4557-8188-386aa085a5fe INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1115, newLength: 1116 }|
| 1764194076111 | 2025-11-26T21:54:36.111Z 74776166-0f41-4557-8188-386aa085a5fe INFO Successfully extracted response text, length: 1116|
| 1764194076111 | 2025-11-26T21:54:36.111Z 74776166-0f41-4557-8188-386aa085a5fe INFO === BEDROCK API CALL SUCCESS ===|
| 1764194076111 | 2025-11-26T21:54:36.111Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'acknowledgment',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 2373,   confidence: 0.99 }|
| 1764194076111 | 2025-11-26T21:54:36.111Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ Parallel data loading completed in 2373ms|
| 1764194076112 | 2025-11-26T21:54:36.112Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764194076112 | 2025-11-26T21:54:36.112Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764194076820 | 2025-11-26T21:54:36.820Z 74776166-0f41-4557-8188-386aa085a5fe INFO workout data queried from DynamoDB successfully|
| 1764194076831 | 2025-11-26T21:54:36.831Z 74776166-0f41-4557-8188-386aa085a5fe INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 105,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764194076831 | 2025-11-26T21:54:36.831Z 74776166-0f41-4557-8188-386aa085a5fe INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Gladiator Fortis" - a CrossFit for-time...','Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...'   ] }|
| 1764194076836 | 2025-11-26T21:54:36.836Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764194076837 | 2025-11-26T21:54:36.837Z 74776166-0f41-4557-8188-386aa085a5fe INFO üß† Smart Router Analysis: {   userIntent: 'acknowledgment',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 2373,   fallbackUsed: false }|
| 1764194076837 | 2025-11-26T21:54:36.837Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîç parseSlashCommand: Regex match result: { messageStart: 'Perfect, thanks.', hasMatch: false, matchGroups: 0 }|
| 1764194076837 | 2025-11-26T21:54:36.837Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764194076837 | 2025-11-26T21:54:36.837Z 74776166-0f41-4557-8188-386aa085a5fe INFO üìä Processing plan: workout=false, memory=false, workoutIntent=false|
| 1764194076837 | 2025-11-26T21:54:36.837Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚è≠Ô∏è Router determined no workout or memory processing needed|
| 1764194076837 | 2025-11-26T21:54:36.837Z 74776166-0f41-4557-8188-386aa085a5fe INFO üìù Contextual updates streamed but not saved (0 updates, ephemeral UX only)|
| 1764194076837 | 2025-11-26T21:54:36.837Z 74776166-0f41-4557-8188-386aa085a5fe INFO üöÄ Starting REAL-TIME AI streaming..|
| 1764194076841 | 2025-11-26T21:54:36.841Z 74776166-0f41-4557-8188-386aa085a5fe INFO Generated system prompt preview for streaming: {   coachName: 'Victoria The Masters Champion',   personality: 'victoria',   methodology: 'BLOCK_PERIODIZATION',   safetyConstraints: 1,   estimatedLength: 8524,   keyFeatures: ['Blended personality (victoria + marcus)','expert level adaptation','masters_crossfit_competition + heavy_lifting_development + strength_maintenance + recovery_optimization + age_group_excellence focus','Specializes in: masters_crossfit_competition, heavy_functional_lifting, olympic_lifting_masters, powerlifting_integration, crossfit_strength_development, advanced_periodization, performance_optimization, age_group_excellence, strength_focused_training'   ],   dataRichness: ['Detailed user background available','Equipment context: crossfit_gym, olympic_lifting_platform, powerlifting_equipment, gymnastics_equipment, competition_equipment, heavy_lifting_implements, recovery_tools, performance_monitoring, specialized_barbells, masters_specific_equipment','Time constraints: 75','Intensity preference: high_intelligent'   ],   conversationContext: { sessionNumber: 21 },   promptLength: 19231,   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   hasPineconeContext: false,   pineconeMatches: 0 }|
| 1764194076932 | 2025-11-26T21:54:36.932Z 74776166-0f41-4557-8188-386aa085a5fe INFO Successfully stored debug data in S3: {   bucket: 'midgard-sandbox-logs',   key: 'sandbox-abb89311/coach-conversation/2025-11-26T21-54-36-841Z_63gocaz-j-AYRsb0094ik_coach-conversation-prompt-stream.txt',   contentLength: 19231,   metadataKeys: ['userId','coachId','conversationId','coachName','userMessage','sessionNumber','totalPromptLength','totalPromptSizeKB','basePromptLength','basePromptSizeKB','conversationHistoryLength','conversationHistorySizeKB','pineconeContextLength','pineconeContextSizeKB','hasImages','imageCount','hasWorkoutContext','recentWorkoutsCount','workoutDetected','hasPineconeContext','pineconeMatches','hasMemories','memoriesCount','messageCount','hasCriticalDirective','userTimezone','type'   ] }|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ System prompt stored in S3 for debug/monitoring: {   location: 's3://midgard-sandbox-logs/sandbox-abb89311/coach-conversation/2025-11-26T21-54-36-841Z_63gocaz-j-AYRsb0094ik_coach-conversation-prompt-stream.txt',   totalSizeKB: '18.78',   baseSizeKB: '18.78',   historySizeKB: '0.00',   pineconeContextKB: '0.00',   components: {base: '18.78KB',history: '0.00KB',pinecone: '0.00KB',total: '18.78KB'   } }|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO ü§ñ Model selection: HAIKU 4.5 (requiresDeepReasoning=false)|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO üí∞ STEPPED HISTORY CACHING: Boundary at 30 messages {   totalMessages: 40,   cached: 30,   dynamic: 10,   stepSize: 10,   nextBoundary: 40,   minThreshold: 12 }|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO üí¨ Using text-only Converse Stream API with history caching {   totalMessages: 42,   existingMessages: 40,   model: 'us.anthropic.claude-haiku-4-5-20251001-v1:0' }|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO üî• CACHE OPTIMIZATION: Using static/dynamic prompt structure|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO Static prompt size: 12.84 KB|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO Dynamic prompt size: 5.93 KB|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO === BEDROCK MULTIMODAL STREAMING API CALL START ===|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO AWS Region: us-west-2|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO System prompt length: 19231|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO Messages count: 42|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO Thinking enabled: false|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO Has images: false|
| 1764194076933 | 2025-11-26T21:54:36.933Z 74776166-0f41-4557-8188-386aa085a5fe INFO Multimodal converse stream command created successfully..|
| 1764194077856 | 2025-11-26T21:54:37.856Z 74776166-0f41-4557-8188-386aa085a5fe INFO Stream response received from Bedrock|
| 1764194077946 | 2025-11-26T21:54:37.946Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [90ms] Optimized AI chunk yielded: "You're welcome! You're buildin..." (49 chars)|
| 1764194077947 | 2025-11-26T21:54:37.947Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #5 flushed: "You're welcome! You're buildin..." (49 chars)|
| 1764194078128 | 2025-11-26T21:54:38.128Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [271ms] Optimized AI chunk yielded: " here‚Äî6 consecutive training d..." (60 chars)|
| 1764194078128 | 2025-11-26T21:54:38.128Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #12 flushed: " here‚Äî6 consecutive training d..." (60 chars)|
| 1764194078205 | 2025-11-26T21:54:38.205Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [349ms] Optimized AI chunk yielded: " recovery management mixed in...." (45 chars)|
| 1764194078206 | 2025-11-26T21:54:38.206Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #15 flushed: " recovery management mixed in...." (45 chars)|
| 1764194078283 | 2025-11-26T21:54:38.283Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [426ms] Optimized AI chunk yielded: " the kind of discipline that s..." (50 chars)|
| 1764194078283 | 2025-11-26T21:54:38.283Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #18 flushed: " the kind of discipline that s..." (50 chars)|
| 1764194078361 | 2025-11-26T21:54:38.361Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [505ms] Optimized AI chunk yielded: " masters athletes from the res..." (32 chars)|
| 1764194078361 | 2025-11-26T21:54:38.361Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #21 flushed: " masters athletes from the res..." (32 chars)|
| 1764194078492 | 2025-11-26T21:54:38.492Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [636ms] Optimized AI chunk yielded: "  **Quick coaching note:** You..." (37 chars)|
| 1764194078492 | 2025-11-26T21:54:38.492Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #26 flushed: "  **Quick coaching note:** You..." (37 chars)|
| 1764194078621 | 2025-11-26T21:54:38.621Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [765ms] Optimized AI chunk yielded: " logged workouts across multip..." (43 chars)|
| 1764194078621 | 2025-11-26T21:54:38.621Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #31 flushed: " logged workouts across multip..." (43 chars)|
| 1764194078750 | 2025-11-26T21:54:38.750Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [894ms] Optimized AI chunk yielded: "6-hour sleep nights mixed in. ..." (42 chars)|
| 1764194078750 | 2025-11-26T21:54:38.750Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #36 flushed: "6-hour sleep nights mixed in. ..." (42 chars)|
| 1764194078906 | 2025-11-26T21:54:38.906Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [1050ms] Optimized AI chunk yielded: "eable short-term, but as we he..." (49 chars)|
| 1764194078906 | 2025-11-26T21:54:38.906Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #42 flushed: "eable short-term, but as we he..." (49 chars)|
| 1764194079061 | 2025-11-26T21:54:39.061Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [1205ms] Optimized AI chunk yielded: " prep cycles, we'll want to di..." (41 chars)|
| 1764194079061 | 2025-11-26T21:54:39.061Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #48 flushed: " prep cycles, we'll want to di..." (41 chars)|
| 1764194079232 | 2025-11-26T21:54:39.232Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [1376ms] Optimized AI chunk yielded: " consistency‚Äî7.5-8 hours is th..." (51 chars)|
| 1764194079232 | 2025-11-26T21:54:39.232Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #54 flushed: " consistency‚Äî7.5-8 hours is th..." (51 chars)|
| 1764194079361 | 2025-11-26T21:54:39.361Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [1504ms] Optimized AI chunk yielded: " recovery and adaptation at yo..." (41 chars)|
| 1764194079361 | 2025-11-26T21:54:39.361Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #59 flushed: " recovery and adaptation at yo..." (41 chars)|
| 1764194079415 | 2025-11-26T21:54:39.415Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [1559ms] Optimized AI chunk yielded: " volume.  How are you feeling ..." (37 chars)|
| 1764194079416 | 2025-11-26T21:54:39.416Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #61 flushed: " volume.  How are you feeling ..." (37 chars)|
| 1764194079547 | 2025-11-26T21:54:39.547Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [1691ms] Optimized AI chunk yielded: " right now? Any nagging sorene..." (33 chars)|
| 1764194079548 | 2025-11-26T21:54:39.548Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #65 flushed: " right now? Any nagging sorene..." (33 chars)|
| 1764194079623 | 2025-11-26T21:54:39.623Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [1767ms] Optimized AI chunk yielded: " joint feedback, or energy..." (26 chars)|
| 1764194079624 | 2025-11-26T21:54:39.624Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #68 flushed: " joint feedback, or energy..." (26 chars)|
| 1764194079701 | 2025-11-26T21:54:39.701Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [1845ms] Optimized AI chunk yielded: " concerns I should know about ..." (59 chars)|
| 1764194079701 | 2025-11-26T21:54:39.701Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #71 flushed: " concerns I should know about ..." (59 chars)|
| 1764194079886 | 2025-11-26T21:54:39.886Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [2030ms] Optimized AI chunk yielded: " block? That'll help me struct..." (44 chars)|
| 1764194079886 | 2025-11-26T21:54:39.886Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #78 flushed: " block? That'll help me struct..." (44 chars)|
| 1764194079939 | 2025-11-26T21:54:39.939Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° [2083ms] Optimized AI chunk yielded: " next strategically...." (20 chars)|
| 1764194079939 | 2025-11-26T21:54:39.939Z 74776166-0f41-4557-8188-386aa085a5fe INFO üì° Optimized chunk #80 flushed: " next strategically...." (20 chars)|
| 1764194079982 | 2025-11-26T21:54:39.982Z 74776166-0f41-4557-8188-386aa085a5fe INFO === BEDROCK MULTIMODAL STREAMING API CALL SUCCESS ===|
| 1764194079982 | 2025-11-26T21:54:39.982Z 74776166-0f41-4557-8188-386aa085a5fe INFO Stream complete. Total response length: 759|
| 1764194079983 | 2025-11-26T21:54:39.983Z 74776166-0f41-4557-8188-386aa085a5fe INFO üìä Metadata event received after messageStop|
| 1764194079983 | 2025-11-26T21:54:39.983Z 74776166-0f41-4557-8188-386aa085a5fe INFO üìä Usage data found in metadata|
| 1764194079983 | 2025-11-26T21:54:39.983Z 74776166-0f41-4557-8188-386aa085a5fe INFO üí∞ CACHE PERFORMANCE: {   context: 'Multimodal Streaming API',   inputTokens: 422,   outputTokens: 161,   cacheRead: 0,   cacheCreated: 0,   cacheHitRate: '0.0%',   costs: {withoutCache: '$0.001266',withCache: '$0.001266',saved: '$0.000000 (0%)'   } }|
| 1764194079983 | 2025-11-26T21:54:39.983Z 74776166-0f41-4557-8188-386aa085a5fe INFO üìä Stream metrics: { latencyMs: 3037 }|
| 1764194079983 | 2025-11-26T21:54:39.983Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ Real-time AI streaming completed successfully|
| 1764194079983 | 2025-11-26T21:54:39.983Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764194079993 | 2025-11-26T21:54:39.993Z 74776166-0f41-4557-8188-386aa085a5fe INFO coachConversation data loaded from DynamoDB successfully|
| 1764194079993 | 2025-11-26T21:54:39.993Z 74776166-0f41-4557-8188-386aa085a5fe INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ Conversation updated successfully|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO üìä Conversation size: {   sizeKB: 22.98,   percentage: 6,   isApproachingLimit: false,   maxSizeKB: 400 }|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO === BEDROCK API CALL START ===|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO AWS Region: us-west-2|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO System prompt length: 4189|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO User message length: 136|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO Thinking enabled: false|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO üöÄ Conversation summary triggered (fire-and-forget)|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ Proper pipeline streaming implementation completed successfully|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO Bedrock client config: { region: 'us-west-2' }|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO üéØ Response prefilling enabled: {|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO Converse command created successfully..|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO About to call bedrockClient.send()...|
| 1764194080007 | 2025-11-26T21:54:40.007Z 74776166-0f41-4557-8188-386aa085a5fe INFO Starting Bedrock API call with 60s timeout..|
| 1764194080010 | 2025-11-26T21:54:40.010Z 74776166-0f41-4557-8188-386aa085a5fe INFO ‚úÖ Streaming pipeline completed successfully|
| 1764194080011 | END RequestId: 74776166-0f41-4557-8188-386aa085a5fe|
| 1764194080011 | REPORT RequestId: 74776166-0f41-4557-8188-386aa085a5fe Duration: 6279.51 ms Billed Duration: 6280 ms Memory Size: 2048 MB Max Memory Used: 281 MB|
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------