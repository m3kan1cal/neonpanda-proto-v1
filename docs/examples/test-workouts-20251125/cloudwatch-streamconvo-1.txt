-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   timestamp   |message|
|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1764113264481 | INIT_START Runtime Version: nodejs:22.v68 Runtime Version ARN: arn:aws:lambda:us-west-2::runtime:685b5bdd1a5972cbde591187200f592fbd417cd448d71e500b10e41759692493|
| 1764113264933 | 2025-11-25T23:27:44.933Z undefined INFO üîß PINECONE_API_KEY validation: {   exists: true,   length: 75,   isPlaceholder: false,   prefix: 'pcsk_4tHp6N_' }|
| 1764113264974 | 2025-11-25T23:27:44.974Z undefined INFO üîß awslambda global available: true|
| 1764113264974 | 2025-11-25T23:27:44.974Z undefined INFO üîß streamifyResponse available: true|
| 1764113264975 | 2025-11-25T23:27:44.975Z undefined INFO ‚úÖ Using awslambda.streamifyResponse for streaming mode|
| 1764113264985 | START RequestId: a4280446-c6b2-47fb-a5c0-364d7a172b4a Version: $LATEST|
| 1764113264990 | 2025-11-25T23:27:44.990Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764113264990 | 2025-11-25T23:27:44.990Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764113264991 | 2025-11-25T23:27:44.991Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113264992 | 2025-11-25T23:27:44.992Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764113264992 | 2025-11-25T23:27:44.992Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764113264992 | 2025-11-25T23:27:44.992Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764113264998 | 2025-11-25T23:27:44.998Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üì° Yielded start event immediately|
| 1764113264999 | 2025-11-25T23:27:44.999Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üì° Yielded coach acknowledgment (contextual): "Let's tackle this."|
| 1764113264999 | 2025-11-25T23:27:44.999Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113264999 | 2025-11-25T23:27:44.999Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764113264999 | 2025-11-25T23:27:44.999Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 54,   imageCount: 0 }|
| 1764113265000 | 2025-11-25T23:27:45.000Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764113265091 | 2025-11-25T23:27:45.091Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO user data loaded from DynamoDB successfully|
| 1764113265092 | 2025-11-25T23:27:45.092Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113265092 | 2025-11-25T23:27:45.092Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764113265123 | 2025-11-25T23:27:45.123Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üß† Smart Router analyzing request capabilities: {   messageLength: 54,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113265124 | 2025-11-25T23:27:45.124Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO === BEDROCK API CALL START ===|
| 1764113265124 | 2025-11-25T23:27:45.124Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO AWS Region: us-west-2|
| 1764113265124 | 2025-11-25T23:27:45.124Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113265124 | 2025-11-25T23:27:45.124Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO System prompt length: 18065|
| 1764113265124 | 2025-11-25T23:27:45.124Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO User message length: 183|
| 1764113265124 | 2025-11-25T23:27:45.124Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Thinking enabled: false|
| 1764113265125 | 2025-11-25T23:27:45.125Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764113265125 | 2025-11-25T23:27:45.125Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764113265126 | 2025-11-25T23:27:45.126Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113265126 | 2025-11-25T23:27:45.126Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113265126 | 2025-11-25T23:27:45.126Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üéØ Response prefilling enabled: {|
| 1764113265126 | 2025-11-25T23:27:45.126Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Converse command created successfully..|
| 1764113265126 | 2025-11-25T23:27:45.126Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO About to call bedrockClient.send()...|
| 1764113265126 | 2025-11-25T23:27:45.126Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Starting Bedrock API call with 60s timeout..|
| 1764113265162 | 2025-11-25T23:27:45.162Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO coachConversation data loaded from DynamoDB successfully|
| 1764113265233 | 2025-11-25T23:27:45.233Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO coachConfig data loaded from DynamoDB successfully|
| 1764113270131 | 2025-11-25T23:27:50.131Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO HEARTBEAT: Lambda still running, waiting for Bedrock response..|
| 1764113271789 | 2025-11-25T23:27:51.789Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO bedrockClient.send() completed successfully|
| 1764113271789 | 2025-11-25T23:27:51.789Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response received from Bedrock|
| 1764113271789 | 2025-11-25T23:27:51.789Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response metadata: {   httpStatusCode: 200,   requestId: '2478ecf8-d445-4779-9b5a-21f90c2ba713',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113271789 | 2025-11-25T23:27:51.789Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "workout_logging",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +'"reasoning": "User expresses intent to log a workout but provides NO specific workout details (no times, weights, reps, exercises, distances, or workout structure). Fails strict criterion #2 (specific content required). This is a logging announcement, not an actual workout log."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "No memory request detected. User is indicating they want to log a workout, not asking to remember something or retrieve past context."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +`"reasoning": "No context search needed. User hasn't described a workout yet, so there's nothing to compare against or analyze from history."\n` +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Simple statement of intent. No emotional language, goals, achievements, or coaching complexity present."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": true,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.85,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764113271789 | 2025-11-25T23:27:51.789Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1475, newLength: 1476 }|
| 1764113271790 | 2025-11-25T23:27:51.790Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Successfully extracted response text, length: 1476|
| 1764113271790 | 2025-11-25T23:27:51.790Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO === BEDROCK API CALL SUCCESS ===|
| 1764113271790 | 2025-11-25T23:27:51.790Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 6698,   confidence: 0.85 }|
| 1764113271790 | 2025-11-25T23:27:51.790Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Parallel data loading completed in 6698ms|
| 1764113271790 | 2025-11-25T23:27:51.790Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764113271791 | 2025-11-25T23:27:51.791Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764113272597 | 2025-11-25T23:27:52.597Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO workout data queried from DynamoDB successfully|
| 1764113272618 | 2025-11-25T23:27:52.618Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 104,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764113272618 | 2025-11-25T23:27:52.618Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...','Completed Vigor Tractus (upper body pulling streng...'   ] }|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üß† Smart Router Analysis: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 6698,   fallbackUsed: false }|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üöÄ Generating initial acknowledgment (router-approved)...|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO === BEDROCK API CALL START ===|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO AWS Region: us-west-2|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Model ID: us.amazon.nova-micro-v1:0|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO System prompt length: 1460|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO User message length: 255|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Thinking enabled: false|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Converse command created successfully..|
| 1764113272619 | 2025-11-25T23:27:52.619Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO About to call bedrockClient.send()...|
| 1764113272620 | 2025-11-25T23:27:52.620Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Starting Bedrock API call with 60s timeout..|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO bedrockClient.send() completed successfully|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response received from Bedrock|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response metadata: {   httpStatusCode: 200,   requestId: '7807312e-0996-4fe7-b136-057d4b462715',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: { text: 'Flexing my coach muscles for your morning triumph!' } }|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Successfully extracted response text, length: 50|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO === BEDROCK API CALL SUCCESS ===|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üì° Initial acknowledgment ready|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üìä Processing plan: workout=true, memory=false, workoutIntent=true|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üèãÔ∏è Processing workout only|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO === BEDROCK API CALL START ===|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO AWS Region: us-west-2|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Model ID: us.amazon.nova-micro-v1:0|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO System prompt length: 1460|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO User message length: 289|
| 1764113272871 | 2025-11-25T23:27:52.871Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Thinking enabled: false|
| 1764113272872 | 2025-11-25T23:27:52.872Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç Starting workout detection for message|
| 1764113272872 | 2025-11-25T23:27:52.872Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç parseSlashCommand: Regex match result: {   messageStart: 'I want to log a workout that I completed this morn',   hasMatch: false,   matchGroups: 0 }|
| 1764113272872 | 2025-11-25T23:27:52.872Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç Slash command parsing result: {   userMessage: 'I want to log a workout that I completed this morning.',   isSlashCommand: false,   command: undefined,   content: undefined }|
| 1764113272872 | 2025-11-25T23:27:52.872Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç isWorkoutSlashCommand: Check result: {   isSlashCommand: false,   command: undefined,   supportedCommands: [ 'log-workout' ],   isSupported: false,   finalResult: false }|
| 1764113272872 | 2025-11-25T23:27:52.872Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç Slash command workout check: {   isSlashCommandWorkout: false,   supportedCommands: [ 'log-workout' ],   detectedCommand: undefined }|
| 1764113272872 | 2025-11-25T23:27:52.872Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç Natural language workout check (using Smart Router result): {   isNaturalLanguageWorkout: false,   confidence: 0.15,   reasoning: 'User expresses intent to log a workout but provides NO specific workout details (no times, weights, reps, exercises, distances, or workout structure). Fails strict criterion #2 (specific content required). This is a logging announcement, not an actual workout log.',   source: 'smart_router' }|
| 1764113272872 | 2025-11-25T23:27:52.872Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç Final workout detection result: {   isWorkoutLogging: false,   isSlashCommandWorkout: false,   isNaturalLanguageWorkout: false }|
| 1764113272873 | 2025-11-25T23:27:52.873Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113272873 | 2025-11-25T23:27:52.873Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113272873 | 2025-11-25T23:27:52.873Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Converse command created successfully..|
| 1764113272873 | 2025-11-25T23:27:52.873Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO About to call bedrockClient.send()...|
| 1764113272873 | 2025-11-25T23:27:52.873Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Starting Bedrock API call with 60s timeout..|
| 1764113273256 | 2025-11-25T23:27:53.256Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO bedrockClient.send() completed successfully|
| 1764113273256 | 2025-11-25T23:27:53.256Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response received from Bedrock|
| 1764113273256 | 2025-11-25T23:27:53.256Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response metadata: {   httpStatusCode: 200,   requestId: '25bc5e97-1149-487b-ba99-3050e2b8e369',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113273256 | 2025-11-25T23:27:53.256Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: 'Diving deep into your morning session, ready to level up your game!'   } }|
| 1764113273257 | 2025-11-25T23:27:53.257Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Successfully extracted response text, length: 67|
| 1764113273257 | 2025-11-25T23:27:53.257Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO === BEDROCK API CALL SUCCESS ===|
| 1764113273257 | 2025-11-25T23:27:53.257Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üèãÔ∏è Workout intent detected but insufficient data - starting multi-turn collection|
| 1764113273257 | 2025-11-25T23:27:53.257Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üèãÔ∏è Starting new workout collection session|
| 1764113273257 | 2025-11-25T23:27:53.257Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üÜï NEW WORKOUT SESSION CREATED: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113273257',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   hasImages: false }|
| 1764113273258 | 2025-11-25T23:27:53.258Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚ú® Handling workout to-do list conversation|
| 1764113273258 | 2025-11-25T23:27:53.258Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764113273258 | 2025-11-25T23:27:53.258Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üìä Turn 1 of workout collection|
| 1764113273258 | 2025-11-25T23:27:53.258Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîç Extracting workout information from user response|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO === BEDROCK API CALL START ===|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO AWS Region: us-west-2|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO System prompt length: 4891|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO User message length: 1312|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Thinking enabled: false|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Converse command created successfully..|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO About to call bedrockClient.send()...|
| 1764113273259 | 2025-11-25T23:27:53.259Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Starting Bedrock API call with 60s timeout..|
| 1764113276753 | 2025-11-25T23:27:56.753Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO bedrockClient.send() completed successfully|
| 1764113276753 | 2025-11-25T23:27:56.753Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response received from Bedrock|
| 1764113276753 | 2025-11-25T23:27:56.753Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response metadata: {   httpStatusCode: 200,   requestId: 'c52d8e23-821b-4f12-a78f-4570993ff0dd',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113276753 | 2025-11-25T23:27:56.753Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_4HciWA6lRC2_yaKHKOd7gA',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764113276753 | 2025-11-25T23:27:56.753Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîß Tool use requested, extracting tool result|
| 1764113276753 | 2025-11-25T23:27:56.753Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Received extraction response|
| 1764113276753 | 2025-11-25T23:27:56.753Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Tool-based extraction successful|
| 1764113276753 | 2025-11-25T23:27:56.753Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Extracted workoutDate: "today"|
| 1764113276753 | 2025-11-25T23:27:56.753Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Extraction complete: 1 fields updated|
| 1764113276753 | 2025-11-25T23:27:56.753Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 1,   progress: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedData: { workoutDate: 'today' } }|
| 1764113276754 | 2025-11-25T23:27:56.754Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764113276754 | 2025-11-25T23:27:56.754Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üéØ Generating next workout creator question (streaming) { turnCount: 1 }|
| 1764113276755 | 2025-11-25T23:27:56.755Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO === BEDROCK STREAMING API CALL START ===|
| 1764113276755 | 2025-11-25T23:27:56.755Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO AWS Region: us-west-2|
| 1764113276755 | 2025-11-25T23:27:56.755Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113276755 | 2025-11-25T23:27:56.755Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO System prompt length: 2587|
| 1764113276755 | 2025-11-25T23:27:56.755Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO User message length: 60|
| 1764113276755 | 2025-11-25T23:27:56.755Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Thinking enabled: false|
| 1764113276755 | 2025-11-25T23:27:56.755Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Converse stream command created successfully..|
| 1764113277341 | 2025-11-25T23:27:57.341Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Stream response received from Bedrock|
| 1764113277983 | 2025-11-25T23:27:57.983Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764113277983 | 2025-11-25T23:27:57.983Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO Stream complete. Total response length: 86|
| 1764113277983 | 2025-11-25T23:27:57.983Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Question generation streaming complete|
| 1764113277983 | 2025-11-25T23:27:57.983Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Response generated and streamed|
| 1764113277983 | 2025-11-25T23:27:57.983Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚öôÔ∏è Finalizing session state|
| 1764113277983 | 2025-11-25T23:27:57.983Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 17,   todoProgress: '1/6 required items',   recommendedStatus: 'not applicable' }|
| 1764113277983 | 2025-11-25T23:27:57.983Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üìã TODO LIST BEFORE RETURN: {   turn: 1,   isComplete: false,   progress: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedData: { workoutDate: 'today' } }|
| 1764113277983 | 2025-11-25T23:27:57.983Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üìä SESSION STATE AFTER HANDLER (startWorkoutCollection): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113273257',   turnCount: 1,   isComplete: false,   progress: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedData: { workoutDate: 'today' } }|
| 1764113277983 | 2025-11-25T23:27:57.983Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764113278041 | 2025-11-25T23:27:58.041Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Workout collection session started|
| 1764113278043 | 2025-11-25T23:27:58.043Z a4280446-c6b2-47fb-a5c0-364d7a172b4a INFO ‚úÖ Streaming pipeline completed successfully|
| 1764113278045 | END RequestId: a4280446-c6b2-47fb-a5c0-364d7a172b4a|
| 1764113278045 | REPORT RequestId: a4280446-c6b2-47fb-a5c0-364d7a172b4a Duration: 13059.69 ms Billed Duration: 13560 ms Memory Size: 2048 MB Max Memory Used: 167 MB Init Duration: 500.13 ms|
| 1764113296027 | START RequestId: 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 Version: $LATEST|
| 1764113296029 | 2025-11-25T23:28:16.029Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764113296029 | 2025-11-25T23:28:16.029Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764113296029 | 2025-11-25T23:28:16.029Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113296029 | 2025-11-25T23:28:16.029Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764113296029 | 2025-11-25T23:28:16.029Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764113296029 | 2025-11-25T23:28:16.029Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764113296030 | 2025-11-25T23:28:16.030Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üì° Yielded start event immediately|
| 1764113296030 | 2025-11-25T23:28:16.030Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üì° Yielded coach acknowledgment (contextual): "Let's figure this out."|
| 1764113296030 | 2025-11-25T23:28:16.030Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113296030 | 2025-11-25T23:28:16.030Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764113296030 | 2025-11-25T23:28:16.030Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 61,   imageCount: 0 }|
| 1764113296030 | 2025-11-25T23:28:16.030Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764113296036 | 2025-11-25T23:28:16.036Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO user data loaded from DynamoDB successfully|
| 1764113296036 | 2025-11-25T23:28:16.036Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113296036 | 2025-11-25T23:28:16.036Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764113296036 | 2025-11-25T23:28:16.036Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 61,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO === BEDROCK API CALL START ===|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO AWS Region: us-west-2|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO System prompt length: 18065|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO User message length: 190|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Thinking enabled: false|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üéØ Response prefilling enabled: {|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Converse command created successfully..|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO About to call bedrockClient.send()...|
| 1764113296037 | 2025-11-25T23:28:16.037Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Starting Bedrock API call with 60s timeout..|
| 1764113296047 | 2025-11-25T23:28:16.047Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO coachConversation data loaded from DynamoDB successfully|
| 1764113296052 | 2025-11-25T23:28:16.052Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO coachConfig data loaded from DynamoDB successfully|
| 1764113301042 | 2025-11-25T23:28:21.042Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO HEARTBEAT: Lambda still running, waiting for Bedrock response..|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO bedrockClient.send() completed successfully|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Response received from Bedrock|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'be355aad-6c9d-4eb4-a4e4-efa87946abcb',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "workout_logging",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": true,\n' +'"confidence": 0.98,\n' +'"workoutType": "crossfit",\n' +`"reasoning": "Past tense completion ('I did'), specific workout content (3 rounds, 20 DL @ 225#, 800m run), explicit logging intent with structured format"\n` +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "Workout log, not a memory request. Performance data stored in workout logging system, not memory system"\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +`"reasoning": "Simple workout log doesn't require historical context or methodology search"\n` +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Straightforward workout logging with no emotional language, goals, setbacks, or coaching relationship dynamics"\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": true,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.98,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1283, newLength: 1284 }|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Successfully extracted response text, length: 1284|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO === BEDROCK API CALL SUCCESS ===|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: true,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 7802,   confidence: 0.98 }|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Parallel data loading completed in 7802ms|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764113303838 | 2025-11-25T23:28:23.838Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764113304567 | 2025-11-25T23:28:24.567Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO workout data queried from DynamoDB successfully|
| 1764113304581 | 2025-11-25T23:28:24.581Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 104,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764113304581 | 2025-11-25T23:28:24.581Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...','Completed Vigor Tractus (upper body pulling streng...'   ] }|
| 1764113304581 | 2025-11-25T23:28:24.581Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764113304581 | 2025-11-25T23:28:24.581Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üß† Smart Router Analysis: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: true,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 7802,   fallbackUsed: false }|
| 1764113304581 | 2025-11-25T23:28:24.581Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764113304581 | 2025-11-25T23:28:24.581Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üèãÔ∏è Continuing workout collection session|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113304581',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 1,   hasImages: false,   progressBefore: {required: '1/6 (17%)',highPriority: '0/5 (0%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: { workoutDate: 'today' } }|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚ú® Handling workout to-do list conversation|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üìä Turn 2 of workout collection|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîç Extracting workout information from user response|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO === BEDROCK API CALL START ===|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO AWS Region: us-west-2|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO System prompt length: 4878|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO User message length: 1478|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Thinking enabled: false|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Converse command created successfully..|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO About to call bedrockClient.send()...|
| 1764113304582 | 2025-11-25T23:28:24.582Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Starting Bedrock API call with 60s timeout..|
| 1764113309003 | 2025-11-25T23:28:29.003Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO bedrockClient.send() completed successfully|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Response received from Bedrock|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Response metadata: {   httpStatusCode: 200,   requestId: '3cba4d32-5fb8-48af-91ce-5b21d42f57c4',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_d6fXjDgURUO-WKC1ry35Nw',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîß Tool use requested, extracting tool result|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Received extraction response|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Tool-based extraction successful|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Extracted exercises: "deadlifts, 800m run"|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Extracted setsOrRounds: 3|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Extracted repsOrTime: "20 reps deadlifts, 800m run"|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Extracted weights: "225lbs"|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Extracted workoutDate: "today"|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Extracted discipline: "crossfit"|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Extraction complete: 6 fields updated|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 2,   progress: {required: '5/6 (83%)',highPriority: '1/5 (20%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üéØ Generating next workout creator question (streaming) { turnCount: 2 }|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO === BEDROCK STREAMING API CALL START ===|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO AWS Region: us-west-2|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO System prompt length: 2668|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO User message length: 221|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Thinking enabled: false|
| 1764113309004 | 2025-11-25T23:28:29.004Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Converse stream command created successfully..|
| 1764113309791 | 2025-11-25T23:28:29.791Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Stream response received from Bedrock|
| 1764113311126 | 2025-11-25T23:28:31.126Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764113311126 | 2025-11-25T23:28:31.126Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO Stream complete. Total response length: 95|
| 1764113311126 | 2025-11-25T23:28:31.126Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Question generation streaming complete|
| 1764113311126 | 2025-11-25T23:28:31.126Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Response generated and streamed|
| 1764113311126 | 2025-11-25T23:28:31.126Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚öôÔ∏è Finalizing session state|
| 1764113311126 | 2025-11-25T23:28:31.126Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 83,   todoProgress: '5/6 required items',   recommendedStatus: 'not applicable' }|
| 1764113311126 | 2025-11-25T23:28:31.126Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üìã TODO LIST BEFORE RETURN: {   turn: 2,   isComplete: false,   progress: {required: '5/6 (83%)',highPriority: '1/5 (20%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113311126 | 2025-11-25T23:28:31.126Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113304581',   turnCount: 2,   isComplete: false,   progressAfter: {required: '5/6 (83%)',highPriority: '1/5 (20%)',lowPriority: '0/9 (0%)'   },   collectedDataAfter: {repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113311126 | 2025-11-25T23:28:31.126Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764113311183 | 2025-11-25T23:28:31.183Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Workout collection flow completed|
| 1764113311184 | 2025-11-25T23:28:31.184Z 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764113311185 | END RequestId: 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13|
| 1764113311185 | REPORT RequestId: 32ea7d5a-b8f7-4f41-96d2-38bd8399bd13 Duration: 15157.30 ms Billed Duration: 15158 ms Memory Size: 2048 MB Max Memory Used: 212 MB|
| 1764113333667 | START RequestId: 1129b30e-b009-4243-85e8-2569ba100465 Version: $LATEST|
| 1764113333669 | 2025-11-25T23:28:53.669Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764113333669 | 2025-11-25T23:28:53.669Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764113333669 | 2025-11-25T23:28:53.669Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113333669 | 2025-11-25T23:28:53.669Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764113333669 | 2025-11-25T23:28:53.669Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764113333669 | 2025-11-25T23:28:53.669Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764113333670 | 2025-11-25T23:28:53.670Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üì° Yielded start event immediately|
| 1764113333670 | 2025-11-25T23:28:53.670Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üì° Yielded coach acknowledgment (contextual): "Let's figure this out."|
| 1764113333670 | 2025-11-25T23:28:53.670Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113333670 | 2025-11-25T23:28:53.670Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764113333670 | 2025-11-25T23:28:53.670Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 86,   imageCount: 0 }|
| 1764113333670 | 2025-11-25T23:28:53.670Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764113333675 | 2025-11-25T23:28:53.675Z 1129b30e-b009-4243-85e8-2569ba100465 INFO user data loaded from DynamoDB successfully|
| 1764113333676 | 2025-11-25T23:28:53.676Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113333676 | 2025-11-25T23:28:53.676Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764113333676 | 2025-11-25T23:28:53.676Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 86,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113333676 | 2025-11-25T23:28:53.676Z 1129b30e-b009-4243-85e8-2569ba100465 INFO === BEDROCK API CALL START ===|
| 1764113333676 | 2025-11-25T23:28:53.676Z 1129b30e-b009-4243-85e8-2569ba100465 INFO AWS Region: us-west-2|
| 1764113333676 | 2025-11-25T23:28:53.676Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113333676 | 2025-11-25T23:28:53.676Z 1129b30e-b009-4243-85e8-2569ba100465 INFO System prompt length: 18065|
| 1764113333676 | 2025-11-25T23:28:53.676Z 1129b30e-b009-4243-85e8-2569ba100465 INFO User message length: 215|
| 1764113333676 | 2025-11-25T23:28:53.676Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Thinking enabled: false|
| 1764113333676 | 2025-11-25T23:28:53.676Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764113333677 | 2025-11-25T23:28:53.677Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764113333677 | 2025-11-25T23:28:53.677Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113333677 | 2025-11-25T23:28:53.677Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113333677 | 2025-11-25T23:28:53.677Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üéØ Response prefilling enabled: {|
| 1764113333677 | 2025-11-25T23:28:53.677Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Converse command created successfully..|
| 1764113333677 | 2025-11-25T23:28:53.677Z 1129b30e-b009-4243-85e8-2569ba100465 INFO About to call bedrockClient.send()...|
| 1764113333677 | 2025-11-25T23:28:53.677Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Starting Bedrock API call with 60s timeout..|
| 1764113333686 | 2025-11-25T23:28:53.686Z 1129b30e-b009-4243-85e8-2569ba100465 INFO coachConfig data loaded from DynamoDB successfully|
| 1764113333692 | 2025-11-25T23:28:53.692Z 1129b30e-b009-4243-85e8-2569ba100465 INFO coachConversation data loaded from DynamoDB successfully|
| 1764113338682 | 2025-11-25T23:28:58.682Z 1129b30e-b009-4243-85e8-2569ba100465 INFO HEARTBEAT: Lambda still running, waiting for Bedrock response..|
| 1764113338742 | 2025-11-25T23:28:58.742Z 1129b30e-b009-4243-85e8-2569ba100465 INFO bedrockClient.send() completed successfully|
| 1764113338742 | 2025-11-25T23:28:58.742Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Response received from Bedrock|
| 1764113338742 | 2025-11-25T23:28:58.742Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Response metadata: {   httpStatusCode: 200,   requestId: '5df5f51f-2814-4f3c-9320-4a96428901d8',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113338742 | 2025-11-25T23:28:58.742Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "workout_logging",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +'"reasoning": "Message lacks specific workout content (exercises, weights, reps, distances). Only provides timing information without concrete training details required for workout detection."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "No memory request detected. User is describing a workout session but not asking to save preferences, constraints, or goals."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "No references to past workouts, progress comparison, or methodology questions. User is only providing timing information."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Simple timing report without emotional language, goals, or coaching nuance. Straightforward session duration statement."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.72,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764113338742 | 2025-11-25T23:28:58.742Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1390, newLength: 1391 }|
| 1764113338743 | 2025-11-25T23:28:58.743Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Successfully extracted response text, length: 1391|
| 1764113338743 | 2025-11-25T23:28:58.743Z 1129b30e-b009-4243-85e8-2569ba100465 INFO === BEDROCK API CALL SUCCESS ===|
| 1764113338743 | 2025-11-25T23:28:58.743Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 5067,   confidence: 0.72 }|
| 1764113338743 | 2025-11-25T23:28:58.743Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Parallel data loading completed in 5067ms|
| 1764113338743 | 2025-11-25T23:28:58.743Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764113338743 | 2025-11-25T23:28:58.743Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764113339421 | 2025-11-25T23:28:59.421Z 1129b30e-b009-4243-85e8-2569ba100465 INFO workout data queried from DynamoDB successfully|
| 1764113339432 | 2025-11-25T23:28:59.432Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 104,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764113339432 | 2025-11-25T23:28:59.432Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...','Completed Vigor Tractus (upper body pulling streng...'   ] }|
| 1764113339432 | 2025-11-25T23:28:59.432Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üß† Smart Router Analysis: {   userIntent: 'workout_logging',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 5067,   fallbackUsed: false }|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üèãÔ∏è Continuing workout collection session|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113339433',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 2,   hasImages: false,   progressBefore: {required: '5/6 (83%)',highPriority: '1/5 (20%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: {repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚ú® Handling workout to-do list conversation|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üìä Turn 3 of workout collection|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîç Extracting workout information from user response|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO === BEDROCK API CALL START ===|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO AWS Region: us-west-2|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO System prompt length: 4878|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO User message length: 1696|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Thinking enabled: false|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Converse command created successfully..|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO About to call bedrockClient.send()...|
| 1764113339433 | 2025-11-25T23:28:59.433Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Starting Bedrock API call with 60s timeout..|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO bedrockClient.send() completed successfully|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Response received from Bedrock|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Response metadata: {   httpStatusCode: 200,   requestId: '9d919f28-36a2-4210-b209-bf705a89ab96',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_w2fa6WoBSc6Oso6eY5t_kg',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîß Tool use requested, extracting tool result|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Received extraction response|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Tool-based extraction successful|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Extraction complete: 3 fields updated|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 3,   progress: {required: '5/6 (83%)',highPriority: '1/5 (20%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üéØ Generating next workout creator question (streaming) { turnCount: 3 }|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO === BEDROCK STREAMING API CALL START ===|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO AWS Region: us-west-2|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO System prompt length: 2668|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO User message length: 354|
| 1764113340835 | 2025-11-25T23:29:00.835Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Thinking enabled: false|
| 1764113340836 | 2025-11-25T23:29:00.836Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Converse stream command created successfully..|
| 1764113341947 | 2025-11-25T23:29:01.947Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Stream response received from Bedrock|
| 1764113343573 | 2025-11-25T23:29:03.573Z 1129b30e-b009-4243-85e8-2569ba100465 INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764113343573 | 2025-11-25T23:29:03.573Z 1129b30e-b009-4243-85e8-2569ba100465 INFO Stream complete. Total response length: 225|
| 1764113343573 | 2025-11-25T23:29:03.573Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Question generation streaming complete|
| 1764113343573 | 2025-11-25T23:29:03.573Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Response generated and streamed|
| 1764113343573 | 2025-11-25T23:29:03.573Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚öôÔ∏è Finalizing session state|
| 1764113343574 | 2025-11-25T23:29:03.574Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 83,   todoProgress: '5/6 required items',   recommendedStatus: 'not applicable' }|
| 1764113343574 | 2025-11-25T23:29:03.574Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üìã TODO LIST BEFORE RETURN: {   turn: 3,   isComplete: false,   progress: {required: '5/6 (83%)',highPriority: '1/5 (20%)',lowPriority: '0/9 (0%)'   },   collectedData: {repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113343574 | 2025-11-25T23:29:03.574Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113339433',   turnCount: 3,   isComplete: false,   progressAfter: {required: '5/6 (83%)',highPriority: '1/5 (20%)',lowPriority: '0/9 (0%)'   },   collectedDataAfter: {repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113343574 | 2025-11-25T23:29:03.574Z 1129b30e-b009-4243-85e8-2569ba100465 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764113343586 | 2025-11-25T23:29:03.586Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Workout collection flow completed|
| 1764113343586 | 2025-11-25T23:29:03.586Z 1129b30e-b009-4243-85e8-2569ba100465 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764113343588 | END RequestId: 1129b30e-b009-4243-85e8-2569ba100465|
| 1764113343588 | REPORT RequestId: 1129b30e-b009-4243-85e8-2569ba100465 Duration: 9920.42 ms Billed Duration: 9921 ms Memory Size: 2048 MB Max Memory Used: 216 MB|
| 1764113366050 | START RequestId: f2878780-1004-4e7f-8fce-2a5361c6088b Version: $LATEST|
| 1764113366051 | 2025-11-25T23:29:26.051Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764113366051 | 2025-11-25T23:29:26.051Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764113366052 | 2025-11-25T23:29:26.052Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113366052 | 2025-11-25T23:29:26.052Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764113366052 | 2025-11-25T23:29:26.052Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764113366052 | 2025-11-25T23:29:26.052Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764113366052 | 2025-11-25T23:29:26.052Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üì° Yielded start event immediately|
| 1764113366052 | 2025-11-25T23:29:26.052Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üì° Yielded coach acknowledgment (contextual): "I hear you."|
| 1764113366052 | 2025-11-25T23:29:26.052Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113366052 | 2025-11-25T23:29:26.052Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764113366053 | 2025-11-25T23:29:26.053Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 72,   imageCount: 0 }|
| 1764113366053 | 2025-11-25T23:29:26.053Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764113366057 | 2025-11-25T23:29:26.057Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO user data loaded from DynamoDB successfully|
| 1764113366057 | 2025-11-25T23:29:26.057Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113366057 | 2025-11-25T23:29:26.057Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üß† Smart Router analyzing request capabilities: {   messageLength: 72,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO === BEDROCK API CALL START ===|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO AWS Region: us-west-2|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO System prompt length: 18065|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO User message length: 201|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Thinking enabled: false|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üéØ Response prefilling enabled: {|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Converse command created successfully..|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO About to call bedrockClient.send()...|
| 1764113366058 | 2025-11-25T23:29:26.058Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Starting Bedrock API call with 60s timeout..|
| 1764113366067 | 2025-11-25T23:29:26.067Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO coachConfig data loaded from DynamoDB successfully|
| 1764113366073 | 2025-11-25T23:29:26.073Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO coachConversation data loaded from DynamoDB successfully|
| 1764113370940 | 2025-11-25T23:29:30.940Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO bedrockClient.send() completed successfully|
| 1764113370940 | 2025-11-25T23:29:30.940Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Response received from Bedrock|
| 1764113370940 | 2025-11-25T23:29:30.940Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Response metadata: {   httpStatusCode: 200,   requestId: '1e17f40b-4de5-48b6-ac70-d2b277ac842d',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113370940 | 2025-11-25T23:29:30.940Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "progress_check",\n' +'  "showContextualUpdates": true,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +'"reasoning": "No past tense completion language or explicit workout details. Message provides metrics/commentary without logging specific exercises, weights, reps, times, or workout name. Appears to be feedback on a previously discussed workout."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": true,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "Message references workout intensity and RPE but lacks context. Previous conversation likely contained workout details. No explicit memory save request detected."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": true,\n' +'"searchTypes": ["workouts", "progress"],\n' +'"reasoning": "Need to retrieve recent workout context to understand which workout these metrics apply to. Message is incomplete without prior workout reference."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.85,\n' +'"reasoning": "Simple performance metrics feedback. No emotional complexity, goal discussion, or major changes. Straightforward progress reporting."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": true\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.78,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }  |
| 1764113370940 | 2025-11-25T23:29:30.940Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1539, newLength: 1540 }|
| 1764113370940 | 2025-11-25T23:29:30.940Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Successfully extracted response text, length: 1540|
| 1764113370940 | 2025-11-25T23:29:30.940Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO === BEDROCK API CALL SUCCESS ===|
| 1764113370941 | 2025-11-25T23:29:30.941Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'progress_check',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: true,   needsPineconeSearch: true,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 4884,   confidence: 0.78 }|
| 1764113370941 | 2025-11-25T23:29:30.941Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Parallel data loading completed in 4884ms|
| 1764113370941 | 2025-11-25T23:29:30.941Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîç Router approved Pinecone search - loading conversation context|
| 1764113370941 | 2025-11-25T23:29:30.941Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764113371698 | 2025-11-25T23:29:31.698Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO workout data queried from DynamoDB successfully|
| 1764113371708 | 2025-11-25T23:29:31.708Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 104,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764113371709 | 2025-11-25T23:29:31.709Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...','Completed Vigor Tractus (upper body pulling streng...'   ] }|
| 1764113371709 | 2025-11-25T23:29:31.709Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîç Querying Pinecone for semantic context (decision: smart-router): {   userId: '63gocaz-j-AYRsb0094ik',   userMessageLength: 72,   messagePreview: "I'll give the intensity 7/10 and RPE 8/10.  I burned about 240 calories...." }|
| 1764113371709 | 2025-11-25T23:29:31.709Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîß DEBUG: Pinecone configuration: {   indexName: 'coach-creator-proto-v1-dev',   apiKeySet: true,   apiKeyLength: 75,   apiKeyPrefix: 'pcsk_4tHp6N_',   apiKeyIsPlaceholder: false,   environment: 'unknown',   envPineconeKey: 'SET',   envPineconeKeyLength: 75 }|
| 1764113371712 | 2025-11-25T23:29:31.712Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîß About to query Pinecone: {   namespace: 'user_63gocaz-j-AYRsb0094ik',   userId: '63gocaz-j-AYRsb0094ik',   indexName: 'coach-creator-proto-v1-dev',   rerankingEnabled: true,   finalTopK: 6 }|
| 1764113371712 | 2025-11-25T23:29:31.712Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Querying user namespace: {   indexName: 'coach-creator-proto-v1-dev',   namespace: 'user_63gocaz-j-AYRsb0094ik',   userId: '63gocaz-j-AYRsb0094ik',   userMessageLength: 72,   topK: 30,   recordTypes: ['workout_summary','coach_creator_summary','conversation_summary'   ] }|
| 1764113371741 | 2025-11-25T23:29:31.741Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîç Querying methodology namespace: {   userMessage: "I'll give the intensity 7/10 and RPE 8/10.  I burned about 240 calories.",   topK: 30,   namespace: 'methodology' }|
| 1764113372689 | 2025-11-25T23:29:32.689Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ User namespace query successful: { matches: 30 }|
| 1764113372699 | 2025-11-25T23:29:32.699Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Methodology query successful: { originalHits: 30, matches: 30 }|
| 1764113372699 | 2025-11-25T23:29:32.699Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîç Retrieved initial Pinecone matches: {   userMatches: 30,   methodologyMatches: 30,   totalMatches: 60,   queryTopK: 30,   willRerank: true }|
| 1764113372699 | 2025-11-25T23:29:32.699Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Processing Pinecone results: {   totalMatches: 60,   targetTopK: 6,   minScore: 0.7,   rerankingEnabled: true,   hasQuery: true }|
| 1764113372700 | 2025-11-25T23:29:32.700Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîÑ Applying reranking: { originalCount: 60, rerankingCount: 30, targetFinalCount: 8 }|
| 1764113372700 | 2025-11-25T23:29:32.700Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîß DEBUG: Pinecone configuration: {   indexName: 'coach-creator-proto-v1-dev',   apiKeySet: true,   apiKeyLength: 75,   apiKeyPrefix: 'pcsk_4tHp6N_',   apiKeyIsPlaceholder: false,   environment: 'unknown',   envPineconeKey: 'SET',   envPineconeKeyLength: 75 }|
| 1764113372700 | 2025-11-25T23:29:32.700Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîÑ Starting reranking process: {   originalMatches: 30,   documentsExtracted: 30,   queryLength: 72,   targetTopN: 8,   model: 'pinecone-rerank-v0',   firstMatchFields: [{index: 0,id: 'workout_63gocaz-j-AYRsb0094ik_1762114962598_f1b2f66l8',hasText: true,hasContent: true,hasMetadataText: true,hasMetadataContent: false,textLength: 324,contentLength: 324,metadataTextLength: 324,documentLength: 324},{index: 1,id: 'workout_63gocaz-j-AYRsb0094ik_1763835902780_yzt630xhr',hasText: true,hasContent: true,hasMetadataText: true,hasMetadataContent: false,textLength: 344,contentLength: 344,metadataTextLength: 344,documentLength: 344}   ] }|
| 1764113373618 | 2025-11-25T23:29:33.618Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Reranking successful: {   originalCount: 30,   rerankedCount: 8,   avgOriginalScore: 0.39715107530355453,   avgRerankScore: 0.000389024335 }|
| 1764113373618 | 2025-11-25T23:29:33.618Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Successfully processed Pinecone results: {   indexName: 'coach-creator-proto-v1-dev',   userId: '63gocaz-j-AYRsb0094ik',   totalMatches: 60,   processedMatches: 8,   relevantMatches: 0,   finalMinScore: 0.3,   wasReranked: true,   wasNormalized: true,   methodologyMatches: 0,   userMatches: 0 }|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üì≠ No relevant Pinecone context found: { success: true, totalMatches: 60 }|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Pinecone context loaded in 2678ms|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üß† Smart Router Analysis: {   userIntent: 'progress_check',   showContextualUpdates: true,   isWorkoutLog: false,   needsMemoryRetrieval: true,   needsPineconeSearch: true,   pineconeSearchUsed: true,   hasComplexity: false,   processingTime: 4884,   fallbackUsed: false }|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üèãÔ∏è Continuing workout collection session|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113373619',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 3,   hasImages: false,   progressBefore: {required: '5/6 (83%)',highPriority: '1/5 (20%)',lowPriority: '0/9 (0%)'   },   collectedDataBefore: {repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚ú® Handling workout to-do list conversation|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üìä Turn 4 of workout collection|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîç Extracting workout information from user response|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO === BEDROCK API CALL START ===|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO AWS Region: us-west-2|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO System prompt length: 4878|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO User message length: 1991|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Thinking enabled: false|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Converse command created successfully..|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO About to call bedrockClient.send()...|
| 1764113373619 | 2025-11-25T23:29:33.619Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Starting Bedrock API call with 60s timeout..|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO bedrockClient.send() completed successfully|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Response received from Bedrock|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Response metadata: {   httpStatusCode: 200,   requestId: '263d8de6-3028-48b7-94d8-168956ef4ab4',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_V_n9YZCeQUqffe9b67N6MQ',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîß Tool use requested, extracting tool result|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Received extraction response|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Tool-based extraction successful|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Extracted intensity: 7|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Extracted rpe: 8|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Extracted caloriesBurned: 240|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Extraction complete: 3 fields updated|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 4,   progress: {required: '5/6 (83%)',highPriority: '3/5 (60%)',lowPriority: '1/9 (11%)'   },   collectedData: {caloriesBurned: 240,rpe: 8,repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',intensity: 7,exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üéØ Generating next workout creator question (streaming) { turnCount: 4 }|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO === BEDROCK STREAMING API CALL START ===|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO AWS Region: us-west-2|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO System prompt length: 2767|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO User message length: 504|
| 1764113376027 | 2025-11-25T23:29:36.027Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Thinking enabled: false|
| 1764113376028 | 2025-11-25T23:29:36.028Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Converse stream command created successfully..|
| 1764113377071 | 2025-11-25T23:29:37.071Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Stream response received from Bedrock|
| 1764113381078 | 2025-11-25T23:29:41.078Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO Stream complete. Total response length: 144|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Question generation streaming complete|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Response generated and streamed|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚öôÔ∏è Finalizing session state|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: false,   progress: 83,   todoProgress: '5/6 required items',   recommendedStatus: 'not applicable' }|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üìã TODO LIST BEFORE RETURN: {   turn: 4,   isComplete: false,   progress: {required: '5/6 (83%)',highPriority: '3/5 (60%)',lowPriority: '1/9 (11%)'   },   collectedData: {caloriesBurned: 240,rpe: 8,repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',intensity: 7,exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113373619',   turnCount: 4,   isComplete: false,   progressAfter: {required: '5/6 (83%)',highPriority: '3/5 (60%)',lowPriority: '1/9 (11%)'   },   collectedDataAfter: {caloriesBurned: 240,rpe: 8,repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',intensity: 7,exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b WARN ‚ö†Ô∏è Found undefined values in DynamoDB serialization: {   undefinedKeys: [ 'notes' ],   objectType: 'Object',   objectKeys: [ 'status', 'value', 'confidence', 'notes', 'extractedFrom' ] }|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b WARN ‚ö†Ô∏è Found undefined values in DynamoDB serialization: {   undefinedKeys: [ 'notes' ],   objectType: 'Object',   objectKeys: [ 'status', 'value', 'confidence', 'notes', 'extractedFrom' ] }|
| 1764113381079 | 2025-11-25T23:29:41.079Z f2878780-1004-4e7f-8fce-2a5361c6088b WARN ‚ö†Ô∏è Found undefined values in DynamoDB serialization: {   undefinedKeys: [ 'notes' ],   objectType: 'Object',   objectKeys: [ 'status', 'value', 'confidence', 'notes', 'extractedFrom' ] }|
| 1764113381093 | 2025-11-25T23:29:41.093Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Workout collection flow completed|
| 1764113381093 | 2025-11-25T23:29:41.093Z f2878780-1004-4e7f-8fce-2a5361c6088b INFO ‚úÖ Streaming pipeline completed successfully|
| 1764113381095 | END RequestId: f2878780-1004-4e7f-8fce-2a5361c6088b|
| 1764113381095 | REPORT RequestId: f2878780-1004-4e7f-8fce-2a5361c6088b Duration: 15043.99 ms Billed Duration: 15044 ms Memory Size: 2048 MB Max Memory Used: 295 MB|
| 1764113399144 | START RequestId: a8829c19-9264-4e5e-8a4c-528029f4dc3b Version: $LATEST|
| 1764113399145 | 2025-11-25T23:29:59.145Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764113399145 | 2025-11-25T23:29:59.145Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764113399146 | 2025-11-25T23:29:59.146Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113399146 | 2025-11-25T23:29:59.146Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764113399146 | 2025-11-25T23:29:59.146Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764113399146 | 2025-11-25T23:29:59.146Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764113399147 | 2025-11-25T23:29:59.147Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üì° Yielded start event immediately|
| 1764113399147 | 2025-11-25T23:29:59.147Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üì° Yielded coach acknowledgment (contextual): "Let's figure this out."|
| 1764113399147 | 2025-11-25T23:29:59.147Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113399147 | 2025-11-25T23:29:59.147Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764113399147 | 2025-11-25T23:29:59.147Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 74,   imageCount: 0 }|
| 1764113399147 | 2025-11-25T23:29:59.147Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764113399152 | 2025-11-25T23:29:59.152Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO user data loaded from DynamoDB successfully|
| 1764113399152 | 2025-11-25T23:29:59.152Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113399152 | 2025-11-25T23:29:59.152Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764113399152 | 2025-11-25T23:29:59.152Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üß† Smart Router analyzing request capabilities: {   messageLength: 74,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO === BEDROCK API CALL START ===|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO AWS Region: us-west-2|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO System prompt length: 18065|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO User message length: 203|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Thinking enabled: false|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üéØ Response prefilling enabled: {|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Converse command created successfully..|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO About to call bedrockClient.send()...|
| 1764113399153 | 2025-11-25T23:29:59.153Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Starting Bedrock API call with 60s timeout..|
| 1764113399161 | 2025-11-25T23:29:59.161Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO coachConfig data loaded from DynamoDB successfully|
| 1764113399166 | 2025-11-25T23:29:59.166Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO coachConversation data loaded from DynamoDB successfully|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO bedrockClient.send() completed successfully|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Response received from Bedrock|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Response metadata: {   httpStatusCode: 200,   requestId: '7fb6dcd5-0935-4dee-bdb1-6961adce1916',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "general",\n' +'  "showContextualUpdates": false,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.15,\n' +'"workoutType": null,\n' +`"reasoning": "Past tense 'trained' present, but lacks specific workout content (no times, weights, reps, distances, exercises, or named workouts). Vague reference without concrete logging details."\n` +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "No explicit memory request. General statement about training location and style, not a preference or constraint worth saving."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "No specific questions, performance comparisons, or requests requiring historical context or methodology guidance."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Simple statement about training location and style. No emotional language, goals, setbacks, or coaching decisions needed."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.85,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1385, newLength: 1386 }|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Successfully extracted response text, length: 1386|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO === BEDROCK API CALL SUCCESS ===|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'general',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 4500,   confidence: 0.85 }|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Parallel data loading completed in 4500ms|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764113403652 | 2025-11-25T23:30:03.652Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764113404343 | 2025-11-25T23:30:04.343Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO workout data queried from DynamoDB successfully|
| 1764113404354 | 2025-11-25T23:30:04.354Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 104,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764113404354 | 2025-11-25T23:30:04.354Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...','Completed Vigor Tractus (upper body pulling streng...'   ] }|
| 1764113404354 | 2025-11-25T23:30:04.354Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764113404354 | 2025-11-25T23:30:04.354Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üß† Smart Router Analysis: {   userIntent: 'general',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 4500,   fallbackUsed: false }|
| 1764113404354 | 2025-11-25T23:30:04.354Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764113404354 | 2025-11-25T23:30:04.354Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üèãÔ∏è Continuing workout collection session|
| 1764113404354 | 2025-11-25T23:30:04.354Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113404354',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 4,   hasImages: false,   progressBefore: {required: '5/6 (83%)',highPriority: '3/5 (60%)',lowPriority: '1/9 (11%)'   },   collectedDataBefore: {caloriesBurned: 240,rpe: 8,repsOrTime: '20 reps deadlifts, 800m run',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',intensity: 7,exercises: 'deadlifts, 800m run',workoutDate: 'today'   } }|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚ú® Handling workout to-do list conversation|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üìä Turn 5 of workout collection|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîç Extracting workout information from user response|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO === BEDROCK API CALL START ===|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO AWS Region: us-west-2|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO System prompt length: 4878|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO User message length: 2223|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Thinking enabled: false|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Converse command created successfully..|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO About to call bedrockClient.send()...|
| 1764113404355 | 2025-11-25T23:30:04.355Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Starting Bedrock API call with 60s timeout..|
| 1764113409357 | 2025-11-25T23:30:09.357Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO HEARTBEAT: Lambda still running, waiting for Bedrock response..|
| 1764113413461 | 2025-11-25T23:30:13.461Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO bedrockClient.send() completed successfully|
| 1764113413461 | 2025-11-25T23:30:13.461Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Response received from Bedrock|
| 1764113413461 | 2025-11-25T23:30:13.461Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Response metadata: {   httpStatusCode: 200,   requestId: '075c66b8-48fd-4668-b313-e896f9b60040',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113413461 | 2025-11-25T23:30:13.461Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_Oc4LEwoeQgy1jvmnkfU3Ng',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764113413461 | 2025-11-25T23:30:13.461Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîß Tool use requested, extracting tool result|
| 1764113413461 | 2025-11-25T23:30:13.461Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Received extraction response|
| 1764113413461 | 2025-11-25T23:30:13.461Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Tool-based extraction successful|
| 1764113413461 | 2025-11-25T23:30:13.461Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted exercises: "deadlifts, 800m run"|
| 1764113413461 | 2025-11-25T23:30:13.461Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted setsOrRounds: 3|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted repsOrTime: "20 reps (DL), 800m (run)"|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted weights: "225lbs"|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted workoutDate: "today"|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted discipline: "crossfit"|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted sessionDuration: 45|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted duration: 27|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted intensity: 7|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted rpe: 8|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted caloriesBurned: 240|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted location: "home garage gym"|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extracted workoutType: "chipper"|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Extraction complete: 13 fields updated|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 5,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '2/9 (22%)'   },   collectedData: {caloriesBurned: 240,rpe: 8,repsOrTime: '20 reps (DL), 800m (run)',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',sessionDuration: 45,duration: 27,intensity: 7,exercises: 'deadlifts, 800m run',workoutType: 'chipper',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üéØ Generating next workout question based on UPDATED to-do list|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üéØ Generating next workout creator question (streaming) { turnCount: 5 }|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO === BEDROCK STREAMING API CALL START ===|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO AWS Region: us-west-2|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO System prompt length: 3981|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO User message length: 541|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Thinking enabled: false|
| 1764113413462 | 2025-11-25T23:30:13.462Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Converse stream command created successfully..|
| 1764113414333 | 2025-11-25T23:30:14.333Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Stream response received from Bedrock|
| 1764113416029 | 2025-11-25T23:30:16.029Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO === BEDROCK STREAMING API CALL SUCCESS ===|
| 1764113416029 | 2025-11-25T23:30:16.029Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO Stream complete. Total response length: 291|
| 1764113416029 | 2025-11-25T23:30:16.029Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Question generation streaming complete|
| 1764113416029 | 2025-11-25T23:30:16.029Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Response generated and streamed|
| 1764113416029 | 2025-11-25T23:30:16.029Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚öôÔ∏è Finalizing session state|
| 1764113416029 | 2025-11-25T23:30:16.029Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Workout to-do list session update processed: {   isComplete: false,   atRecommendedPhase: true,   progress: 100,   todoProgress: '6/6 required items',   recommendedStatus: 'asking for optional fields' }|
| 1764113416029 | 2025-11-25T23:30:16.029Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üìã TODO LIST BEFORE RETURN: {   turn: 5,   isComplete: false,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '2/9 (22%)'   },   collectedData: {caloriesBurned: 240,rpe: 8,repsOrTime: '20 reps (DL), 800m (run)',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',sessionDuration: 45,duration: 27,intensity: 7,exercises: 'deadlifts, 800m run',workoutType: 'chipper',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764113416029 | 2025-11-25T23:30:16.029Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113404354',   turnCount: 5,   isComplete: false,   progressAfter: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '2/9 (22%)'   },   collectedDataAfter: {caloriesBurned: 240,rpe: 8,repsOrTime: '20 reps (DL), 800m (run)',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',sessionDuration: 45,duration: 27,intensity: 7,exercises: 'deadlifts, 800m run',workoutType: 'chipper',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764113416029 | 2025-11-25T23:30:16.029Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764113416043 | 2025-11-25T23:30:16.043Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Workout collection flow completed|
| 1764113416044 | 2025-11-25T23:30:16.044Z a8829c19-9264-4e5e-8a4c-528029f4dc3b INFO ‚úÖ Streaming pipeline completed successfully|
| 1764113416045 | END RequestId: a8829c19-9264-4e5e-8a4c-528029f4dc3b|
| 1764113416045 | REPORT RequestId: a8829c19-9264-4e5e-8a4c-528029f4dc3b Duration: 16900.72 ms Billed Duration: 16901 ms Memory Size: 2048 MB Max Memory Used: 295 MB|
| 1764113442511 | START RequestId: 1ee53f3c-8a9a-4e13-8974-a02eede95413 Version: $LATEST|
| 1764113442512 | 2025-11-25T23:30:42.512Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üöÄ Processing streaming request: {   method: 'POST',   path: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream' }|
| 1764113442512 | 2025-11-25T23:30:42.512Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîç withStreamingAuth received event: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasHeaders: true,   headerKeys: ['sec-fetch-mode','referer','content-length','x-amzn-tls-version','sec-fetch-site','x-forwarded-proto','accept-language','origin','x-forwarded-port','x-forwarded-for','accept','authorization','x-amzn-tls-cipher-suite','sec-ch-ua','x-amzn-trace-id','sec-ch-ua-mobile','sec-ch-ua-platform','host','content-type','cache-control','accept-encoding','user-agent','sec-fetch-dest'   ] }|
| 1764113442512 | 2025-11-25T23:30:42.512Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113442512 | 2025-11-25T23:30:42.512Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Streaming authentication successful: {   userId: '63gocaz-j-AYRsb0094ik',   pathUserId: '63gocaz-j-AYRsb0094ik',   username: 'm3kan1cal' }|
| 1764113442512 | 2025-11-25T23:30:42.512Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üöÄ Starting stream-coach-conversation handler (Proper Pipeline Mode)|
| 1764113442512 | 2025-11-25T23:30:42.512Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üì• Event details: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   method: 'POST',   hasBody: true,   authenticatedUser: '63gocaz-j-AYRsb0094ik' }|
| 1764113442513 | 2025-11-25T23:30:42.513Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üì° Yielded start event immediately|
| 1764113442513 | 2025-11-25T23:30:42.513Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üì° Yielded coach acknowledgment (contextual): "Right on."|
| 1764113442513 | 2025-11-25T23:30:42.513Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîç Extracting path parameters: {   rawPath: '/users/63gocaz-j-AYRsb0094ik/coaches/user_63gocaz-j-AYRsb0094ik_coach_1756078034317/conversations/conv_1763761119267_ek3vk5fw0/stream',   pathParts: ['users','63gocaz-j-AYRsb0094ik','coaches','user_63gocaz-j-AYRsb0094ik_coach_1756078034317','conversations','conv_1763761119267_ek3vk5fw0','stream'   ],   length: 7,   routePattern: 'users/{userId}/coaches/{coachId}/conversations/{conversationId}/stream' }|
| 1764113442513 | 2025-11-25T23:30:42.513Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Path parameters validated: {   userId: '63gocaz-j-AYRsb0094ik',   coachId: 'user_63gocaz-j-AYRsb0094ik_coach_1756078034317',   conversationId: 'conv_1763761119267_ek3vk5fw0' }|
| 1764113442513 | 2025-11-25T23:30:42.513Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Request body validated: {   hasUserResponse: true,   hasMessageTimestamp: true,   userResponseLength: 52,   imageCount: 0 }|
| 1764113442513 | 2025-11-25T23:30:42.513Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîÑ Attempting Load user from DynamoDB (attempt 1/6)|
| 1764113442517 | 2025-11-25T23:30:42.517Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO user data loaded from DynamoDB successfully|
| 1764113442518 | 2025-11-25T23:30:42.518Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ User profile loaded for smart router: {   hasProfile: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113442518 | 2025-11-25T23:30:42.518Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üöÄ Starting parallel data loading: Router + Conversation + Config|
| 1764113442518 | 2025-11-25T23:30:42.518Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üß† Smart Router analyzing request capabilities: {   messageLength: 52,   hasContext: false,   conversationLength: 0,   hasTimezone: true,   timezone: 'America/New_York',   hasCriticalDirective: true }|
| 1764113442518 | 2025-11-25T23:30:42.518Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO === BEDROCK API CALL START ===|
| 1764113442518 | 2025-11-25T23:30:42.518Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO AWS Region: us-west-2|
| 1764113442518 | 2025-11-25T23:30:42.518Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113442518 | 2025-11-25T23:30:42.518Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO System prompt length: 18065|
| 1764113442518 | 2025-11-25T23:30:42.518Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO User message length: 181|
| 1764113442518 | 2025-11-25T23:30:42.518Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Thinking enabled: false|
| 1764113442518 | 2025-11-25T23:30:42.518Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîÑ Attempting Load coachConversation from DynamoDB (attempt 1/6)|
| 1764113442519 | 2025-11-25T23:30:42.519Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîÑ Attempting Load coachConfig from DynamoDB (attempt 1/6)|
| 1764113442519 | 2025-11-25T23:30:42.519Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113442519 | 2025-11-25T23:30:42.519Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113442519 | 2025-11-25T23:30:42.519Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üéØ Response prefilling enabled: {|
| 1764113442519 | 2025-11-25T23:30:42.519Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Converse command created successfully..|
| 1764113442519 | 2025-11-25T23:30:42.519Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO About to call bedrockClient.send()...|
| 1764113442519 | 2025-11-25T23:30:42.519Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Starting Bedrock API call with 60s timeout..|
| 1764113442527 | 2025-11-25T23:30:42.527Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO coachConfig data loaded from DynamoDB successfully|
| 1764113442532 | 2025-11-25T23:30:42.532Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO coachConversation data loaded from DynamoDB successfully|
| 1764113447524 | 2025-11-25T23:30:47.524Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO HEARTBEAT: Lambda still running, waiting for Bedrock response..|
| 1764113447976 | 2025-11-25T23:30:47.976Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO bedrockClient.send() completed successfully|
| 1764113447977 | 2025-11-25T23:30:47.977Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Response received from Bedrock|
| 1764113447977 | 2025-11-25T23:30:47.977Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Response metadata: {   httpStatusCode: 200,   requestId: '49ab61cc-456e-431f-9b8f-a1ce540a5f39',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113447977 | 2025-11-25T23:30:47.977Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: true,   textType: 'string',   contentFirstItem: {text: '\n' +'  "userIntent": "general",\n' +'  "showContextualUpdates": false,\n' +'  "workoutDetection": {\n' +'"isWorkoutLog": false,\n' +'"confidence": 0.0,\n' +'"workoutType": null,\n' +'"reasoning": "Message describes sleep duration, not a completed workout. No past-tense workout completion language or specific exercise details present."\n' +'  },\n' +'  "memoryProcessing": {\n' +'"needsRetrieval": false,\n' +'"isMemoryRequest": false,\n' +'"memoryCharacteristics": null,\n' +'"reasoning": "User is sharing sleep information, not requesting memory save or retrieval. No explicit save intent or personal preference documentation language."\n' +'  },\n' +'  "contextNeeds": {\n' +'"needsPineconeSearch": false,\n' +'"searchTypes": [],\n' +'"reasoning": "Sleep mention is contextual information about recovery status, not requiring historical workout or methodology search."\n' +'  },\n' +'  "conversationComplexity": {\n' +'"hasComplexity": false,\n' +'"complexityTypes": [],\n' +'"needsSummary": false,\n' +'"requiresDeepReasoning": false,\n' +'"confidence": 0.95,\n' +'"reasoning": "Simple factual statement about sleep duration. No emotional language, goals, setbacks, or coaching complexity indicators present."\n' +'  },\n' +'  "processingPriority": {\n' +'"workoutFirst": false,\n' +'"memoryFirst": false,\n' +'"contextFirst": false\n' +'  },\n' +'  "routerMetadata": {\n' +'"confidence": 0.95,\n' +'"processingTime": null,\n' +'"fallbackUsed": false\n' +'  }\n' +'}'   } }|
| 1764113447977 | 2025-11-25T23:30:47.977Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üéØ Prepended prefill text to response: { prefillText: '{', originalLength: 1374, newLength: 1375 }|
| 1764113447977 | 2025-11-25T23:30:47.977Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Successfully extracted response text, length: 1375|
| 1764113447977 | 2025-11-25T23:30:47.977Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO === BEDROCK API CALL SUCCESS ===|
| 1764113447977 | 2025-11-25T23:30:47.977Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Smart Router analysis completed: {   userIntent: 'general',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   hasComplexity: false,   requiresDeepReasoning: false,   processingTime: 5459,   confidence: 0.95 }|
| 1764113447977 | 2025-11-25T23:30:47.977Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Parallel data loading completed in 5459ms|
| 1764113447977 | 2025-11-25T23:30:47.977Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚è≠Ô∏è Router skipped Pinecone - loading basic context only|
| 1764113447977 | 2025-11-25T23:30:47.977Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîÑ Attempting Query workout from DynamoDB (attempt 1/6)|
| 1764113448650 | 2025-11-25T23:30:48.650Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO workout data queried from DynamoDB successfully|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Workouts queried successfully: {   userId: '63gocaz-j-AYRsb0094ik',   totalFound: 104,   afterFiltering: 14,   filters: { limit: 14, sortBy: 'completedAt', sortOrder: 'desc' } }|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Loaded recent workouts for context: {   userId: '63gocaz-j-AYRsb0094ik',   workoutCount: 14,   summaries: ['Completed "Fortis Pressura" - 5 rounds for time in...','Completed "Fortis Cursus" - a 10-minute AMRAP of 1...','Completed Hero WOD "Murph" Rx with 20# vest in 52:...','Completed Fortis Endura - a 10-minute AMRAP of 20 ...','Completed Mortis Viginti - a 20-minute EMOM with 1...','Completed "Fortis Ascensus" - a hybrid strength an...','Completed Tempestus Fortis - a 10-round interval w...','Completed "Tempestus Triplex" - a 15-minute AMRAP ...','Completed Fortis Crura powerlifting session with b...','Completed Ventus Brevis 8-minute AMRAP (dumbbell t...','Completed Magnus Scapula as prescribed in 17 minut...','Completed Impetus Potentia powerlifting session wi...','Completed Ferrum Rapidus (3 rounds of 400m row, 20...','Completed Vigor Tractus (upper body pulling streng...'   ] }|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚è≠Ô∏è Skipping Pinecone query - message does not require semantic search|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üß† Smart Router Analysis: {   userIntent: 'general',   showContextualUpdates: false,   isWorkoutLog: false,   needsMemoryRetrieval: false,   needsPineconeSearch: false,   pineconeSearchUsed: false,   hasComplexity: false,   processingTime: 5459,   fallbackUsed: false }|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üèãÔ∏è Workout collection session in progress - continuing multi-turn flow|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üèãÔ∏è Continuing workout collection session|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîÑ CONTINUING WORKOUT SESSION: {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113448661',   userId: '63gocaz-j-AYRsb0094ik',   conversationId: 'conv_1763761119267_ek3vk5fw0',   turnCount: 5,   hasImages: false,   progressBefore: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '2/9 (22%)'   },   collectedDataBefore: {caloriesBurned: 240,rpe: 8,repsOrTime: '20 reps (DL), 800m (run)',setsOrRounds: 3,discipline: 'crossfit',weights: '225lbs',sessionDuration: 45,duration: 27,intensity: 7,exercises: 'deadlifts, 800m run',workoutType: 'chipper',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚ú® Handling workout to-do list conversation|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîç Extracting information and updating workout to-do list BEFORE generating next question|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üìä Turn 6 of workout collection|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîç Extracting workout information from user response|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO === BEDROCK API CALL START ===|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO AWS Region: us-west-2|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Model ID: us.anthropic.claude-haiku-4-5-20251001-v1:0|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO System prompt length: 4878|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO User message length: 2556|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Thinking enabled: false|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Bedrock client config: { region: 'us-west-2' }|
| 1764113448661 | 2025-11-25T23:30:48.661Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Environment variables: {   AWS_REGION: 'us-west-2',   AWS_DEFAULT_REGION: 'us-west-2',   AWS_LAMBDA_FUNCTION_NAME: 'amplify-neonpandaprotov1--streamcoachconversationl-YrHSi4Ltryf1' }|
| 1764113448662 | 2025-11-25T23:30:48.662Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Converse command created successfully..|
| 1764113448662 | 2025-11-25T23:30:48.662Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO About to call bedrockClient.send()...|
| 1764113448662 | 2025-11-25T23:30:48.662Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Starting Bedrock API call with 60s timeout..|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO bedrockClient.send() completed successfully|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Response received from Bedrock|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Response metadata: {   httpStatusCode: 200,   requestId: 'ffd788bd-2693-41c7-9965-c00be133b412',   extendedRequestId: undefined,   cfId: undefined,   attempts: 1,   totalRetryDelay: 0 }|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO Response structure: {   hasOutput: true,   hasMessage: true,   hasContent: true,   contentLength: 1,   hasText: false,   textType: 'undefined',   contentFirstItem: {toolUse: {toolUseId: 'tooluse_3JpUiGZlQLy4l9Lq1bM6QQ',name: 'extract_workout_info',input: [Object],type: 'tool_use'}   } }|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîß Tool use requested, extracting tool result|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Received extraction response|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Tool-based extraction successful|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Extracted sleepHours: 6|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Extraction complete: 1 fields updated|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üìã TODO LIST AFTER EXTRACTION: {   turn: 6,   progress: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '3/9 (33%)'   },   collectedData: {caloriesBurned: 240,rpe: 8,repsOrTime: '20 reps (DL), 800m (run)',setsOrRounds: 3,sleepHours: 6,discipline: 'crossfit',weights: '225lbs',sessionDuration: 45,duration: 27,intensity: 7,exercises: 'deadlifts, 800m run',workoutType: 'chipper',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚è∞ Max turns (6) reached with required fields complete - auto-completing workout logging|
| 1764113450573 | 2025-11-25T23:30:50.573Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üìä SESSION STATE AFTER HANDLER (handleWorkoutCreatorFlow): {   sessionId: 'workout_creator_conv_1763761119267_ek3vk5fw0_1764113448661',   turnCount: 6,   isComplete: true,   progressAfter: {required: '6/6 (100%)',highPriority: '5/5 (100%)',lowPriority: '3/9 (33%)'   },   collectedDataAfter: {caloriesBurned: 240,rpe: 8,repsOrTime: '20 reps (DL), 800m (run)',setsOrRounds: 3,sleepHours: 6,discipline: 'crossfit',weights: '225lbs',sessionDuration: 45,duration: 27,intensity: 7,exercises: 'deadlifts, 800m run',workoutType: 'chipper',workoutDate: 'today',location: 'home garage gym'   } }|
| 1764113450574 | 2025-11-25T23:30:50.574Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üéâ Workout collection complete - triggering build-workout|
| 1764113450574 | 2025-11-25T23:30:50.574Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üöÄ Triggering async Lambda invocation for multi-turn workout creation: {   functionName: 'amplify-neonpandaprotov1--buildworkoutlambda23D1E4-KFUp94ybUR20',   payloadKeys: ['userId','coachId','conversationId','userMessage','coachConfig','imageS3Keys','userTimezone','criticalTrainingDirective'   ],   context: 'multi-turn workout creation' }|
| 1764113450637 | 2025-11-25T23:30:50.637Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Successfully triggered async Lambda for multi-turn workout creation: {   functionName: 'amplify-neonpandaprotov1--buildworkoutlambda23D1E4-KFUp94ybUR20',   payloadSize: 11491 }|
| 1764113450637 | 2025-11-25T23:30:50.637Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Triggered async workout creation|
| 1764113450637 | 2025-11-25T23:30:50.637Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO üîÑ Attempting Save coachConversation to DynamoDB (attempt 1/6)|
| 1764113450649 | 2025-11-25T23:30:50.649Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Workout collection flow completed|
| 1764113450649 | 2025-11-25T23:30:50.649Z 1ee53f3c-8a9a-4e13-8974-a02eede95413 INFO ‚úÖ Streaming pipeline completed successfully|
| 1764113450650 | END RequestId: 1ee53f3c-8a9a-4e13-8974-a02eede95413|
| 1764113450650 | REPORT RequestId: 1ee53f3c-8a9a-4e13-8974-a02eede95413 Duration: 8138.75 ms Billed Duration: 8139 ms Memory Size: 2048 MB Max Memory Used: 295 MB|
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------