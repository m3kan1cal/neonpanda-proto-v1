<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NeonPanda API Documentation</title>
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5.18.2/swagger-ui.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #1a1a2e; }
    .swagger-ui .topbar { display: none; }
    .swagger-ui { max-width: 1400px; margin: 0 auto; }

    /* Custom header */
    .api-header {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      padding: 2rem;
      text-align: center;
      border-bottom: 2px solid #e94560;
    }
    .api-header h1 {
      color: #e94560;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
    }
    .api-header p {
      color: #a0a0b8;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 0.95rem;
    }
    .api-header .build-info {
      color: #666;
      font-size: 0.75rem;
      margin-top: 0.5rem;
    }

    /* Dark theme overrides */
    .swagger-ui .scheme-container { background: #16213e; box-shadow: none; }
    .swagger-ui .opblock-tag { color: #e0e0e0; border-bottom-color: #333; }
    .swagger-ui .opblock-tag:hover { background: rgba(233, 69, 96, 0.05); }
    .swagger-ui .opblock .opblock-summary-description { color: #a0a0b8; }
    .swagger-ui section.models { border-color: #333; }
    .swagger-ui .model-title { color: #e0e0e0; }
    .swagger-ui .info .title { color: #e94560; }
    .swagger-ui .info p, .swagger-ui .info li { color: #c0c0d0; }
    .swagger-ui .info a { color: #e94560; }
  </style>
</head>
<body>
  <div class="api-header">
    <h1>NeonPanda API Documentation</h1>
    <p>AI Fitness Coaching Platform &mdash; REST API Reference</p>
    <div class="build-info">Generated: 2026-02-15T19:31:12.005Z</div>
  </div>

  <div id="swagger-ui"></div>

  <script src="https://unpkg.com/swagger-ui-dist@5.18.2/swagger-ui-bundle.js"></script>
  <script src="https://unpkg.com/swagger-ui-dist@5.18.2/swagger-ui-standalone-preset.js"></script>
  <script src="https://unpkg.com/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <script>
    // Embedded OpenAPI spec (YAML)
    const yamlSpec = "openapi: 3.0.3\ninfo:\n  title: NeonPanda AI Fitness Coaching API\n  description: |\n    RESTful API for the NeonPanda AI fitness coaching platform.\n    Provides endpoints for managing AI coaches, conversations, training programs,\n    workouts, exercises, analytics, and more.\n\n    ## Authentication\n    Most endpoints require a valid JWT token from AWS Cognito.\n    Include the token in the `Authorization` header as `Bearer <token>`.\n\n    Public endpoints (no auth required) are marked accordingly.\n\n    ## Base URLs\n    - **Production**: `https://api-prod.neonpanda.ai`\n    - **Development**: `https://api-dev.neonpanda.ai`\n    - **Sandbox**: Default AWS Amplify endpoint\n  version: 1.0.0\n  contact:\n    name: NeonPanda Support\n    url: https://neonpanda.ai/contact\n\nservers:\n  - url: https://api-prod.neonpanda.ai\n    description: Production\n  - url: https://api-dev.neonpanda.ai\n    description: Development\n\ntags:\n  - name: Public\n    description: Public endpoints (no authentication required)\n  - name: Coach Creator Sessions\n    description: AI-guided coach creation sessions\n  - name: Coaches\n    description: Coach configuration management\n  - name: Coach Conversations\n    description: Chat conversations with AI coaches\n  - name: Program Designer Sessions\n    description: AI-guided training program design sessions\n  - name: Programs\n    description: Training program management\n  - name: Workout Templates\n    description: Program workout template management\n  - name: Shared Programs\n    description: Program sharing and discovery\n  - name: Workouts\n    description: Workout logging and history\n  - name: Exercises\n    description: Exercise data and history\n  - name: Memories\n    description: User memory and preference management\n  - name: Reports\n    description: Weekly and monthly analytics reports\n  - name: User Profile\n    description: User profile management\n  - name: Subscriptions\n    description: Subscription and billing management\n  - name: Media\n    description: Image upload and download URL generation\n  - name: AI Utilities\n    description: AI-powered utility endpoints\n\ncomponents:\n  securitySchemes:\n    CognitoAuth:\n      type: http\n      scheme: bearer\n      bearerFormat: JWT\n      description: AWS Cognito JWT token\n\n  parameters:\n    UserIdParam:\n      name: userId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The user's unique identifier\n    CoachIdParam:\n      name: coachId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The coach configuration ID\n    SessionIdParam:\n      name: sessionId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The session ID\n    ProgramIdParam:\n      name: programId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The training program ID\n    TemplateIdParam:\n      name: templateId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The template ID\n    ConversationIdParam:\n      name: conversationId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The conversation ID\n    WorkoutIdParam:\n      name: workoutId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The workout ID\n    MemoryIdParam:\n      name: memoryId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The memory ID\n    SharedProgramIdParam:\n      name: sharedProgramId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The shared program ID\n    WeekIdParam:\n      name: weekId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The week ID (e.g., 2024-W01)\n    MonthIdParam:\n      name: monthId\n      in: path\n      required: true\n      schema:\n        type: string\n      description: The month ID (e.g., 2024-01)\n    LimitParam:\n      name: limit\n      in: query\n      schema:\n        type: integer\n        minimum: 1\n        maximum: 100\n        default: 25\n      description: Maximum number of items to return\n    OffsetParam:\n      name: offset\n      in: query\n      schema:\n        type: integer\n        minimum: 0\n        default: 0\n      description: Number of items to skip\n    SortOrderParam:\n      name: sortOrder\n      in: query\n      schema:\n        type: string\n        enum: [asc, desc]\n        default: desc\n      description: Sort direction\n\n  schemas:\n    SuccessResponse:\n      type: object\n      properties:\n        success:\n          type: boolean\n          example: true\n      required:\n        - success\n\n    ErrorResponse:\n      type: object\n      properties:\n        success:\n          type: boolean\n          example: false\n        error:\n          type: string\n        details:\n          type: string\n      required:\n        - success\n        - error\n\n    CoachConfig:\n      type: object\n      properties:\n        coachId:\n          type: string\n        userId:\n          type: string\n        coachName:\n          type: string\n        personality:\n          type: object\n          properties:\n            communicationStyle:\n              type: string\n            motivationApproach:\n              type: string\n            coachingPhilosophy:\n              type: string\n        specializations:\n          type: array\n          items:\n            type: string\n        avatarUrl:\n          type: string\n        status:\n          type: string\n          enum: [ACTIVE, BUILDING, ERROR]\n        createdAt:\n          type: string\n          format: date-time\n        updatedAt:\n          type: string\n          format: date-time\n\n    CoachTemplate:\n      type: object\n      properties:\n        template_id:\n          type: string\n        template_name:\n          type: string\n        persona_category:\n          type: string\n        description:\n          type: string\n        target_audience:\n          type: string\n        metadata:\n          type: object\n\n    CoachCreatorSession:\n      type: object\n      properties:\n        sessionId:\n          type: string\n        userId:\n          type: string\n        status:\n          type: string\n          enum: [IN_PROGRESS, COMPLETED, ERROR]\n        conversationHistory:\n          type: array\n          items:\n            type: object\n            properties:\n              role:\n                type: string\n                enum: [user, assistant]\n              content:\n                type: string\n        createdAt:\n          type: string\n          format: date-time\n        updatedAt:\n          type: string\n          format: date-time\n\n    CoachConversation:\n      type: object\n      properties:\n        conversationId:\n          type: string\n        userId:\n          type: string\n        coachId:\n          type: string\n        title:\n          type: string\n        messages:\n          type: array\n          items:\n            type: object\n            properties:\n              role:\n                type: string\n                enum: [user, assistant]\n              content:\n                type: string\n              timestamp:\n                type: string\n                format: date-time\n        createdAt:\n          type: string\n          format: date-time\n        updatedAt:\n          type: string\n          format: date-time\n\n    Program:\n      type: object\n      properties:\n        programId:\n          type: string\n        userId:\n          type: string\n        coachId:\n          type: string\n        programName:\n          type: string\n        description:\n          type: string\n        totalDays:\n          type: integer\n        trainingFrequency:\n          type: string\n        phases:\n          type: array\n          items:\n            type: string\n        trainingGoals:\n          type: array\n          items:\n            type: string\n        equipmentConstraints:\n          type: array\n          items:\n            type: string\n        status:\n          type: string\n          enum: [ACTIVE, BUILDING, COMPLETED, ERROR]\n        currentDay:\n          type: integer\n        createdAt:\n          type: string\n          format: date-time\n        updatedAt:\n          type: string\n          format: date-time\n\n    ProgramDesignerSession:\n      type: object\n      properties:\n        sessionId:\n          type: string\n        userId:\n          type: string\n        status:\n          type: string\n          enum: [IN_PROGRESS, COMPLETED, ERROR]\n        conversationHistory:\n          type: array\n          items:\n            type: object\n        createdAt:\n          type: string\n          format: date-time\n        updatedAt:\n          type: string\n          format: date-time\n\n    Workout:\n      type: object\n      properties:\n        workoutId:\n          type: string\n        userId:\n          type: string\n        completedAt:\n          type: string\n          format: date-time\n        discipline:\n          type: string\n        workoutName:\n          type: string\n        workoutType:\n          type: string\n        duration:\n          type: number\n        location:\n          type: string\n        coachIds:\n          type: array\n          items:\n            type: string\n        coachNames:\n          type: array\n          items:\n            type: string\n        conversationId:\n          type: string\n        confidence:\n          type: number\n          minimum: 0\n          maximum: 1\n        summary:\n          type: string\n        performanceMetrics:\n          type: object\n          properties:\n            intensity:\n              type: number\n            perceived_exertion:\n              type: number\n            calories_burned:\n              type: number\n        prAchievements:\n          type: array\n          items:\n            type: object\n        crossfitSummary:\n          type: object\n          properties:\n            workout_format:\n              type: string\n            rx_status:\n              type: string\n            total_time:\n              type: string\n            rounds_completed:\n              type: number\n        extractedAt:\n          type: string\n          format: date-time\n\n    Exercise:\n      type: object\n      properties:\n        exerciseId:\n          type: string\n        exerciseName:\n          type: string\n        originalName:\n          type: string\n        discipline:\n          type: string\n        completedAt:\n          type: string\n          format: date-time\n        coachId:\n          type: string\n        workoutId:\n          type: string\n        sequence:\n          type: integer\n        metrics:\n          type: object\n        metadata:\n          type: object\n          properties:\n            normalizationConfidence:\n              type: number\n            notes:\n              type: string\n\n    Memory:\n      type: object\n      properties:\n        memoryId:\n          type: string\n        userId:\n          type: string\n        coachId:\n          type: string\n        content:\n          type: string\n        memoryType:\n          type: string\n          enum: [preference, goal, constraint, instruction, context]\n        metadata:\n          type: object\n          properties:\n            createdAt:\n              type: string\n              format: date-time\n            lastUsed:\n              type: string\n              format: date-time\n            usageCount:\n              type: integer\n            source:\n              type: string\n            importance:\n              type: string\n              enum: [high, medium, low]\n            tags:\n              type: array\n              items:\n                type: string\n\n    UserProfile:\n      type: object\n      properties:\n        userId:\n          type: string\n        email:\n          type: string\n        username:\n          type: string\n        firstName:\n          type: string\n        lastName:\n          type: string\n        nickname:\n          type: string\n        criticalTrainingDirective:\n          type: object\n          properties:\n            directive:\n              type: string\n            rationale:\n              type: string\n        preferences:\n          type: object\n          properties:\n            emailNotifications:\n              type: object\n              properties:\n                coachCheckIns:\n                  type: boolean\n                weeklyReports:\n                  type: boolean\n                monthlyReports:\n                  type: boolean\n                programUpdates:\n                  type: boolean\n                featureAnnouncements:\n                  type: boolean\n        createdAt:\n          type: string\n          format: date-time\n        updatedAt:\n          type: string\n          format: date-time\n\n    WeeklyReport:\n      type: object\n      properties:\n        weekId:\n          type: string\n        userId:\n          type: string\n        weekStart:\n          type: string\n          format: date-time\n        weekEnd:\n          type: string\n          format: date-time\n        workoutCount:\n          type: integer\n        summary:\n          type: object\n\n    MonthlyReport:\n      type: object\n      properties:\n        monthId:\n          type: string\n        userId:\n          type: string\n        monthStart:\n          type: string\n          format: date-time\n        monthEnd:\n          type: string\n          format: date-time\n        workoutCount:\n          type: integer\n        summary:\n          type: object\n\n    SharedProgram:\n      type: object\n      properties:\n        sharedProgramId:\n          type: string\n        creatorUserId:\n          type: string\n        creatorUsername:\n          type: string\n        programSnapshot:\n          type: object\n          properties:\n            name:\n              type: string\n            description:\n              type: string\n            totalDays:\n              type: integer\n            trainingFrequency:\n              type: string\n            phases:\n              type: array\n              items:\n                type: string\n            trainingGoals:\n              type: array\n              items:\n                type: string\n            equipmentConstraints:\n              type: array\n              items:\n                type: string\n            coachNames:\n              type: array\n              items:\n                type: string\n        sampleWorkouts:\n          type: array\n          items:\n            type: object\n        createdAt:\n          type: string\n          format: date-time\n        viewCount:\n          type: integer\n        copyCount:\n          type: integer\n\n    SubscriptionStatus:\n      type: object\n      properties:\n        success:\n          type: boolean\n        hasSubscription:\n          type: boolean\n        tier:\n          type: string\n          enum: [free, paid]\n        status:\n          type: string\n          enum: [active, canceled, paused]\n        currentPeriodEnd:\n          type: string\n          format: date-time\n        cancelAtPeriodEnd:\n          type: boolean\n        canceledAt:\n          type: string\n          format: date-time\n\n    WorkoutTemplate:\n      type: object\n      properties:\n        templateId:\n          type: string\n        programId:\n          type: string\n        dayNumber:\n          type: integer\n        workoutName:\n          type: string\n        workoutType:\n          type: string\n        exercises:\n          type: array\n          items:\n            type: object\n\n  responses:\n    BadRequest:\n      description: Bad request - validation error\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/ErrorResponse\"\n    Unauthorized:\n      description: Unauthorized - missing or invalid JWT token\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/ErrorResponse\"\n    Forbidden:\n      description: Forbidden - user does not have access to this resource\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/ErrorResponse\"\n    NotFound:\n      description: Resource not found\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/ErrorResponse\"\n    ServerError:\n      description: Internal server error\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/ErrorResponse\"\n\nsecurity:\n  - CognitoAuth: []\n\npaths:\n  # ===================================================================\n  # PUBLIC ENDPOINTS\n  # ===================================================================\n\n  /contact:\n    post:\n      tags: [Public]\n      summary: Submit contact form\n      description: Submit a contact form message. Saves to DynamoDB and sends SNS notification.\n      security: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [firstName, lastName, email, subject, message, contactType]\n              properties:\n                firstName:\n                  type: string\n                lastName:\n                  type: string\n                email:\n                  type: string\n                  format: email\n                subject:\n                  type: string\n                message:\n                  type: string\n                contactType:\n                  type: string\n                  description: \"Type of contact (e.g., support, partnership)\"\n      responses:\n        \"200\":\n          description: Contact form submitted successfully\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      message:\n                        type: string\n                      timestamp:\n                        type: string\n                        format: date-time\n                      requestId:\n                        type: string\n                      data:\n                        type: object\n                        properties:\n                          contactType:\n                            type: string\n                          firstName:\n                            type: string\n                          lastName:\n                            type: string\n                          email:\n                            type: string\n                          subject:\n                            type: string\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n        \"500\":\n          $ref: \"#/components/responses/ServerError\"\n\n  /unsubscribe:\n    get:\n      tags: [Public]\n      summary: Unsubscribe from email notifications\n      description: |\n        Unsubscribes a user from specific email notification types.\n        Returns an HTML page confirming the unsubscription.\n      security: []\n      parameters:\n        - name: email\n          in: query\n          required: true\n          schema:\n            type: string\n            format: email\n          description: The email address to unsubscribe\n        - name: type\n          in: query\n          required: true\n          schema:\n            type: string\n            enum: [coach-checkins, weekly, monthly, program, features, all]\n          description: The notification type to unsubscribe from\n      responses:\n        \"200\":\n          description: HTML page confirming unsubscription\n          content:\n            text/html:\n              schema:\n                type: string\n        \"400\":\n          description: HTML error page for invalid parameters\n          content:\n            text/html:\n              schema:\n                type: string\n\n  /users/check-availability:\n    get:\n      tags: [Public]\n      summary: Check username or email availability\n      description: Checks if a username or email is available for registration. Checks both Cognito and DynamoDB.\n      security: []\n      parameters:\n        - name: type\n          in: query\n          required: true\n          schema:\n            type: string\n            enum: [username, email]\n          description: Whether to check username or email\n        - name: value\n          in: query\n          required: true\n          schema:\n            type: string\n          description: The username or email to check\n      responses:\n        \"200\":\n          description: Availability check result\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      available:\n                        type: boolean\n                      type:\n                        type: string\n                      value:\n                        type: string\n                      existsInCognito:\n                        type: boolean\n                      existsInDynamoDB:\n                        type: boolean\n                      message:\n                        type: string\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  /coach-templates:\n    get:\n      tags: [Public]\n      summary: List all coach templates\n      description: Returns all available coach templates for browsing.\n      security: []\n      responses:\n        \"200\":\n          description: List of coach templates\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      templates:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/CoachTemplate\"\n                      count:\n                        type: integer\n\n  /coach-templates/{templateId}:\n    get:\n      tags: [Public]\n      summary: Get a specific coach template\n      description: Returns details for a single coach template.\n      security: []\n      parameters:\n        - $ref: \"#/components/parameters/TemplateIdParam\"\n      responses:\n        \"200\":\n          description: Coach template details\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      template:\n                        $ref: \"#/components/schemas/CoachTemplate\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n\n  /shared-programs/{sharedProgramId}:\n    get:\n      tags: [Public, Shared Programs]\n      summary: Get shared program preview\n      description: Returns a public preview of a shared program including sample workouts. Increments view count.\n      security: []\n      parameters:\n        - $ref: \"#/components/parameters/SharedProgramIdParam\"\n      responses:\n        \"200\":\n          description: Shared program preview\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      sharedProgramId:\n                        type: string\n                      creatorUserId:\n                        type: string\n                      creatorUsername:\n                        type: string\n                      programSnapshot:\n                        type: object\n                      sampleWorkouts:\n                        type: array\n                        items:\n                          type: object\n                      createdAt:\n                        type: string\n                        format: date-time\n                      viewCount:\n                        type: integer\n                      copyCount:\n                        type: integer\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n\n  /stripe/webhook:\n    post:\n      tags: [Public]\n      summary: Stripe webhook handler\n      description: |\n        Processes Stripe webhook events. Validates via Stripe signature (not Cognito auth).\n        Handles: checkout.session.completed, customer.subscription.created/updated/deleted,\n        invoice.payment_succeeded/failed.\n      security: []\n      parameters:\n        - name: stripe-signature\n          in: header\n          required: true\n          schema:\n            type: string\n          description: Stripe webhook signature for verification\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              description: Raw Stripe event payload\n      responses:\n        \"200\":\n          description: Webhook received\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  received:\n                    type: boolean\n                    example: true\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  # ===================================================================\n  # COACH CREATOR SESSIONS\n  # ===================================================================\n\n  /users/{userId}/coach-creator-sessions:\n    post:\n      tags: [Coach Creator Sessions]\n      summary: Create a coach creator session\n      description: Starts a new AI-guided coach creation session.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"201\":\n          description: Session created\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      session:\n                        $ref: \"#/components/schemas/CoachCreatorSession\"\n        \"401\":\n          $ref: \"#/components/responses/Unauthorized\"\n        \"500\":\n          $ref: \"#/components/responses/ServerError\"\n    get:\n      tags: [Coach Creator Sessions]\n      summary: List coach creator sessions\n      description: Returns all coach creator sessions for the user.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: List of sessions\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      sessions:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/CoachCreatorSession\"\n                      count:\n                        type: integer\n        \"401\":\n          $ref: \"#/components/responses/Unauthorized\"\n\n  /users/{userId}/coach-creator-sessions/{sessionId}:\n    get:\n      tags: [Coach Creator Sessions]\n      summary: Get a coach creator session\n      description: Returns a specific coach creator session with its conversation history.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SessionIdParam\"\n      responses:\n        \"200\":\n          description: Session details\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      session:\n                        $ref: \"#/components/schemas/CoachCreatorSession\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n    put:\n      tags: [Coach Creator Sessions]\n      summary: Update a coach creator session\n      description: Updates session data (e.g., conversation messages).\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SessionIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                conversationHistory:\n                  type: array\n                  items:\n                    type: object\n                    properties:\n                      role:\n                        type: string\n                      content:\n                        type: string\n      responses:\n        \"200\":\n          description: Session updated\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n    delete:\n      tags: [Coach Creator Sessions]\n      summary: Delete a coach creator session\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SessionIdParam\"\n      responses:\n        \"200\":\n          description: Session deleted\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n\n  /users/{userId}/coach-creator-sessions/{sessionId}/stream:\n    post:\n      tags: [Coach Creator Sessions]\n      summary: Stream coach creator conversation\n      description: |\n        Streams an AI response for the coach creation conversation using Server-Sent Events (SSE).\n        The response is streamed in real-time as the AI generates it.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SessionIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [message]\n              properties:\n                message:\n                  type: string\n                  description: The user's message to continue the coach creation conversation\n      responses:\n        \"200\":\n          description: Server-Sent Events stream\n          content:\n            text/event-stream:\n              schema:\n                type: string\n                description: SSE stream with AI response chunks\n\n  /users/{userId}/coach-creator-sessions/{sessionId}/config-status:\n    get:\n      tags: [Coach Creator Sessions]\n      summary: Get coach config build status\n      description: Checks the status of a coach configuration being built from a session.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SessionIdParam\"\n      responses:\n        \"200\":\n          description: Config build status\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      status:\n                        type: string\n                        enum: [IN_PROGRESS, COMPLETED, ERROR]\n                      coachId:\n                        type: string\n                        description: Available when status is COMPLETED\n\n  # ===================================================================\n  # COACHES (Coach Configs)\n  # ===================================================================\n\n  /users/{userId}/coaches:\n    get:\n      tags: [Coaches]\n      summary: List user's coaches\n      description: Returns all coach configurations for the user.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: List of coaches\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      userId:\n                        type: string\n                      coaches:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/CoachConfig\"\n                      count:\n                        type: integer\n\n  /users/{userId}/coaches/{coachId}:\n    get:\n      tags: [Coaches]\n      summary: Get a specific coach\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n      responses:\n        \"200\":\n          description: Coach details\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      coach:\n                        $ref: \"#/components/schemas/CoachConfig\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n    put:\n      tags: [Coaches]\n      summary: Update a coach configuration\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                coachName:\n                  type: string\n                personality:\n                  type: object\n                specializations:\n                  type: array\n                  items:\n                    type: string\n      responses:\n        \"200\":\n          description: Coach updated\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n    delete:\n      tags: [Coaches]\n      summary: Delete a coach\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n      responses:\n        \"200\":\n          description: Coach deleted\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n\n  /users/{userId}/coaches/from-session/{sessionId}:\n    post:\n      tags: [Coaches]\n      summary: Create coach from creator session\n      description: Triggers async build of a coach configuration from a completed creator session.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SessionIdParam\"\n      responses:\n        \"200\":\n          description: Coach build triggered\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      message:\n                        type: string\n                        example: Coach config build triggered successfully\n                      sessionId:\n                        type: string\n                      userId:\n                        type: string\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  /users/{userId}/coaches/from-template/{templateId}:\n    post:\n      tags: [Coaches]\n      summary: Create coach from template\n      description: Creates a coach configuration from a predefined template.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/TemplateIdParam\"\n      responses:\n        \"200\":\n          description: Coach created from template\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      coach:\n                        $ref: \"#/components/schemas/CoachConfig\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n\n  /users/{userId}/coaches/count:\n    get:\n      tags: [Coaches]\n      summary: Get coach count\n      description: Returns the number of coaches for the user.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: Coach count\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      count:\n                        type: integer\n\n  # ===================================================================\n  # COACH CONVERSATIONS\n  # ===================================================================\n\n  /users/{userId}/coaches/{coachId}/conversations:\n    post:\n      tags: [Coach Conversations]\n      summary: Create a new conversation\n      description: Starts a new conversation with a specific coach.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n      responses:\n        \"201\":\n          description: Conversation created\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      conversation:\n                        $ref: \"#/components/schemas/CoachConversation\"\n    get:\n      tags: [Coach Conversations]\n      summary: List conversations with a coach\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n      responses:\n        \"200\":\n          description: List of conversations\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      conversations:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/CoachConversation\"\n                      count:\n                        type: integer\n\n  /users/{userId}/coaches/{coachId}/conversations/{conversationId}:\n    get:\n      tags: [Coach Conversations]\n      summary: Get a conversation\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ConversationIdParam\"\n      responses:\n        \"200\":\n          description: Conversation details\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      conversation:\n                        $ref: \"#/components/schemas/CoachConversation\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n    put:\n      tags: [Coach Conversations]\n      summary: Update a conversation\n      description: Updates conversation metadata (e.g., title).\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ConversationIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                title:\n                  type: string\n      responses:\n        \"200\":\n          description: Conversation updated\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n    delete:\n      tags: [Coach Conversations]\n      summary: Delete a conversation\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ConversationIdParam\"\n      responses:\n        \"200\":\n          description: Conversation deleted\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n\n  /users/{userId}/coaches/{coachId}/conversations/{conversationId}/send-message:\n    post:\n      tags: [Coach Conversations]\n      summary: Send a message in a conversation\n      description: Sends a message to the AI coach and receives a response.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ConversationIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [message]\n              properties:\n                message:\n                  type: string\n                  description: The user's message to the coach\n      responses:\n        \"200\":\n          description: AI coach response\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      response:\n                        type: string\n                        description: The coach's response message\n\n  /users/{userId}/coaches/{coachId}/conversations/count:\n    get:\n      tags: [Coach Conversations]\n      summary: Get conversation count for a coach\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n      responses:\n        \"200\":\n          description: Conversation count\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      count:\n                        type: integer\n\n  # ===================================================================\n  # PROGRAM DESIGNER SESSIONS\n  # ===================================================================\n\n  /users/{userId}/program-designer-sessions:\n    post:\n      tags: [Program Designer Sessions]\n      summary: Create a program designer session\n      description: Starts a new AI-guided program design session.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"201\":\n          description: Session created\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      session:\n                        $ref: \"#/components/schemas/ProgramDesignerSession\"\n    get:\n      tags: [Program Designer Sessions]\n      summary: List program designer sessions\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: List of sessions\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      sessions:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/ProgramDesignerSession\"\n\n  /users/{userId}/program-designer-sessions/{sessionId}:\n    get:\n      tags: [Program Designer Sessions]\n      summary: Get a program designer session\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SessionIdParam\"\n      responses:\n        \"200\":\n          description: Session details\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      session:\n                        $ref: \"#/components/schemas/ProgramDesignerSession\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n    delete:\n      tags: [Program Designer Sessions]\n      summary: Delete a program designer session\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SessionIdParam\"\n      responses:\n        \"200\":\n          description: Session deleted\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n\n  /users/{userId}/program-designer-sessions/{sessionId}/stream:\n    post:\n      tags: [Program Designer Sessions]\n      summary: Stream program designer conversation\n      description: Streams an AI response for program design using Server-Sent Events (SSE).\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SessionIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [message]\n              properties:\n                message:\n                  type: string\n      responses:\n        \"200\":\n          description: Server-Sent Events stream\n          content:\n            text/event-stream:\n              schema:\n                type: string\n\n  # ===================================================================\n  # TRAINING PROGRAMS\n  # ===================================================================\n\n  /users/{userId}/programs:\n    get:\n      tags: [Programs]\n      summary: List all user programs\n      description: Returns all training programs across all coaches for the user.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: List of programs\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      programs:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/Program\"\n\n  /users/{userId}/coaches/{coachId}/programs:\n    post:\n      tags: [Programs]\n      summary: Create a training program\n      description: Creates a new training program under a specific coach. Triggers async program build.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                programName:\n                  type: string\n                description:\n                  type: string\n                sessionId:\n                  type: string\n                  description: Program designer session ID to build from\n      responses:\n        \"201\":\n          description: Program creation initiated\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      program:\n                        $ref: \"#/components/schemas/Program\"\n    get:\n      tags: [Programs]\n      summary: List programs for a coach\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n      responses:\n        \"200\":\n          description: List of programs\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      programs:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/Program\"\n\n  /users/{userId}/coaches/{coachId}/programs/{programId}:\n    get:\n      tags: [Programs]\n      summary: Get a specific program\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ProgramIdParam\"\n      responses:\n        \"200\":\n          description: Program details\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      program:\n                        $ref: \"#/components/schemas/Program\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n    put:\n      tags: [Programs]\n      summary: Update a program\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ProgramIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                programName:\n                  type: string\n                status:\n                  type: string\n                currentDay:\n                  type: integer\n      responses:\n        \"200\":\n          description: Program updated\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n    delete:\n      tags: [Programs]\n      summary: Delete a program\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ProgramIdParam\"\n      responses:\n        \"200\":\n          description: Program deleted\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n\n  # ===================================================================\n  # WORKOUT TEMPLATES\n  # ===================================================================\n\n  /users/{userId}/coaches/{coachId}/programs/{programId}/templates:\n    get:\n      tags: [Workout Templates]\n      summary: Get workout templates\n      description: |\n        Returns workout templates for a program. Supports filtering:\n        - `?today=true` - Get today's scheduled workout\n        - `?day=N` - Get workout for a specific day number\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ProgramIdParam\"\n        - name: today\n          in: query\n          schema:\n            type: boolean\n          description: If true, returns today's scheduled workout\n        - name: day\n          in: query\n          schema:\n            type: integer\n          description: Specific day number to retrieve\n      responses:\n        \"200\":\n          description: Workout template(s)\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      templates:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/WorkoutTemplate\"\n\n  /users/{userId}/coaches/{coachId}/programs/{programId}/templates/{templateId}:\n    get:\n      tags: [Workout Templates]\n      summary: Get a specific workout template\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ProgramIdParam\"\n        - $ref: \"#/components/parameters/TemplateIdParam\"\n      responses:\n        \"200\":\n          description: Workout template details\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      template:\n                        $ref: \"#/components/schemas/WorkoutTemplate\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n\n  /users/{userId}/coaches/{coachId}/programs/{programId}/templates/{templateId}/log:\n    post:\n      tags: [Workout Templates]\n      summary: Log a workout from template\n      description: Converts a workout template into a logged workout and advances the program.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ProgramIdParam\"\n        - $ref: \"#/components/parameters/TemplateIdParam\"\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                modifications:\n                  type: object\n                  description: Optional modifications to the template exercises\n      responses:\n        \"200\":\n          description: Workout logged\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      workoutId:\n                        type: string\n                      message:\n                        type: string\n\n  /users/{userId}/coaches/{coachId}/programs/{programId}/templates/{templateId}/skip:\n    post:\n      tags: [Workout Templates]\n      summary: Skip a workout template\n      description: Marks a workout template as skipped and advances the program.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ProgramIdParam\"\n        - $ref: \"#/components/parameters/TemplateIdParam\"\n      responses:\n        \"200\":\n          description: Workout skipped\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n\n  /users/{userId}/coaches/{coachId}/programs/{programId}/rest-day/complete:\n    post:\n      tags: [Workout Templates]\n      summary: Complete a rest day\n      description: Marks a rest day as complete and advances the program.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n        - $ref: \"#/components/parameters/ProgramIdParam\"\n      responses:\n        \"200\":\n          description: Rest day completed\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n\n  # ===================================================================\n  # SHARED PROGRAMS (Protected)\n  # ===================================================================\n\n  /users/{userId}/programs/{programId}/share:\n    post:\n      tags: [Shared Programs]\n      summary: Share a program\n      description: Creates a shareable link for a training program. Idempotent - returns existing share if one exists.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/ProgramIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [coachId]\n              properties:\n                coachId:\n                  type: string\n      responses:\n        \"200\":\n          description: Program shared\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      sharedProgramId:\n                        type: string\n                      shareUrl:\n                        type: string\n                      createdAt:\n                        type: string\n                        format: date-time\n                      message:\n                        type: string\n                      existing:\n                        type: boolean\n                        description: True if returning an existing share link\n\n  /users/{userId}/shared-programs:\n    get:\n      tags: [Shared Programs]\n      summary: List user's shared programs\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: List of shared programs\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      sharedPrograms:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/SharedProgram\"\n\n  /users/{userId}/shared-programs/{sharedProgramId}:\n    delete:\n      tags: [Shared Programs]\n      summary: Unshare a program\n      description: Deactivates a shared program link.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SharedProgramIdParam\"\n      responses:\n        \"200\":\n          description: Shared program deactivated\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n\n  /users/{userId}/shared-programs/{sharedProgramId}/copy:\n    post:\n      tags: [Shared Programs]\n      summary: Copy a shared program\n      description: Copies a shared program into the user's account.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/SharedProgramIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [coachId]\n              properties:\n                coachId:\n                  type: string\n                  description: Coach to assign the copied program to\n      responses:\n        \"200\":\n          description: Program copied\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      programId:\n                        type: string\n                      programName:\n                        type: string\n                      coachId:\n                        type: string\n                      coachName:\n                        type: string\n                      message:\n                        type: string\n\n  # ===================================================================\n  # WORKOUTS\n  # ===================================================================\n\n  /users/{userId}/workouts:\n    get:\n      tags: [Workouts]\n      summary: List workouts\n      description: Returns logged workouts with filtering, sorting, and pagination.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - name: fromDate\n          in: query\n          schema:\n            type: string\n            format: date-time\n          description: Filter workouts from this date (ISO 8601)\n        - name: toDate\n          in: query\n          schema:\n            type: string\n            format: date-time\n          description: Filter workouts up to this date (ISO 8601)\n        - name: discipline\n          in: query\n          schema:\n            type: string\n          description: Filter by discipline\n        - name: workoutType\n          in: query\n          schema:\n            type: string\n          description: Filter by workout type\n        - name: location\n          in: query\n          schema:\n            type: string\n          description: Filter by location\n        - name: coachId\n          in: query\n          schema:\n            type: string\n          description: Filter by coach ID\n        - name: minConfidence\n          in: query\n          schema:\n            type: number\n            minimum: 0\n            maximum: 1\n          description: Minimum extraction confidence threshold\n        - $ref: \"#/components/parameters/LimitParam\"\n        - $ref: \"#/components/parameters/OffsetParam\"\n        - name: sortBy\n          in: query\n          schema:\n            type: string\n            enum: [completedAt, confidence, workoutName]\n            default: completedAt\n        - $ref: \"#/components/parameters/SortOrderParam\"\n      responses:\n        \"200\":\n          description: List of workouts\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      workouts:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/Workout\"\n                      totalCount:\n                        type: integer\n    post:\n      tags: [Workouts]\n      summary: Log a workout\n      description: |\n        Initiates workout logging from a natural language description.\n        Asynchronously processes the workout using AI extraction.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [userMessage, coachId]\n              properties:\n                userMessage:\n                  type: string\n                  description: Natural language workout description\n                coachId:\n                  type: string\n                conversationId:\n                  type: string\n                  default: command-palette\n                isSlashCommand:\n                  type: boolean\n                slashCommand:\n                  type: string\n      responses:\n        \"201\":\n          description: Workout logging initiated\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      message:\n                        type: string\n                      status:\n                        type: string\n                        example: processing\n                      details:\n                        type: object\n                        properties:\n                          userId:\n                            type: string\n                          workoutContent:\n                            type: string\n                          timestamp:\n                            type: string\n                            format: date-time\n\n  /users/{userId}/workouts/{workoutId}:\n    get:\n      tags: [Workouts]\n      summary: Get a specific workout\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/WorkoutIdParam\"\n      responses:\n        \"200\":\n          description: Workout details\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      workout:\n                        $ref: \"#/components/schemas/Workout\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n    put:\n      tags: [Workouts]\n      summary: Update a workout\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/WorkoutIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                workoutName:\n                  type: string\n                duration:\n                  type: number\n                summary:\n                  type: string\n      responses:\n        \"200\":\n          description: Workout updated\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n    delete:\n      tags: [Workouts]\n      summary: Delete a workout\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/WorkoutIdParam\"\n      responses:\n        \"200\":\n          description: Workout deleted\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SuccessResponse\"\n\n  /users/{userId}/workouts/count:\n    get:\n      tags: [Workouts]\n      summary: Get workout count\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: Workout count\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      count:\n                        type: integer\n\n  # ===================================================================\n  # EXERCISES\n  # ===================================================================\n\n  /users/{userId}/exercises:\n    get:\n      tags: [Exercises]\n      summary: Get exercise history\n      description: Returns exercise performance data filtered by exercise name.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - name: exerciseName\n          in: query\n          required: true\n          schema:\n            type: string\n          description: The exercise name to look up\n        - name: fromDate\n          in: query\n          schema:\n            type: string\n            format: date\n          description: Start date (YYYY-MM-DD)\n        - name: toDate\n          in: query\n          schema:\n            type: string\n            format: date\n          description: End date (YYYY-MM-DD)\n        - $ref: \"#/components/parameters/LimitParam\"\n        - $ref: \"#/components/parameters/SortOrderParam\"\n        - name: cursor\n          in: query\n          schema:\n            type: string\n          description: Pagination cursor from previous response\n      responses:\n        \"200\":\n          description: Exercise history\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      exerciseName:\n                        type: string\n                      exercises:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/Exercise\"\n                      aggregations:\n                        type: object\n                      pagination:\n                        type: object\n                        properties:\n                          cursor:\n                            type: string\n                          hasMore:\n                            type: boolean\n\n  /users/{userId}/exercise-names:\n    get:\n      tags: [Exercises]\n      summary: Get exercise name list\n      description: Returns a list of all distinct exercise names the user has logged.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: Exercise names\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      exerciseNames:\n                        type: array\n                        items:\n                          type: string\n\n  /users/{userId}/exercises/count:\n    get:\n      tags: [Exercises]\n      summary: Get exercise count\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: Exercise count\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      count:\n                        type: integer\n\n  # ===================================================================\n  # MEMORIES\n  # ===================================================================\n\n  /users/{userId}/memories:\n    get:\n      tags: [Memories]\n      summary: List user memories\n      description: Returns user memories (preferences, goals, constraints, etc.).\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - name: coachId\n          in: query\n          schema:\n            type: string\n          description: Filter by coach ID\n        - name: memoryType\n          in: query\n          schema:\n            type: string\n            enum: [preference, goal, constraint, instruction, context]\n          description: Filter by memory type\n        - name: importance\n          in: query\n          schema:\n            type: string\n            enum: [high, medium, low]\n          description: Filter by importance level\n        - $ref: \"#/components/parameters/LimitParam\"\n      responses:\n        \"200\":\n          description: List of memories\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      memories:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/Memory\"\n                      totalCount:\n                        type: integer\n    post:\n      tags: [Memories]\n      summary: Create a memory\n      description: |\n        Creates a new user memory. Uses AI to automatically detect memory type,\n        importance, and scope from the content.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [content]\n              properties:\n                content:\n                  type: string\n                  description: The memory content (free text)\n                coachId:\n                  type: string\n                  description: Optional coach to scope the memory to\n      responses:\n        \"201\":\n          description: Memory created\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      message:\n                        type: string\n                      memory:\n                        $ref: \"#/components/schemas/Memory\"\n                      memoryId:\n                        type: string\n                      userId:\n                        type: string\n                      pineconeStored:\n                        type: boolean\n                      pineconeRecordId:\n                        type: string\n\n  /users/{userId}/memories/{memoryId}:\n    delete:\n      tags: [Memories]\n      summary: Delete a memory\n      description: Deletes a memory and cleans up its Pinecone vector embedding.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/MemoryIdParam\"\n      responses:\n        \"200\":\n          description: Memory deleted\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      message:\n                        type: string\n                      memoryId:\n                        type: string\n                      userId:\n                        type: string\n                      pineconeCleanup:\n                        type: boolean\n\n  # ===================================================================\n  # REPORTS\n  # ===================================================================\n\n  /users/{userId}/reports/weekly:\n    get:\n      tags: [Reports]\n      summary: List weekly reports\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - name: fromDate\n          in: query\n          schema:\n            type: string\n            format: date-time\n        - name: toDate\n          in: query\n          schema:\n            type: string\n            format: date-time\n        - $ref: \"#/components/parameters/LimitParam\"\n        - $ref: \"#/components/parameters/OffsetParam\"\n        - name: sortBy\n          in: query\n          schema:\n            type: string\n            enum: [weekStart, weekEnd, workoutCount]\n        - $ref: \"#/components/parameters/SortOrderParam\"\n      responses:\n        \"200\":\n          description: List of weekly reports\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      reports:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/WeeklyReport\"\n                      count:\n                        type: integer\n                      userId:\n                        type: string\n\n  /users/{userId}/reports/weekly/{weekId}:\n    get:\n      tags: [Reports]\n      summary: Get a specific weekly report\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/WeekIdParam\"\n      responses:\n        \"200\":\n          description: Weekly report details\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      report:\n                        $ref: \"#/components/schemas/WeeklyReport\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n\n  /users/{userId}/reports/monthly:\n    get:\n      tags: [Reports]\n      summary: List monthly reports\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - name: fromDate\n          in: query\n          schema:\n            type: string\n            format: date-time\n        - name: toDate\n          in: query\n          schema:\n            type: string\n            format: date-time\n        - $ref: \"#/components/parameters/LimitParam\"\n        - $ref: \"#/components/parameters/OffsetParam\"\n        - $ref: \"#/components/parameters/SortOrderParam\"\n      responses:\n        \"200\":\n          description: List of monthly reports\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      reports:\n                        type: array\n                        items:\n                          $ref: \"#/components/schemas/MonthlyReport\"\n                      count:\n                        type: integer\n\n  /users/{userId}/reports/monthly/{monthId}:\n    get:\n      tags: [Reports]\n      summary: Get a specific monthly report\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/MonthIdParam\"\n      responses:\n        \"200\":\n          description: Monthly report details\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      report:\n                        $ref: \"#/components/schemas/MonthlyReport\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n\n  # ===================================================================\n  # USER PROFILE\n  # ===================================================================\n\n  /users/{userId}/profile:\n    get:\n      tags: [User Profile]\n      summary: Get user profile\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: User profile\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      profile:\n                        $ref: \"#/components/schemas/UserProfile\"\n    put:\n      tags: [User Profile]\n      summary: Update user profile\n      description: |\n        Updates user profile fields. Immutable fields (email, username, userId)\n        cannot be modified and will return a 400 error if included.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                firstName:\n                  type: string\n                lastName:\n                  type: string\n                nickname:\n                  type: string\n                criticalTrainingDirective:\n                  type: object\n                  properties:\n                    directive:\n                      type: string\n                    rationale:\n                      type: string\n                preferences:\n                  type: object\n                  properties:\n                    emailNotifications:\n                      type: object\n                      properties:\n                        coachCheckIns:\n                          type: boolean\n                        weeklyReports:\n                          type: boolean\n                        monthlyReports:\n                          type: boolean\n                        programUpdates:\n                          type: boolean\n                        featureAnnouncements:\n                          type: boolean\n      responses:\n        \"200\":\n          description: Profile updated\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      profile:\n                        $ref: \"#/components/schemas/UserProfile\"\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  # ===================================================================\n  # SUBSCRIPTIONS & BILLING\n  # ===================================================================\n\n  /users/{userId}/subscription:\n    get:\n      tags: [Subscriptions]\n      summary: Get subscription status\n      description: Returns the user's subscription status. No subscription record means free tier.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: Subscription status\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SubscriptionStatus\"\n\n  /users/{userId}/stripe/portal-session:\n    post:\n      tags: [Subscriptions]\n      summary: Create Stripe billing portal session\n      description: Creates a Stripe Customer Portal session URL for managing billing. Requires an active subscription.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      responses:\n        \"200\":\n          description: Portal session URL\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      url:\n                        type: string\n                        description: Stripe Customer Portal URL\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  # ===================================================================\n  # MEDIA (Upload/Download)\n  # ===================================================================\n\n  /users/{userId}/generate-upload-urls:\n    post:\n      tags: [Media]\n      summary: Generate presigned upload URLs\n      description: Generates presigned S3 URLs for uploading images. URLs expire in 5 minutes.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [fileCount, fileTypes]\n              properties:\n                fileCount:\n                  type: integer\n                  minimum: 1\n                  maximum: 5\n                  description: Number of upload URLs to generate\n                fileTypes:\n                  type: array\n                  items:\n                    type: string\n                    enum: [jpg, png, webp, gif, heic, heif]\n                  description: File types for each upload\n      responses:\n        \"200\":\n          description: Presigned upload URLs\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      uploadUrls:\n                        type: array\n                        items:\n                          type: object\n                          properties:\n                            index:\n                              type: integer\n                            s3Key:\n                              type: string\n                            uploadUrl:\n                              type: string\n                              description: Presigned URL (expires in 5 minutes)\n                      expiresIn:\n                        type: integer\n                        example: 300\n\n  /users/{userId}/generate-download-urls:\n    post:\n      tags: [Media]\n      summary: Generate presigned download URLs\n      description: Generates presigned S3 URLs for downloading images.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [s3Keys]\n              properties:\n                s3Keys:\n                  type: array\n                  items:\n                    type: string\n                  description: S3 keys of images to generate download URLs for\n      responses:\n        \"200\":\n          description: Presigned download URLs\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      downloadUrls:\n                        type: array\n                        items:\n                          type: object\n                          properties:\n                            s3Key:\n                              type: string\n                            downloadUrl:\n                              type: string\n\n  # ===================================================================\n  # AI UTILITIES\n  # ===================================================================\n\n  /explain-term:\n    post:\n      tags: [AI Utilities]\n      summary: Explain a fitness term\n      description: Uses AI to generate a plain-language explanation of a fitness term (equipment, exercise, or focus area).\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [term, termType]\n              properties:\n                term:\n                  type: string\n                  description: The fitness term to explain\n                termType:\n                  type: string\n                  enum: [equipment, exercise, focus_area]\n                  description: Category of the term\n      responses:\n        \"200\":\n          description: Term explanation\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      term:\n                        type: string\n                      termType:\n                        type: string\n                      explanation:\n                        type: string\n                      generatedAt:\n                        type: string\n                        format: date-time\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  /users/{userId}/coaches/{coachId}/greeting:\n    post:\n      tags: [AI Utilities]\n      summary: Generate a coach greeting\n      description: Generates a personalized dashboard greeting from the coach's perspective.\n      parameters:\n        - $ref: \"#/components/parameters/UserIdParam\"\n        - $ref: \"#/components/parameters/CoachIdParam\"\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required: [timeOfDay, activeProgramCount, todaysWorkoutCount]\n              properties:\n                timeOfDay:\n                  type: string\n                  enum: [morning, afternoon, evening]\n                activeProgramCount:\n                  type: integer\n                  minimum: 0\n                todaysWorkoutCount:\n                  type: integer\n                  minimum: 0\n                lastWorkoutDate:\n                  type: string\n                  format: date-time\n                  description: ISO timestamp of the user's most recent workout\n      responses:\n        \"200\":\n          description: Generated greeting\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: \"#/components/schemas/SuccessResponse\"\n                  - type: object\n                    properties:\n                      greeting:\n                        type: string\n                        description: 1-2 sentence personalized greeting\n                      generatedAt:\n                        type: string\n                        format: date-time\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n";

    window.onload = function() {
      const spec = jsyaml.load(yamlSpec);
      SwaggerUIBundle({
        spec: spec,
        dom_id: '#swagger-ui',
        deepLinking: true,
        presets: [
          SwaggerUIBundle.presets.apis,
          SwaggerUIStandalonePreset
        ],
        plugins: [
          SwaggerUIBundle.plugins.DownloadUrl
        ],
        layout: "StandaloneLayout",
        defaultModelsExpandDepth: 1,
        defaultModelExpandDepth: 2,
        docExpansion: "list",
        filter: true,
        showExtensions: true,
        tagsSorter: "alpha",
        operationsSorter: "alpha"
      });
    };
  </script>
</body>
</html>